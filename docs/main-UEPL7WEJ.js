import{a as $,b as Ae,c as tf,d as R,e as Pw,f as nc,g as kw,h as Ow,i as Fw,j as nf,k as Lw,l as Ys,m as rf,n as rc,o as Vw,p as jw,q as of,r as Pe,s as Jr,t as gn,u as ic,v as Zs,w as Bw,x as Uw,y as dr,z as kt}from"./chunk-4ZHOUZTK.js";var af=null;var sf=1,$w=Symbol("SIGNAL");function De(n){let e=af;return af=n,e}function Hw(){return af}var uf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function vx(n){if(!(ff(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===sf)){if(!n.producerMustRecompute(n)&&!lf(n)){n.dirty=!1,n.lastCleanEpoch=sf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=sf}}function cf(n){return n&&(n.nextProducerIndex=0),De(n)}function qw(n,e){if(De(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ff(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)hf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function lf(n){pf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(vx(t),r!==t.version))return!0}return!1}function df(n){if(pf(n),ff(n))for(let e=0;e<n.producerNode.length;e++)hf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function hf(n,e){if(_x(n),n.liveConsumerNode.length===1&&wx(n))for(let r=0;r<n.producerNode.length;r++)hf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];pf(i),i.producerIndexOfThis[r]=e}}function ff(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function pf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function _x(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function wx(n){return n.producerNode!==void 0}function Ix(){throw new Error}var Ex=Ix;function zw(n){Ex=n}function te(n){return typeof n=="function"}function Yi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var oc=Yi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Xr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ve=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof oc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Gw(o)}catch(s){e=e??[],s instanceof oc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new oc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Gw(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Xr(t,e)}remove(e){let{_finalizers:t}=this;t&&Xr(t,e),e instanceof n&&e._removeParent(this)}};Ve.EMPTY=(()=>{let n=new Ve;return n.closed=!0,n})();var gf=Ve.EMPTY;function sc(n){return n instanceof Ve||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function Gw(n){te(n)?n():n.unsubscribe()}var nn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Zi={setTimeout(n,e,...t){let{delegate:r}=Zi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Zi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ac(n){Zi.setTimeout(()=>{let{onUnhandledError:e}=nn;if(e)e(n);else throw n})}function Js(){}var Ww=mf("C",void 0,void 0);function Kw(n){return mf("E",void 0,n)}function Qw(n){return mf("N",n,void 0)}function mf(n,e,t){return{kind:n,value:e,error:t}}var ei=null;function Ji(n){if(nn.useDeprecatedSynchronousErrorHandling){let e=!ei;if(e&&(ei={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ei;if(ei=null,t)throw r}}else n()}function Yw(n){nn.useDeprecatedSynchronousErrorHandling&&ei&&(ei.errorThrown=!0,ei.error=n)}var ti=class extends Ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sc(e)&&e.add(this)):this.destination=Tx}static create(e,t,r){return new Vn(e,t,r)}next(e){this.isStopped?vf(Qw(e),this):this._next(e)}error(e){this.isStopped?vf(Kw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vf(Ww,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Dx=Function.prototype.bind;function yf(n,e){return Dx.call(n,e)}var _f=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){uc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){uc(r)}else uc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){uc(t)}}},Vn=class extends ti{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&nn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yf(e.next,o),error:e.error&&yf(e.error,o),complete:e.complete&&yf(e.complete,o)}):i=e}this.destination=new _f(i)}};function uc(n){nn.useDeprecatedSynchronousErrorHandling?Yw(n):ac(n)}function Cx(n){throw n}function vf(n,e){let{onStoppedNotification:t}=nn;t&&Zi.setTimeout(()=>t(n,e))}var Tx={closed:!0,next:Js,error:Cx,complete:Js};var Xi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function _t(n){return n}function wf(...n){return If(n)}function If(n){return n.length===0?_t:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Sx(t)?t:new Vn(t,r,i);return Ji(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Zw(r),new r((i,o)=>{let s=new Vn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Xi](){return this}pipe(...t){return If(t)(this)}toPromise(t){return t=Zw(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Zw(n){var e;return(e=n??nn.Promise)!==null&&e!==void 0?e:Promise}function bx(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function Sx(n){return n&&n instanceof ti||bx(n)&&sc(n)}function Ef(n){return te(n?.lift)}function se(n){return e=>{if(Ef(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(n,e,t,r,i){return new Df(n,e,t,r,i)}var Df=class extends ti{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function eo(){return se((n,e)=>{let t=null;n._refCount++;let r=ce(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var to=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ef(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ve;let t=this.getSubject();e.add(this.source.subscribe(ce(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ve.EMPTY)}return e}refCount(){return eo()(this)}};var Jw=Yi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new cc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Jw}next(t){Ji(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ji(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ji(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gf:(this.currentObservers=null,o.push(t),new Ve(()=>{this.currentObservers=null,Xr(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new cc(e,t),n})(),cc=class extends Ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:gf}};var st=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Xs={now(){return(Xs.delegate||Date).now()},delegate:void 0};var lc=class extends Ue{constructor(e=1/0,t=1/0,r=Xs){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var dc=class extends Ve{constructor(e,t){super()}schedule(e,t=0){return this}};var ea={setInterval(n,e,...t){let{delegate:r}=ea;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ea;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var no=class extends dc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return ea.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ea.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Xr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ro=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ro.now=Xs.now;var io=class extends ro{constructor(e,t=ro.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ta=new io(no);var hc=class extends no{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var fc=class extends io{};var Cf=new fc(hc);var wt=new he(n=>n.complete());function Xw(n){return n&&te(n.schedule)}function Tf(n){return n[n.length-1]}function eI(n){return te(Tf(n))?n.pop():void 0}function mn(n){return Xw(Tf(n))?n.pop():void 0}function tI(n,e){return typeof Tf(n)=="number"?n.pop():e}var pc=n=>n&&typeof n.length=="number"&&typeof n!="function";function gc(n){return te(n?.then)}function mc(n){return te(n[Xi])}function yc(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function vc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Ax(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var _c=Ax();function wc(n){return te(n?.[_c])}function Ic(n){return kw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield nc(t.read());if(i)return yield nc(void 0);yield yield nc(r)}}finally{t.releaseLock()}})}function Ec(n){return te(n?.getReader)}function ke(n){if(n instanceof he)return n;if(n!=null){if(mc(n))return xx(n);if(pc(n))return Rx(n);if(gc(n))return Mx(n);if(yc(n))return nI(n);if(wc(n))return Nx(n);if(Ec(n))return Px(n)}throw vc(n)}function xx(n){return new he(e=>{let t=n[Xi]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Rx(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Mx(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ac)})}function Nx(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function nI(n){return new he(e=>{kx(n,e).catch(t=>e.error(t))})}function Px(n){return nI(Ic(n))}function kx(n,e){var t,r,i,o;return Pw(this,void 0,void 0,function*(){try{for(t=Ow(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function At(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function qt(n,e=0){return se((t,r)=>{t.subscribe(ce(r,i=>At(r,n,()=>r.next(i),e),()=>At(r,n,()=>r.complete(),e),i=>At(r,n,()=>r.error(i),e)))})}function rn(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function rI(n,e){return ke(n).pipe(rn(e),qt(e))}function iI(n,e){return ke(n).pipe(rn(e),qt(e))}function oI(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function sI(n,e){return new he(t=>{let r;return At(t,e,()=>{r=n[_c](),At(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function Dc(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{At(t,e,()=>{let r=n[Symbol.asyncIterator]();At(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function aI(n,e){return Dc(Ic(n),e)}function uI(n,e){if(n!=null){if(mc(n))return rI(n,e);if(pc(n))return oI(n,e);if(gc(n))return iI(n,e);if(yc(n))return Dc(n,e);if(wc(n))return sI(n,e);if(Ec(n))return aI(n,e)}throw vc(n)}function _e(n,e){return e?uI(n,e):ke(n)}function J(...n){let e=mn(n);return _e(n,e)}function oo(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function bf(n){return!!n&&(n instanceof he||te(n.lift)&&te(n.subscribe))}var jn=Yi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function K(n,e){return se((t,r)=>{let i=0;t.subscribe(ce(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Ox}=Array;function Fx(n,e){return Ox(e)?n(...e):n(e)}function cI(n){return K(e=>Fx(n,e))}var{isArray:Lx}=Array,{getPrototypeOf:Vx,prototype:jx,keys:Bx}=Object;function lI(n){if(n.length===1){let e=n[0];if(Lx(e))return{args:e,keys:null};if(Ux(e)){let t=Bx(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Ux(n){return n&&typeof n=="object"&&Vx(n)===jx}function dI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function na(...n){let e=mn(n),t=eI(n),{args:r,keys:i}=lI(n);if(r.length===0)return _e([],e);let o=new he($x(r,e,i?s=>dI(i,s):_t));return t?o.pipe(cI(t)):o}function $x(n,e,t=_t){return r=>{hI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)hI(e,()=>{let l=_e(n[c],e),h=!1;l.subscribe(ce(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function hI(n,e,t){n?At(t,n,e):e()}function fI(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},v=M=>l<r?b(M):c.push(M),b=M=>{o&&e.next(M),l++;let N=!1;ke(t(M,h++)).subscribe(ce(e,j=>{i?.(j),o?v(j):e.next(j)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let j=c.shift();s?At(e,s,()=>b(j)):b(j)}m()}catch(j){e.error(j)}}))};return n.subscribe(ce(e,v,()=>{p=!0,m()})),()=>{a?.()}}function We(n,e,t=1/0){return te(e)?We((r,i)=>K((o,s)=>e(r,o,i,s))(ke(n(r,i))),t):(typeof e=="number"&&(t=e),se((r,i)=>fI(r,i,n,t)))}function hr(n=1/0){return We(_t,n)}function pI(){return hr(1)}function so(...n){return pI()(_e(n,mn(n)))}function Cc(n){return new he(e=>{ke(n()).subscribe(e)})}function Sf(...n){let e=mn(n),t=tI(n,1/0),r=n;return r.length?r.length===1?ke(r[0]):hr(t)(_e(r,e)):wt}function at(n,e){return se((t,r)=>{let i=0;t.subscribe(ce(r,o=>n.call(e,o,i++)&&r.next(o)))})}function fr(n){return se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ce(t,void 0,void 0,s=>{o=ke(n(s,fr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function gI(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(ce(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ni(n,e){return te(e)?We(n,e,1):We(n,1)}function pr(n){return se((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Bn(n){return n<=0?()=>wt:se((e,t)=>{let r=0;e.subscribe(ce(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Af(n){return K(()=>n)}function xf(n,e=_t){return n=n??Hx,se((t,r)=>{let i,o=!0;t.subscribe(ce(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function Hx(n,e){return n===e}function Tc(n=qx){return se((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function qx(){return new jn}function ra(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function zt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?at((i,o)=>n(i,o,r)):_t,Bn(1),t?pr(e):Tc(()=>new jn))}function ao(n){return n<=0?()=>wt:se((e,t)=>{let r=[];e.subscribe(ce(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Rf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?at((i,o)=>n(i,o,r)):_t,ao(1),t?pr(e):Tc(()=>new jn))}function ia(){return se((n,e)=>{let t,r=!1;n.subscribe(ce(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function ri(n,e){return se(gI(n,e,arguments.length>=2,!0))}function mI(n={}){let{connector:e=()=>new Ue,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=c=void 0,h=p=!1},b=()=>{let M=s;v(),M?.unsubscribe()};return se((M,N)=>{l++,!p&&!h&&m();let j=c=c??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=Mf(b,i))}),j.subscribe(N),!s&&l>0&&(s=new Vn({next:H=>j.next(H),error:H=>{p=!0,m(),a=Mf(v,t,H),j.error(H)},complete:()=>{h=!0,m(),a=Mf(v,r),j.complete()}}),ke(M).subscribe(s))})(o)}}function Mf(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Vn({next:()=>{r.unsubscribe(),n()}});return ke(e(...t)).subscribe(r)}function bc(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,mI({connector:()=>new lc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ii(...n){let e=mn(n);return se((t,r)=>{(e?so(n,t,e):so(n,t)).subscribe(r)})}function je(n,e){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ce(r,c=>{i?.unsubscribe();let l=0,h=o++;ke(n(c,h)).subscribe(i=ce(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Sc(n,e){return te(e)?je(()=>n,e):je(()=>n)}function Nf(n){return se((e,t)=>{ke(n).subscribe(ce(t,()=>t.complete(),Js)),!t.closed&&e.subscribe(t)})}function Je(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ce(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):_t}var X=class extends Error{constructor(e,t){super(Cp(e,t)),this.code=e}};function Cp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function ga(n){return{toString:n}.toString()}var Ac="__parameters__";function zx(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function XI(n,e,t){return ga(()=>{let r=zx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(Ac)?c[Ac]:Object.defineProperty(c,Ac,{value:[]})[Ac];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var qn=globalThis;function be(n){for(let e in n)if(n[e]===be)return e;throw Error("Could not find renamed property on target object.")}function Ot(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ot).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function yI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var Gx=be({__forward_ref__:be});function eE(n){return n.__forward_ref__=eE,n.toString=function(){return Ot(this())},n}function Wt(n){return tE(n)?n():n}function tE(n){return typeof n=="function"&&n.hasOwnProperty(Gx)&&n.__forward_ref__===eE}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Dt(n){return{providers:n.providers||[],imports:n.imports||[]}}function ol(n){return vI(n,rE)||vI(n,iE)}function nE(n){return ol(n)!==null}function vI(n,e){return n.hasOwnProperty(e)?n[e]:null}function Wx(n){let e=n&&(n[rE]||n[iE]);return e||null}function _I(n){return n&&(n.hasOwnProperty(wI)||n.hasOwnProperty(Kx))?n[wI]:null}var rE=be({\u0275prov:be}),wI=be({\u0275inj:be}),iE=be({ngInjectableDef:be}),Kx=be({ngInjectorDef:be}),G=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function oE(n){return n&&!!n.\u0275providers}var Qx=be({\u0275cmp:be}),Yx=be({\u0275dir:be}),Zx=be({\u0275pipe:be}),Jx=be({\u0275mod:be}),Oc=be({\u0275fac:be}),sa=be({__NG_ELEMENT_ID__:be}),II=be({__NG_ENV_ID__:be});function sE(n){return typeof n=="string"?n:n==null?"":String(n)}function Xx(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():sE(n)}function eR(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function Tp(n,e){throw new X(-201,!1)}var ue=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ue||{}),Uf;function aE(){return Uf}function Gt(n){let e=Uf;return Uf=n,e}function uE(n,e,t){let r=ol(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ue.Optional)return null;if(e!==void 0)return e;Tp(n,"Injector")}var tR={},ua=tR,$f="__NG_DI_FLAG__",Fc="ngTempTokenPath",nR="ngTokenPath",rR=/\n/gm,iR="\u0275",EI="__source",fo;function oR(){return fo}function gr(n){let e=fo;return fo=n,e}function sR(n,e=ue.Default){if(fo===void 0)throw new X(-203,!1);return fo===null?uE(n,void 0,e):fo.get(n,e&ue.Optional?null:void 0,e)}function O(n,e=ue.Default){return(aE()||sR)(Wt(n),e)}function V(n,e=ue.Default){return O(n,sl(e))}function sl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Hf(n){let e=[];for(let t=0;t<n.length;t++){let r=Wt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=ue.Default;for(let s=0;s<r.length;s++){let a=r[s],c=aR(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function cE(n,e){return n[$f]=e,n.prototype[$f]=e,n}function aR(n){return n[$f]}function uR(n,e,t,r){let i=n[Fc];throw e[EI]&&i.unshift(e[EI]),n.message=cR(`
`+n.message,i,t,r),n[nR]=i,n[Fc]=null,n}function cR(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==iR?n.slice(2):n;let i=Ot(e);if(Array.isArray(e))i=e.map(Ot).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ot(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(rR,`
  `)}`}var Co=cE(XI("Optional"),8);var bp=cE(XI("SkipSelf"),4);function go(n,e){let t=n.hasOwnProperty(Oc);return t?n[Oc]:null}function Sp(n,e){n.forEach(t=>Array.isArray(t)?Sp(t,e):e(t))}function lE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Lc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var ca={},yn=[],mo=new G(""),dE=new G("",-1),hE=new G(""),Vc=class{get(e,t=ua){if(t===ua){let r=new Error(`NullInjectorError: No provider for ${Ot(e)}!`);throw r.name="NullInjectorError",r}return t}},fE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(fE||{}),_n=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(_n||{}),vr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(vr||{});function lR(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function qf(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];hR(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function dR(n){return n===3||n===4||n===6}function hR(n){return n.charCodeAt(0)===64}function Ap(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?DI(n,t,i,null,e[++r]):DI(n,t,i,null,null))}}return n}function DI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var pE="ng-template";function fR(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&lR(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(xp(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function xp(n){return n.type===4&&n.value!==pE}function pR(n,e,t){let r=n.type===4&&!t?pE:n.value;return e===r}function gR(n,e,t){let r=4,i=n.attrs,o=i!==null?vR(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!on(r)&&!on(c))return!1;if(s&&on(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!pR(n,c,t)||c===""&&e.length===1){if(on(r))return!1;s=!0}}else if(r&8){if(i===null||!fR(n,i,c,t)){if(on(r))return!1;s=!0}}else{let l=e[++a],h=mR(c,i,xp(n),t);if(h===-1){if(on(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(on(r))return!1;s=!0}}}}return on(r)||s}function on(n){return(n&1)===0}function mR(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return _R(e,n)}function yR(n,e,t=!1){for(let r=0;r<e.length;r++)if(gR(n,e[r],t))return!0;return!1}function vR(n){for(let e=0;e<n.length;e++){let t=n[e];if(dR(t))return e}return n.length}function _R(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function CI(n,e){return n?":not("+e.trim()+")":e}function wR(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!on(s)&&(e+=CI(o,i),i=""),r=s,o=o||!on(r);t++}return i!==""&&(e+=CI(o,i)),e}function IR(n){return n.map(wR).join(",")}function ER(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!on(i))break;i=o}r++}return{attrs:e,classes:t}}function tt(n){return ga(()=>{let e=_E(n),t=Ae($({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===fE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||_n.Emulated,styles:n.styles||yn,_:null,schemas:n.schemas||null,tView:null,id:""});wE(t);let r=n.dependencies;return t.directiveDefs=bI(r,!1),t.pipeDefs=bI(r,!0),t.id=TR(t),t})}function DR(n){return _r(n)||gE(n)}function CR(n){return n!==null}function Ct(n){return ga(()=>({type:n.type,bootstrap:n.bootstrap||yn,declarations:n.declarations||yn,imports:n.imports||yn,exports:n.exports||yn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function TI(n,e){if(n==null)return ca;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=vr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==vr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function al(n){return ga(()=>{let e=_E(n);return wE(e),e})}function _r(n){return n[Qx]||null}function gE(n){return n[Yx]||null}function mE(n){return n[Zx]||null}function yE(n){let e=_r(n)||gE(n)||mE(n);return e!==null?e.standalone:!1}function vE(n,e){let t=n[Jx]||null;if(!t&&e===!0)throw new Error(`Type ${Ot(n)} does not have '\u0275mod' property.`);return t}function _E(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ca,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||yn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:TI(n.inputs,e),outputs:TI(n.outputs),debugInfo:null}}function wE(n){n.features?.forEach(e=>e(n))}function bI(n,e){if(!n)return null;let t=e?mE:DR;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(CR)}function TR(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function bR(...n){return{\u0275providers:IE(!0,n),\u0275fromNgModule:!0}}function IE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Sp(e,s=>{let a=s;zf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&EE(i,o),t}function EE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Rp(i,o=>{e(o,r)})}}function zf(n,e,t,r){if(n=Wt(n),!n)return!1;let i=null,o=_I(n),s=!o&&_r(n);if(!o&&!s){let c=n.ngModule;if(o=_I(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)zf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Sp(o.imports,h=>{zf(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&EE(l,e)}if(!a){let l=go(i)||(()=>new i);e({provide:i,useFactory:l,deps:yn},i),e({provide:hE,useValue:i,multi:!0},i),e({provide:mo,useValue:()=>O(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Rp(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Rp(n,e){for(let t of n)oE(t)&&(t=t.\u0275providers),Array.isArray(t)?Rp(t,e):e(t)}var SR=be({provide:String,useValue:be});function DE(n){return n!==null&&typeof n=="object"&&SR in n}function AR(n){return!!(n&&n.useExisting)}function xR(n){return!!(n&&n.useFactory)}function Gf(n){return typeof n=="function"}var ul=new G(""),Mc={},RR={},Pf;function Mp(){return Pf===void 0&&(Pf=new Vc),Pf}var Ft=class{},la=class extends Ft{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Kf(e,s=>this.processProvider(s)),this.records.set(dE,uo(void 0,this)),i.has("environment")&&this.records.set(Ft,uo(void 0,this));let o=this.records.get(ul);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(hE,yn,ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=De(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),De(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=gr(this),r=Gt(void 0),i;try{return e()}finally{gr(t),Gt(r)}}get(e,t=ua,r=ue.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(II))return e[II](this);r=sl(r);let i,o=gr(this),s=Gt(void 0);try{if(!(r&ue.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=FR(e)&&ol(e);l&&this.injectableDefInScope(l)?c=uo(Wf(e),Mc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ue.Self?Mp():this.parent;return t=r&ue.Optional&&t===ua?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Fc]=a[Fc]||[]).unshift(Ot(e)),o)throw a;return uR(a,e,"R3InjectorError",this.source)}else throw a}finally{Gt(s),gr(o)}}resolveInjectorInitializers(){let e=De(null),t=gr(this),r=Gt(void 0),i;try{let o=this.get(mo,yn,ue.Self);for(let s of o)s()}finally{gr(t),Gt(r),De(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ot(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=Wt(e);let t=Gf(e)?e:Wt(e&&e.provide),r=NR(e);if(!Gf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=uo(void 0,Mc,!0),i.factory=()=>Hf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=De(null);try{return t.value===Mc&&(t.value=RR,t.value=t.factory()),typeof t.value=="object"&&t.value&&OR(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{De(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Wt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Wf(n){let e=ol(n),t=e!==null?e.factory:go(n);if(t!==null)return t;if(n instanceof G)throw new X(204,!1);if(n instanceof Function)return MR(n);throw new X(204,!1)}function MR(n){if(n.length>0)throw new X(204,!1);let t=Wx(n);return t!==null?()=>t.factory(n):()=>new n}function NR(n){if(DE(n))return uo(void 0,n.useValue);{let e=PR(n);return uo(e,Mc)}}function PR(n,e,t){let r;if(Gf(n)){let i=Wt(n);return go(i)||Wf(i)}else if(DE(n))r=()=>Wt(n.useValue);else if(xR(n))r=()=>n.useFactory(...Hf(n.deps||[]));else if(AR(n))r=()=>O(Wt(n.useExisting));else{let i=Wt(n&&(n.useClass||n.provide));if(kR(n))r=()=>new i(...Hf(n.deps));else return go(i)||Wf(i)}return r}function uo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function kR(n){return!!n.deps}function OR(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function FR(n){return typeof n=="function"||typeof n=="object"&&n instanceof G}function Kf(n,e){for(let t of n)Array.isArray(t)?Kf(t,e):t&&oE(t)?Kf(t.\u0275providers,e):e(t)}function In(n,e){n instanceof la&&n.assertNotDestroyed();let t,r=gr(n),i=Gt(void 0);try{return e()}finally{gr(r),Gt(i)}}function CE(){return aE()!==void 0||oR()!=null}function LR(n){if(!CE())throw new X(-203,!1)}function VR(n){let e=qn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function jR(n){return typeof n=="function"}var zn=0,fe=1,ne=2,Et=3,sn=4,an=5,jc=6,SI=7,wr=8,yo=9,Un=10,Lt=11,da=12,AI=13,ma=14,wn=15,vo=16,co=17,_o=18,cl=19,TE=20,yr=21,kf=22,Kt=23,Ir=25,bE=1;var ai=7,Bc=8,Uc=9,Qt=10,$c=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}($c||{});function oi(n){return Array.isArray(n)&&typeof n[bE]=="object"}function Gn(n){return Array.isArray(n)&&n[bE]===!0}function SE(n){return(n.flags&4)!==0}function ll(n){return n.componentOffset>-1}function AE(n){return(n.flags&1)===1}function ya(n){return!!n.template}function Qf(n){return(n[ne]&512)!==0}var Yf=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function xE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function dl(){return RE}function RE(n){return n.type.prototype.ngOnChanges&&(n.setInput=UR),BR}dl.ngInherit=!0;function BR(){let n=NE(this),e=n?.current;if(e){let t=n.previous;if(t===ca)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function UR(n,e,t,r,i){let o=this.declaredInputs[r],s=NE(n)||$R(n,{previous:ca,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Yf(l&&l.currentValue,t,c===ca),xE(n,e,i,t)}var ME="__ngSimpleChanges__";function NE(n){return n[ME]||null}function $R(n,e){return n[ME]=e}var xI=null;var mr=function(n,e,t){xI?.(n,e,t)},HR="svg",qR="math";function $n(n){for(;Array.isArray(n);)n=n[zn];return n}function zR(n,e){return $n(e[n])}function En(n,e){return $n(e[n.index])}function PE(n,e){return n.data[e]}function To(n,e){let t=e[n];return oi(t)?t:t[zn]}function Np(n){return(n[ne]&128)===128}function GR(n){return Gn(n[Et])}function Hc(n,e){return e==null?null:n[e]}function kE(n){n[co]=0}function OE(n){n[ne]&1024||(n[ne]|=1024,Np(n)&&fl(n))}function hl(n){return!!(n[ne]&9216||n[Kt]?.dirty)}function Zf(n){n[Un].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),hl(n)&&fl(n)}function fl(n){n[Un].changeDetectionScheduler?.notify(0);let e=ui(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Np(e)));)e=ui(e)}function FE(n,e){if((n[ne]&256)===256)throw new X(911,!1);n[yr]===null&&(n[yr]=[]),n[yr].push(e)}function WR(n,e){if(n[yr]===null)return;let t=n[yr].indexOf(e);t!==-1&&n[yr].splice(t,1)}function ui(n){let e=n[Et];return Gn(e)?e[Et]:e}var we={lFrame:GE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var LE=!1;function KR(){return we.lFrame.elementDepthCount}function QR(){we.lFrame.elementDepthCount++}function YR(){we.lFrame.elementDepthCount--}function VE(){return we.bindingsEnabled}function ZR(){return we.skipHydrationRootTNode!==null}function JR(n){return we.skipHydrationRootTNode===n}function XR(){we.skipHydrationRootTNode=null}function pt(){return we.lFrame.lView}function bo(){return we.lFrame.tView}function Dn(){let n=jE();for(;n!==null&&n.type===64;)n=n.parent;return n}function jE(){return we.lFrame.currentTNode}function eM(){let n=we.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function va(n,e){let t=we.lFrame;t.currentTNode=n,t.isParent=e}function BE(){return we.lFrame.isParent}function tM(){we.lFrame.isParent=!1}function UE(){return LE}function RI(n){LE=n}function nM(n){return we.lFrame.bindingIndex=n}function $E(){return we.lFrame.bindingIndex++}function rM(){return we.lFrame.inI18n}function iM(n,e){let t=we.lFrame;t.bindingIndex=t.bindingRootIndex=n,Jf(e)}function oM(){return we.lFrame.currentDirectiveIndex}function Jf(n){we.lFrame.currentDirectiveIndex=n}function HE(n){we.lFrame.currentQueryIndex=n}function sM(n){let e=n[fe];return e.type===2?e.declTNode:e.type===1?n[an]:null}function qE(n,e,t){if(t&ue.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ue.Host);)if(i=sM(o),i===null||(o=o[ma],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=we.lFrame=zE();return r.currentTNode=e,r.lView=n,!0}function Pp(n){let e=zE(),t=n[fe];we.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function zE(){let n=we.lFrame,e=n===null?null:n.child;return e===null?GE(n):e}function GE(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function WE(){let n=we.lFrame;return we.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var KE=WE;function kp(){let n=WE();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Op(){return we.lFrame.selectedIndex}function ci(n){we.lFrame.selectedIndex=n}function aM(){let n=we.lFrame;return PE(n.tView,n.selectedIndex)}function uM(){return we.lFrame.currentNamespace}var QE=!0;function Fp(){return QE}function Lp(n){QE=n}function cM(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=RE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Vp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Nc(n,e,t){YE(n,e,3,t)}function Pc(n,e,t,r){(n[ne]&3)===t&&YE(n,e,t,r)}function Of(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function YE(n,e,t,r){let i=r!==void 0?n[co]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[co]+=65536),(a<o||o==-1)&&(lM(n,t,e,c),n[co]=(n[co]&4294901760)+c+2),c++}function MI(n,e){mr(4,n,e);let t=De(null);try{e.call(n)}finally{De(t),mr(5,n,e)}}function lM(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[co]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,MI(a,o)):MI(a,o)}var po=-1,ha=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function dM(n){return n instanceof ha}function hM(n){return(n.flags&8)!==0}function fM(n){return(n.flags&16)!==0}var Ff={},Xf=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=sl(r);let i=this.injector.get(e,Ff,r);return i!==Ff||t===Ff?i:this.parentInjector.get(e,t,r)}};function ZE(n){return n!==po}function qc(n){return n&32767}function pM(n){return n>>16}function zc(n,e){let t=pM(n),r=e;for(;t>0;)r=r[ma],t--;return r}var ep=!0;function NI(n){let e=ep;return ep=n,e}var gM=256,JE=gM-1,XE=5,mM=0,vn={};function yM(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(sa)&&(r=t[sa]),r==null&&(r=t[sa]=mM++);let i=r&JE,o=1<<i;e.data[n+(i>>XE)]|=o}function eD(n,e){let t=tD(n,e);if(t!==-1)return t;let r=e[fe];r.firstCreatePass&&(n.injectorIndex=e.length,Lf(r.data,n),Lf(e,null),Lf(r.blueprint,null));let i=jp(n,e),o=n.injectorIndex;if(ZE(i)){let s=qc(i),a=zc(i,e),c=a[fe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Lf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function tD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function jp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=sD(i),r===null)return po;if(t++,i=i[ma],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return po}function vM(n,e,t){yM(n,e,t)}function nD(n,e,t){if(t&ue.Optional||n!==void 0)return n;Tp(e,"NodeInjector")}function rD(n,e,t,r){if(t&ue.Optional&&r===void 0&&(r=null),!(t&(ue.Self|ue.Host))){let i=n[yo],o=Gt(void 0);try{return i?i.get(e,r,t&ue.Optional):uE(e,r,t&ue.Optional)}finally{Gt(o)}}return nD(r,e,t)}function iD(n,e,t,r=ue.Default,i){if(n!==null){if(e[ne]&2048&&!(r&ue.Self)){let s=DM(n,e,t,r,vn);if(s!==vn)return s}let o=oD(n,e,t,r,vn);if(o!==vn)return o}return rD(e,t,r,i)}function oD(n,e,t,r,i){let o=IM(t);if(typeof o=="function"){if(!qE(e,n,r))return r&ue.Host?nD(i,t,r):rD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ue.Optional))Tp(t);else return s}finally{KE()}}else if(typeof o=="number"){let s=null,a=tD(n,e),c=po,l=r&ue.Host?e[wn][an]:null;for((a===-1||r&ue.SkipSelf)&&(c=a===-1?jp(n,e):e[a+8],c===po||!kI(r,!1)?a=-1:(s=e[fe],a=qc(c),e=zc(c,e)));a!==-1;){let h=e[fe];if(PI(o,a,h.data)){let p=_M(a,e,t,s,r,l);if(p!==vn)return p}c=e[a+8],c!==po&&kI(r,e[fe].data[a+8]===l)&&PI(o,a,e)?(s=h,a=qc(c),e=zc(c,e)):a=-1}}return i}function _M(n,e,t,r,i,o){let s=e[fe],a=s.data[n+8],c=r==null?ll(a)&&ep:r!=s&&(a.type&3)!==0,l=i&ue.Host&&o===a,h=wM(a,s,t,c,l);return h!==null?fa(e,s,h,a):vn}function wM(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=s[v];if(v<c&&t===b||v>=c&&b.type===t)return v}if(i){let v=s[c];if(v&&ya(v)&&v.type===t)return c}return null}function fa(n,e,t,r){let i=n[t],o=e.data;if(dM(i)){let s=i;s.resolving&&eR(Xx(o[t]));let a=NI(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Gt(s.injectImpl):null,h=qE(n,r,ue.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&cM(t,o[t],e)}finally{l!==null&&Gt(l),NI(a),s.resolving=!1,KE()}}return i}function IM(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(sa)?n[sa]:void 0;return typeof e=="number"?e>=0?e&JE:EM:e}function PI(n,e,t){let r=1<<n;return!!(t[e+(n>>XE)]&r)}function kI(n,e){return!(n&ue.Self)&&!(n&ue.Host&&e)}var si=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return iD(this._tNode,this._lView,e,sl(r),t)}};function EM(){return new si(Dn(),pt())}function Bp(n){return ga(()=>{let e=n.prototype.constructor,t=e[Oc]||tp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Oc]||tp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function tp(n){return tE(n)?()=>{let e=tp(Wt(n));return e&&e()}:go(n)}function DM(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=oD(o,s,t,r|ue.Self,vn);if(a!==vn)return a;let c=o.parent;if(!c){let l=s[TE];if(l){let h=l.get(t,vn,r);if(h!==vn)return h}c=sD(s),s=s[ma]}o=c}return i}function sD(n){let e=n[fe],t=e.type;return t===2?e.declTNode:t===1?n[an]:null}function OI(n,e=null,t=null,r){let i=aD(n,e,t,r);return i.resolveInjectorInitializers(),i}function aD(n,e=null,t=null,r,i=new Set){let o=[t||yn,bR(n)];return r=r||(typeof n=="object"?void 0:Ot(n)),new la(o,e||Mp(),r||null,i)}var Yt=class n{static{this.THROW_IF_NOT_FOUND=ua}static{this.NULL=new Vc}static create(e,t){if(Array.isArray(e))return OI({name:""},t,e,"");{let r=e.name??"";return OI({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=z({token:n,providedIn:"any",factory:()=>O(dE)})}static{this.__NG_ELEMENT_ID__=-1}};var CM=new G("");CM.__NG_ELEMENT_ID__=n=>{let e=Dn();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&ue.Optional)return null;throw new X(204,!1)};var TM="ngOriginalError";function Vf(n){return n[TM]}var uD=!0,Up=(()=>{class n{static{this.__NG_ELEMENT_ID__=bM}static{this.__NG_ENV_ID__=t=>t}}return n})(),np=class extends Up{constructor(e){super(),this._lView=e}onDestroy(e){return FE(this._lView,e),()=>WR(this._lView,e)}};function bM(){return new np(pt())}var So=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new st(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})();var rp=class extends Ue{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,CE()&&(this.destroyRef=V(Up,{optional:!0})??void 0,this.pendingTasks=V(So,{optional:!0})??void 0)}emit(e){let t=De(null);try{super.next(e)}finally{De(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ve&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},It=rp;function Gc(...n){}function cD(n){let e,t;function r(){n=Gc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function FI(n){return queueMicrotask(()=>n()),()=>{n=Gc}}var $p="isAngularZone",Wc=$p+"_ID",SM=0,pe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new It(!1),this.onMicrotaskEmpty=new It(!1),this.onStable=new It(!1),this.onError=new It(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=uD}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,RM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get($p)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,AM,Gc,Gc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},AM={};function Hp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xM(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){cD(()=>{n.callbackScheduled=!1,ip(n),n.isCheckStableRunning=!0,Hp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),ip(n)}function RM(n){let e=()=>{xM(n)},t=SM++;n._inner=n._inner.fork({name:"angular",properties:{[$p]:!0,[Wc]:t,[Wc+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(MM(c))return r.invokeTask(o,s,a,c);try{return LI(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),VI(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return LI(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!NM(c)&&e(),VI(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,ip(n),Hp(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function ip(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function LI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function VI(n){n._nesting--,Hp(n)}var Kc=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new It,this.onMicrotaskEmpty=new It,this.onStable=new It,this.onError=new It}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function MM(n){return lD(n,"__ignore_ng_zone__")}function NM(n){return lD(n,"__scheduler_tick__")}function lD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function PM(n="zone.js",e){return n==="noop"?new Kc:n==="zone.js"?new pe(e):n}var Hn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Vf(e);for(;t&&Vf(t);)t=Vf(t);return t||null}},kM=new G("",{providedIn:"root",factory:()=>{let n=V(pe),e=V(Hn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function OM(){return pl(Dn(),pt())}function pl(n,e){return new gl(En(n,e))}var gl=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=OM}}return n})();function dD(n){return(n.flags&128)===128}var hD=new Map,FM=0;function LM(){return FM++}function VM(n){hD.set(n[cl],n)}function op(n){hD.delete(n[cl])}var jI="__ngContext__";function li(n,e){oi(e)?(n[jI]=e[cl],VM(e)):n[jI]=e}function fD(n){return gD(n[da])}function pD(n){return gD(n[sn])}function gD(n){for(;n!==null&&!Gn(n);)n=n[sn];return n}var sp;function mD(n){sp=n}function jM(){if(sp!==void 0)return sp;if(typeof document<"u")return document;throw new X(210,!1)}var ml=new G("",{providedIn:"root",factory:()=>BM}),BM="ng",qp=new G(""),xt=new G("",{providedIn:"platform",factory:()=>"unknown"});var zp=new G("",{providedIn:"root",factory:()=>jM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var UM="h",$M="b";var HM=()=>null;function Gp(n,e,t=!1){return HM(n,e,t)}var yD=!1,qM=new G("",{providedIn:"root",factory:()=>yD});function vD(n){return n instanceof Function?n():n}function zM(n){return(n??V(Yt)).get(xt)==="browser"}var hi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(hi||{}),GM;function Wp(n,e){return GM(n,e)}function lo(n,e,t,r,i){if(r!=null){let o,s=!1;Gn(r)?o=r:oi(r)&&(s=!0,r=r[zn]);let a=$n(r);n===0&&t!==null?i==null?DD(e,t,a):Qc(e,t,a,i||null,!0):n===1&&t!==null?Qc(e,t,a,i||null,!0):n===2?aN(e,a,s):n===3&&e.destroyNode(a),o!=null&&cN(e,n,o,t,i)}}function WM(n,e){return n.createText(e)}function KM(n,e,t){n.setValue(e,t)}function _D(n,e,t){return n.createElement(e,t)}function QM(n,e){wD(n,e),e[zn]=null,e[an]=null}function YM(n,e,t,r,i,o){r[zn]=i,r[an]=e,yl(n,r,t,1,i,o)}function wD(n,e){e[Un].changeDetectionScheduler?.notify(9),yl(n,e,e[Lt],2,null,null)}function ZM(n){let e=n[da];if(!e)return jf(n[fe],n);for(;e;){let t=null;if(oi(e))t=e[da];else{let r=e[Qt];r&&(t=r)}if(!t){for(;e&&!e[sn]&&e!==n;)oi(e)&&jf(e[fe],e),e=e[Et];e===null&&(e=n),oi(e)&&jf(e[fe],e),t=e&&e[sn]}e=t}}function JM(n,e,t,r){let i=Qt+r,o=t.length;r>0&&(t[i-1][sn]=e),r<o-Qt?(e[sn]=t[i],lE(t,Qt+r,e)):(t.push(e),e[sn]=null),e[Et]=t;let s=e[vo];s!==null&&t!==s&&ID(s,e);let a=e[_o];a!==null&&a.insertView(n),Zf(e),e[ne]|=128}function ID(n,e){let t=n[Uc],r=e[Et];if(oi(r))n[ne]|=$c.HasTransplantedViews;else{let i=r[Et][wn];e[wn]!==i&&(n[ne]|=$c.HasTransplantedViews)}t===null?n[Uc]=[e]:t.push(e)}function Kp(n,e){let t=n[Uc],r=t.indexOf(e);t.splice(r,1)}function ap(n,e){if(n.length<=Qt)return;let t=Qt+e,r=n[t];if(r){let i=r[vo];i!==null&&i!==n&&Kp(i,r),e>0&&(n[t-1][sn]=r[sn]);let o=Lc(n,Qt+e);QM(r[fe],r);let s=o[_o];s!==null&&s.detachView(o[fe]),r[Et]=null,r[sn]=null,r[ne]&=-129}return r}function ED(n,e){if(!(e[ne]&256)){let t=e[Lt];t.destroyNode&&yl(n,e,t,3,null,null),ZM(e)}}function jf(n,e){if(e[ne]&256)return;let t=De(null);try{e[ne]&=-129,e[ne]|=256,e[Kt]&&df(e[Kt]),eN(n,e),XM(n,e),e[fe].type===1&&e[Lt].destroy();let r=e[vo];if(r!==null&&Gn(e[Et])){r!==e[Et]&&Kp(r,e);let i=e[_o];i!==null&&i.detachView(n)}op(e)}finally{De(t)}}function XM(n,e){let t=n.cleanup,r=e[SI];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[SI]=null);let i=e[yr];if(i!==null){e[yr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function eN(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ha)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];mr(4,a,c);try{c.call(a)}finally{mr(5,a,c)}}else{mr(4,i,o);try{o.call(i)}finally{mr(5,i,o)}}}}}function tN(n,e,t){return nN(n,e.parent,t)}function nN(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[zn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===_n.None||o===_n.Emulated)return null}return En(r,t)}}function Qc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function DD(n,e,t){n.appendChild(e,t)}function BI(n,e,t,r,i){r!==null?Qc(n,e,t,r,i):DD(n,e,t)}function CD(n,e){return n.parentNode(e)}function rN(n,e){return n.nextSibling(e)}function iN(n,e,t){return sN(n,e,t)}function oN(n,e,t){return n.type&40?En(n,t):null}var sN=oN,UI;function Qp(n,e,t,r){let i=tN(n,r,e),o=e[Lt],s=r.parent||e[an],a=iN(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)BI(o,i,t[c],a,!1);else BI(o,i,t,a,!1);UI!==void 0&&UI(o,r,e,t,i)}function oa(n,e){if(e!==null){let t=e.type;if(t&3)return En(e,n);if(t&4)return up(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return oa(n,r);{let i=n[e.index];return Gn(i)?up(-1,i):$n(i)}}else{if(t&128)return oa(n,e.next);if(t&32)return Wp(e,n)()||$n(n[e.index]);{let r=TD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ui(n[wn]);return oa(i,r)}else return oa(n,e.next)}}}return null}function TD(n,e){if(e!==null){let r=n[wn][an],i=e.projection;return r.projection[i]}return null}function up(n,e){let t=Qt+n+1;if(t<e.length){let r=e[t],i=r[fe].firstChild;if(i!==null)return oa(r,i)}return e[ai]}function aN(n,e,t){n.removeChild(null,e,t)}function Yp(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&li($n(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Yp(n,e,t.child,r,i,o,!1),lo(e,n,i,a,o);else if(c&32){let l=Wp(t,r),h;for(;h=l();)lo(e,n,i,h,o);lo(e,n,i,a,o)}else c&16?uN(n,e,r,t,i,o):lo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function yl(n,e,t,r,i,o){Yp(t,r,n.firstChild,e,i,o,!1)}function uN(n,e,t,r,i,o){let s=t[wn],c=s[an].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];lo(e,n,i,h,o)}else{let l=c,h=s[Et];dD(r)&&(l.flags|=128),Yp(n,e,l,h,i,o,!0)}}function cN(n,e,t,r,i){let o=t[ai],s=$n(t);o!==s&&lo(e,n,r,o,i);for(let a=Qt;a<t.length;a++){let c=t[a];yl(c[fe],c,n,e,r,o)}}function lN(n,e,t){n.setAttribute(e,"style",t)}function bD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function SD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&qf(n,e,r),i!==null&&bD(n,e,i),o!==null&&lN(n,e,o)}var vl={};function nt(n=1){AD(bo(),pt(),Op()+n,!1)}function AD(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Nc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Pc(e,o,0,t)}ci(t)}function Vt(n,e=ue.Default){let t=pt();if(t===null)return O(n,e);let r=Dn();return iD(r,t,Wt(n),e)}function xD(){let n="invalid";throw new Error(n)}function RD(n,e,t,r,i,o){let s=De(null);try{let a=null;i&vr.SignalBased&&(a=e[r][$w]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&vr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):xE(e,a,r,o)}finally{De(s)}}function dN(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ci(~i);else{let o=i,s=t[++r],a=t[++r];iM(s,o);let c=e[o];a(2,c)}}}finally{ci(-1)}}function _l(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[zn]=i,p[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(p[ne]|=2048),kE(p),p[Et]=p[ma]=n,p[wr]=t,p[Un]=s||n&&n[Un],p[Lt]=a||n&&n[Lt],p[yo]=c||n&&n[yo]||null,p[an]=o,p[cl]=LM(),p[jc]=h,p[TE]=l,p[wn]=e.type==2?n[wn]:p,p}function wl(n,e,t,r,i){let o=n.data[e];if(o===null)o=hN(n,e,t,r,i),rM()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=eM();o.injectorIndex=s===null?-1:s.injectorIndex}return va(o,!0),o}function hN(n,e,t,r,i){let o=jE(),s=BE(),a=s?o:o&&o.parent,c=n.data[e]=yN(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function MD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ND(n,e,t,r,i){let o=Op(),s=r&2;try{ci(-1),s&&e.length>Ir&&AD(n,e,Ir,!1),mr(s?2:0,i),t(r,i)}finally{ci(o),mr(s?3:1,i)}}function PD(n,e,t){if(SE(e)){let r=De(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{De(r)}}}function kD(n,e,t){VE()&&(CN(n,e,t,En(t,e)),(t.flags&64)===64&&jD(n,e,t))}function OD(n,e,t=En){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function FD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Zp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Zp(n,e,t,r,i,o,s,a,c,l,h){let p=Ir+r,m=p+i,v=fN(p,m),b=typeof l=="function"?l():l;return v[fe]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:h}}function fN(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:vl);return t}function pN(n,e,t,r){let o=r.get(qM,yD)||t===_n.ShadowDom,s=n.selectRootElement(e,o);return gN(s),s}function gN(n){mN(n)}var mN=()=>null;function yN(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return ZR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function $I(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=vr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?HI(r,t,l,a,c):HI(r,t,l,a)}return r}function HI(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function vN(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;c=$I(0,p.inputs,h,c,v),l=$I(1,p.outputs,h,l,b);let M=c!==null&&s!==null&&!xp(e)?PN(c,h,s):null;a.push(M)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function _N(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function wN(n,e,t,r,i,o,s,a){let c=En(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Jp(n,t,h,r,i),ll(e)&&IN(t,e.index)):e.type&3?(r=_N(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function IN(n,e){let t=To(e,n);t[ne]&16||(t[ne]|=64)}function LD(n,e,t,r){if(VE()){let i=r===null?null:{"":-1},o=bN(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&VD(n,e,t,s,i,a),i&&SN(t,r,i)}t.mergedAttrs=Ap(t.mergedAttrs,t.attrs)}function VD(n,e,t,r,i,o){for(let l=0;l<r.length;l++)vM(eD(t,e),n,r[l].type);xN(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=MD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Ap(t.mergedAttrs,h.hostAttrs),RN(n,t,e,c,h),AN(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}vN(n,t,o)}function EN(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;DN(s)!=a&&s.push(a),s.push(t,r,o)}}function DN(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function CN(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;ll(t)&&MN(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||eD(t,e),li(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=fa(e,n,a,t);if(li(l,e),s!==null&&NN(e,a-i,l,c,t,s),ya(c)){let h=To(t.index,e);h[wr]=fa(e,n,a,t)}}}function jD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=oM();try{ci(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Jf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&TN(c,l)}}finally{ci(-1),Jf(s)}}function TN(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function bN(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(yR(e,s.selectors,!1))if(r||(r=[]),ya(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;cp(n,e,c)}else r.unshift(s),cp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function cp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function SN(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}}function AN(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ya(e)&&(t[""]=n)}}function xN(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function RN(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=go(i.type,!0)),s=new ha(o,ya(i),Vt);n.blueprint[r]=s,t[r]=s,EN(n,e,r,MD(n,t,i.hostVars,vl),i)}function MN(n,e,t){let r=En(e,n),i=FD(t),o=n[Un].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Il(n,_l(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function NN(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];RD(r,t,c,l,h,p)}}function PN(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function BD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function UD(n,e){let t=n.contentQueries;if(t!==null){let r=De(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];HE(o),a.contentQueries(2,e[s],s)}}}finally{De(r)}}}function Il(n,e){return n[da]?n[AI][sn]=e:n[da]=e,n[AI]=e,e}function lp(n,e,t){HE(0);let r=De(null);try{e(n,t)}finally{De(r)}}function kN(n,e){let t=n[yo],r=t?t.get(Hn,null):null;r&&r.handleError(e)}function Jp(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];RD(h,l,r,a,c,i)}}function ON(n,e,t){let r=zR(e,n);KM(n[Lt],r,t)}function FN(n,e){let t=To(e,n),r=t[fe];LN(r,t);let i=t[zn];i!==null&&t[jc]===null&&(t[jc]=Gp(i,t[yo])),Xp(r,t,t[wr])}function LN(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Xp(n,e,t){Pp(e);try{let r=n.viewQuery;r!==null&&lp(1,r,t);let i=n.template;i!==null&&ND(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[_o]?.finishViewCreation(n),n.staticContentQueries&&UD(n,e),n.staticViewQueries&&lp(2,n.viewQuery,t);let o=n.components;o!==null&&VN(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,kp()}}function VN(n,e){for(let t=0;t<e.length;t++)FN(n,e[t])}function jN(n,e,t,r){let i=De(null);try{let o=e.tView,a=n[ne]&4096?4096:16,c=_l(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[vo]=l;let h=n[_o];return h!==null&&(c[_o]=h.createEmbeddedView(o)),Xp(o,c,t),c}finally{De(i)}}function qI(n,e){return!e||e.firstChild===null||dD(n)}function BN(n,e,t,r=!0){let i=e[fe];if(JM(i,e,n,t),r){let s=up(t,n),a=e[Lt],c=CD(a,n[ai]);c!==null&&YM(i,n[an],a,e,c,s)}let o=e[jc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Yc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push($n(o)),Gn(o)&&UN(o,r);let s=t.type;if(s&8)Yc(n,e,t.child,r);else if(s&32){let a=Wp(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=TD(e,t);if(Array.isArray(a))r.push(...a);else{let c=ui(e[wn]);Yc(c[fe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function UN(n,e){for(let t=Qt;t<n.length;t++){let r=n[t],i=r[fe].firstChild;i!==null&&Yc(r[fe],r,i,e)}n[ai]!==n[zn]&&e.push(n[ai])}var $D=[];function $N(n){return n[Kt]??HN(n)}function HN(n){let e=$D.pop()??Object.create(zN);return e.lView=n,e}function qN(n){n.lView[Kt]!==n&&(n.lView=null,$D.push(n))}var zN=Ae($({},uf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{fl(n.lView)},consumerOnSignalRead(){this.lView[Kt]=this}});function GN(n){let e=n[Kt]??Object.create(WN);return e.lView=n,e}var WN=Ae($({},uf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ui(n.lView);for(;e&&!HD(e[fe]);)e=ui(e);e&&OE(e)},consumerOnSignalRead(){this.lView[Kt]=this}});function HD(n){return n.type!==2}var KN=100;function qD(n,e=!0,t=0){let r=n[Un],i=r.rendererFactory,o=!1;o||i.begin?.();try{QN(n,t)}catch(s){throw e&&kN(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function QN(n,e){let t=UE();try{RI(!0),dp(n,e);let r=0;for(;hl(n);){if(r===KN)throw new X(103,!1);r++,dp(n,1)}}finally{RI(t)}}function YN(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Un].inlineEffectRunner?.flush(),Pp(e);let a=!0,c=null,l=null;o||(HD(n)?(l=$N(e),c=cf(l)):Hw()===null?(a=!1,l=GN(e),c=cf(l)):e[Kt]&&(df(e[Kt]),e[Kt]=null));try{kE(e),nM(n.bindingStartIndex),t!==null&&ND(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&Nc(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Pc(e,v,0,null),Of(e,0)}if(s||ZN(e),zD(e,0),n.contentQueries!==null&&UD(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&Nc(e,v)}else{let v=n.contentHooks;v!==null&&Pc(e,v,1),Of(e,1)}dN(n,e);let p=n.components;p!==null&&WD(e,p,0);let m=n.viewQuery;if(m!==null&&lp(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&Nc(e,v)}else{let v=n.viewHooks;v!==null&&Pc(e,v,2),Of(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[kf]){for(let v of e[kf])v();e[kf]=null}o||(e[ne]&=-73)}catch(h){throw o||fl(e),h}finally{l!==null&&(qw(l,c),a&&qN(l)),kp()}}function zD(n,e){for(let t=fD(n);t!==null;t=pD(t))for(let r=Qt;r<t.length;r++){let i=t[r];GD(i,e)}}function ZN(n){for(let e=fD(n);e!==null;e=pD(e)){if(!(e[ne]&$c.HasTransplantedViews))continue;let t=e[Uc];for(let r=0;r<t.length;r++){let i=t[r];OE(i)}}}function JN(n,e,t){let r=To(e,n);GD(r,t)}function GD(n,e){Np(n)&&dp(n,e)}function dp(n,e){let r=n[fe],i=n[ne],o=n[Kt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&lf(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)YN(r,n,r.template,n[wr]);else if(i&8192){zD(n,1);let a=r.components;a!==null&&WD(n,a,1)}}function WD(n,e,t){for(let r=0;r<e.length;r++)JN(n,e[r],t)}function KD(n,e){let t=UE()?64:1088;for(n[Un].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=ui(n);if(Qf(n)&&!r)return n;n=r}return null}var di=class{get rootNodes(){let e=this._lView,t=e[fe];return Yc(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[wr]}set context(e){this._lView[wr]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Et];if(Gn(e)){let t=e[Bc],r=t?t.indexOf(this):-1;r>-1&&(ap(e,r),Lc(t,r))}this._attachedToViewContainer=!1}ED(this._lView[fe],this._lView)}onDestroy(e){FE(this._lView,e)}markForCheck(){KD(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Zf(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,qD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Qf(this._lView),t=this._lView[vo];t!==null&&!e&&Kp(t,this._lView),wD(this._lView[fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=Qf(this._lView),r=this._lView[vo];r!==null&&!t&&ID(r,this._lView),Zf(this._lView)}},eg=(()=>{class n{static{this.__NG_ELEMENT_ID__=tP}}return n})(),XN=eg,eP=class extends XN{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=jN(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new di(i)}};function tP(){return nP(Dn(),pt())}function nP(n,e){return n.type&4?new eP(e,n,pl(n,e)):null}var Zq=new RegExp(`^(\\d+)*(${$M}|${UM})*(.*)`);var rP=()=>null;function zI(n,e){return rP(n,e)}var wo=class{},tg=new G("",{providedIn:"root",factory:()=>!1});var QD=new G(""),YD=new G(""),hp=class{},Zc=class{};function iP(n){let e=Error(`No component factory found for ${Ot(n)}.`);return e[oP]=n,e}var oP="ngComponent";var fp=class{resolveComponentFactory(e){throw iP(e)}},Io=class{static{this.NULL=new fp}},Eo=class{};var sP=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>null})}}return n})();function pp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=yI(i,a);else if(o==2){let c=a,l=e[++s];r=yI(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Jc=class extends Io{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=_r(e);return new Do(t,this.ngModule)}};function GI(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:vr.None;e?t.push({propName:s,templateName:r,isSignal:(a&vr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function aP(n){let e=n.toLowerCase();return e==="svg"?HR:e==="math"?qR:null}var Do=class extends Zc{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=GI(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return GI(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=IR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=De(null);try{i=i||this.ngModule;let s=i instanceof Ft?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Xf(e,s):e,c=a.get(Eo,null);if(c===null)throw new X(407,!1);let l=a.get(sP,null),h=a.get(wo,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?pN(m,r,this.componentDef.encapsulation,a):_D(m,v,aP(v)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let N=null;b!==null&&(N=Gp(b,a,!0));let j=Zp(0,null,null,1,0,null,null,null,null,null,null),H=_l(null,j,null,M,null,null,p,m,a,null,N);Pp(H);let F,Y,ee=null;try{let Z=this.componentDef,I,y=null;Z.findHostDirectiveDefs?(I=[],y=new Map,Z.findHostDirectiveDefs(Z,I,y),I.push(Z)):I=[Z];let w=uP(H,b);ee=cP(w,b,Z,I,H,p,m),Y=PE(j,Ir),b&&hP(m,Z,b,r),t!==void 0&&fP(Y,this.ngContentSelectors,t),F=dP(ee,Z,I,y,H,[pP]),Xp(j,H,null)}catch(Z){throw ee!==null&&op(ee),op(H),Z}finally{kp()}return new gp(this.componentType,F,pl(Y,H),H,Y)}finally{De(o)}}},gp=class extends hp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new di(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Jp(o[fe],o,i,e,t),this.previousInputValues.set(e,t);let s=To(this._tNode.index,o);KD(s,1)}}get injector(){return new si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function uP(n,e){let t=n[fe],r=Ir;return n[r]=e,wl(t,r,2,"#host",null)}function cP(n,e,t,r,i,o,s){let a=i[fe];lP(r,n,e,s);let c=null;e!==null&&(c=Gp(e,i[yo]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=_l(i,FD(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&cp(a,n,r.length-1),Il(i,p),i[n.index]=p}function lP(n,e,t,r){for(let i of n)e.mergedAttrs=Ap(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(pp(e,e.mergedAttrs,!0),t!==null&&SD(r,t,e))}function dP(n,e,t,r,i,o){let s=Dn(),a=i[fe],c=En(s,i);VD(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=fa(i,a,p,s);li(m,i)}jD(a,i,s),c&&li(c,i);let l=fa(i,a,s.directiveStart+s.componentOffset,s);if(n[wr]=i[wr]=l,o!==null)for(let h of o)h(l,e);return PD(a,s,i),l}function hP(n,e,t,r){if(r)qf(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=ER(e.selectors[0]);i&&qf(n,t,i),o&&o.length>0&&bD(n,t,o.join(" "))}}function fP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function pP(){let n=Dn();Vp(pt()[fe],n)}var _a=(()=>{class n{static{this.__NG_ELEMENT_ID__=gP}}return n})();function gP(){let n=Dn();return yP(n,pt())}var mP=_a,ZD=class extends mP{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return pl(this._hostTNode,this._hostLView)}get injector(){return new si(this._hostTNode,this._hostLView)}get parentInjector(){let e=jp(this._hostTNode,this._hostLView);if(ZE(e)){let t=zc(e,this._hostLView),r=qc(e),i=t[fe].data[r+8];return new si(i,t)}else return new si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=WI(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Qt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=zI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,qI(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!jR(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let c=s?e:new Do(_r(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let M=(s?l:this.parentInjector).get(Ft,null);M&&(o=M)}let h=_r(c.componentType??{}),p=zI(this._lContainer,h?.id??null),m=p?.firstChild??null,v=c.create(l,i,m,o);return this.insertImpl(v.hostView,a,qI(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(GR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Et],l=new ZD(c,c[an],c[Et]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return BN(s,i,o,r),e.attachToViewContainerRef(),lE(Bf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=WI(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ap(this._lContainer,t);r&&(Lc(Bf(this._lContainer),t),ED(r[fe],r))}detach(e){let t=this._adjustIndex(e,-1),r=ap(this._lContainer,t);return r&&Lc(Bf(this._lContainer),t)!=null?new di(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function WI(n){return n[Bc]}function Bf(n){return n[Bc]||(n[Bc]=[])}function yP(n,e){let t,r=e[n.index];return Gn(r)?t=r:(t=BD(r,e,null,n),e[n.index]=t,Il(e,t)),_P(t,e,n,r),new ZD(t,n,e)}function vP(n,e){let t=n[Lt],r=t.createComment(""),i=En(e,n),o=CD(t,i);return Qc(t,o,r,rN(t,i),!1),r}var _P=EP,wP=()=>!1;function IP(n,e,t){return wP(n,e,t)}function EP(n,e,t,r){if(n[ai])return;let i;t.type&8?i=$n(r):i=vP(e,t),n[ai]=i}var KI=new Set;function ng(n){KI.has(n)||(KI.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function DP(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(SP))}return o}return Xc.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(v=>{a[l+m]=v,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>AP(o));e.push(c)}),TP(),Promise.all(e).then(()=>{})}var Xc=new Map,CP=new Set;function TP(){let n=Xc;return Xc=new Map,n}function bP(){return Xc.size===0}function SP(n){return typeof n=="string"?n:n.text()}function AP(n){CP.delete(n)}var Er=class{},pa=class{};var el=class extends Er{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jc(this);let o=vE(e);this._bootstrapComponents=vD(o.bootstrap),this._r3Injector=aD(e,t,[{provide:Er,useValue:this},{provide:Io,useValue:this.componentFactoryResolver},...r],Ot(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},tl=class extends pa{constructor(e){super(),this.moduleType=e}create(e){return new el(this.moduleType,e,[])}};function xP(n,e,t){return new el(n,e,t,!1)}var mp=class extends Er{constructor(e){super(),this.componentFactoryResolver=new Jc(this),this.instance=null;let t=new la([...e.providers,{provide:Er,useValue:this},{provide:Io,useValue:this.componentFactoryResolver}],e.parent||Mp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function El(n,e,t=null){return new mp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function JD(n){return MP(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function RP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function MP(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function XD(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function NP(n){return(n.flags&32)===32}function PP(n,e,t,r,i,o,s,a,c){let l=e.consts,h=wl(e,n,4,s||null,a||null);LD(e,t,h,Hc(l,c)),Vp(e,h);let p=h.tView=Zp(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function kP(n,e,t,r,i,o,s,a,c,l){let h=t+Ir,p=e.firstCreatePass?PP(h,e,n,r,i,o,s,a,c):e.data[h];va(p,!1);let m=OP(e,n,p,t);Fp()&&Qp(e,n,m,p),li(m,n);let v=BD(m,n,m,p);return n[h]=v,Il(n,v),IP(v,p,n),AE(p)&&kD(e,n,p),c!=null&&OD(n,p,l),p}function wa(n,e,t,r,i,o,s,a){let c=pt(),l=bo(),h=Hc(l.consts,o);return kP(c,l,n,e,t,r,i,h,s,a),wa}var OP=FP;function FP(n,e,t,r){return Lp(!0),e[Lt].createComment("")}var ho=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ho||{}),eC=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})(),yp=class n{constructor(){this.ngZone=V(pe),this.scheduler=V(wo),this.errorHandler=V(Hn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ho.EarlyRead,ho.Write,ho.MixedReadWrite,ho.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}},vp=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function rg(n,e){!e?.injector&&LR(rg);let t=e?.injector??V(Yt);return zM(t)?(ng("NgAfterNextRender"),VP(n,t,e,!0)):jP}function LP(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function VP(n,e,t,r){let i=e.get(eC);i.impl??=e.get(yp);let o=t?.phase??ho.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Up):null,a=new vp(i.impl,LP(n,o),r,s);return i.impl.register(a),a}var jP={destroy(){}};function BP(n,e,t,r){return XD(n,$E(),t)?e+sE(t)+r:vl}function Ia(n,e,t){let r=pt(),i=$E();if(XD(r,i,e)){let o=bo(),s=aM();wN(o,s,r,n,e,r[Lt],t,!1)}return Ia}function QI(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Jp(n,t,o[s],s,r)}function UP(n,e,t,r,i,o){let s=e.consts,a=Hc(s,i),c=wl(e,n,2,r,a);return LD(e,t,c,Hc(s,o)),c.attrs!==null&&pp(c,c.attrs,!1),c.mergedAttrs!==null&&pp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function le(n,e,t,r){let i=pt(),o=bo(),s=Ir+n,a=i[Lt],c=o.firstCreatePass?UP(s,o,i,e,t,r):o.data[s],l=$P(o,i,c,a,e,n);i[s]=l;let h=AE(c);return va(c,!0),SD(a,l,c),!NP(c)&&Fp()&&Qp(o,i,l,c),KR()===0&&li(l,i),QR(),h&&(kD(o,i,c),PD(o,c,i)),r!==null&&OD(i,c),le}function ae(){let n=Dn();BE()?tM():(n=n.parent,va(n,!1));let e=n;JR(e)&&XR(),YR();let t=bo();return t.firstCreatePass&&(Vp(t,n),SE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&hM(e)&&QI(t,e,pt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&fM(e)&&QI(t,e,pt(),e.stylesWithoutHost,!1),ae}function jt(n,e,t,r){return le(n,e,t,r),ae(),jt}var $P=(n,e,t,r,i,o)=>(Lp(!0),_D(r,i,uM()));var nl="en-US";var HP=nl;function qP(n){typeof n=="string"&&(HP=n.toLowerCase().replace(/_/g,"-"))}function Ie(n,e=""){let t=pt(),r=bo(),i=n+Ir,o=r.firstCreatePass?wl(r,i,1,e,null):r.data[i],s=zP(r,t,o,e,n);t[i]=s,Fp()&&Qp(r,t,s,o),va(o,!1)}var zP=(n,e,t,r,i)=>(Lp(!0),WM(e[Lt],r));function Dl(n){return rt("",n,""),Dl}function rt(n,e,t){let r=pt(),i=BP(r,n,e,t);return i!==vl&&ON(r,Op(),i),rt}var GP=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=IE(!1,t.type),i=r.length>0?El([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=z({token:n,providedIn:"environment",factory:()=>new n(O(Ft))})}}return n})();function tC(n){ng("NgStandalone"),n.getStandaloneInjector=e=>e.get(GP).getOrCreateStandaloneInjector(n)}var xc=null;function WP(n){xc!==null&&(n.defaultEncapsulation!==xc.defaultEncapsulation||n.preserveWhitespaces!==xc.preserveWhitespaces)||(xc=n)}var Dr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},nC=new Dr("18.2.13");var Cl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var ig=new G(""),Ea=new G(""),Tl=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,og||(KP(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(pe),O(bl),O(Ea))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),bl=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return og?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function KP(n){og=n}var og;function Da(n){return!!n&&typeof n.then=="function"}function rC(n){return!!n&&typeof n.subscribe=="function"}var Sl=new G(""),iC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=V(Sl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Da(o))t.push(o);else if(rC(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sg=new G("");function QP(){zw(()=>{throw new X(600,!1)})}function YP(n){return n.isBoundToModule}var ZP=10;function JP(n,e,t){try{let r=t();return Da(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function oC(n,e){return Array.isArray(e)?e.reduce(oC,n):$($({},n),e)}var Cr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(kM),this.afterRenderManager=V(eC),this.zonelessEnabled=V(tg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ue,this.afterTick=new Ue,this.componentTypes=[],this.components=[],this.isStable=V(So).hasPendingTasks.pipe(K(t=>!t)),this._injector=V(Ft)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Zc;if(!this._injector.get(iC).done){let m=!i&&yE(t),v=!1;throw new X(405,v)}let s;i?s=t:s=this._injector.get(Io).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=YP(s)?void 0:this._injector.get(Er),c=r||s.selector,l=s.create(Yt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(ig,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),kc(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=De(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,De(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Eo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<ZP;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)XP(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>hl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;kc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(sg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>kc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function XP(n,e,t,r){if(!t&&!hl(n))return;qD(n,e,t&&!r?0:1)}var _p=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Al=(()=>{class n{compileModuleSync(t){return new tl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=vE(t),o=vD(i.declarations).reduce((s,a)=>{let c=_r(a);return c&&s.push(new Do(c)),s},[]);return new _p(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ek=new G("");function tk(n,e,t){let r=new tl(t);return Promise.resolve(r)}function YI(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var nk=(()=>{class n{constructor(){this.zone=V(pe),this.changeDetectionScheduler=V(wo),this.applicationRef=V(Cr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function rk({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new pe(Ae($({},sC()),{scheduleInRootZone:t})),[{provide:pe,useFactory:n},{provide:mo,multi:!0,useFactory:()=>{let r=V(nk,{optional:!0});return()=>r.initialize()}},{provide:mo,multi:!0,useFactory:()=>{let r=V(ik);return()=>{r.initialize()}}},e===!0?{provide:QD,useValue:!0}:[],{provide:YD,useValue:t??uD}]}function sC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var ik=(()=>{class n{constructor(){this.subscription=new Ve,this.initialized=!1,this.zone=V(pe),this.pendingTasks=V(So)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ok=(()=>{class n{constructor(){this.appRef=V(Cr),this.taskService=V(So),this.ngZone=V(pe),this.zonelessEnabled=V(tg),this.disableScheduling=V(QD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ve,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Wc):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(YD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Kc||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?FI:cD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Wc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,FI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sk(){return typeof $localize<"u"&&$localize.locale||nl}var ag=new G("",{providedIn:"root",factory:()=>V(ag,ue.Optional|ue.SkipSelf)||sk()});var rl=new G("");function Rc(n){return!n.moduleRef}function ak(n){let e=Rc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(pe);return t.run(()=>{Rc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Hn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Rc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(rl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(rl);s.add(o),n.moduleRef.onDestroy(()=>{kc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return JP(r,t,()=>{let o=e.get(iC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(ag,nl);if(qP(s||nl),Rc(n)){let a=e.get(Cr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return uk(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function uk(n,e){let t=n.injector.get(Cr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var aC=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>PM(r?.ngZone,Ae($({},sC({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[rk({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:wo,useExisting:ok}],c=xP(t.moduleType,this.injector,a);return ak({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=oC({},r);return tk(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(rl,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(Yt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),aa=null,uC=new G("");function ck(n){if(aa&&!aa.get(uC,!1))throw new X(400,!1);QP(),aa=n;let e=n.get(aC);return hk(n),e}function ug(n,e,t=[]){let r=`Platform: ${e}`,i=new G(r);return(o=[])=>{let s=cC();if(!s||s.injector.get(uC,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):ck(lk(a,r))}return dk(i)}}function lk(n=[],e){return Yt.create({name:e,providers:[{provide:ul,useValue:"platform"},{provide:rl,useValue:new Set([()=>aa=null])},...n]})}function dk(n){let e=cC();if(!e)throw new X(401,!1);return e}function cC(){return aa?.get(aC)??null}function hk(n){n.get(qp,null)?.forEach(t=>t())}function cg(){return!1}var Ca=(()=>{class n{static{this.__NG_ELEMENT_ID__=fk}}return n})();function fk(n){return pk(Dn(),pt(),(n&16)===16)}function pk(n,e,t){if(ll(n)&&!t){let r=To(n.index,e);return new di(r,r)}else if(n.type&175){let r=e[wn];return new di(r,e)}return null}var wp=class{constructor(){}supports(e){return JD(e)}create(e){return new Ip(e)}},gk=(n,e)=>e,Ip=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||gk}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<ZI(r,i,o)?t:r,a=ZI(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,b=v+m;h<=b&&b<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!JD(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,RP(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Ep(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new il),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new il),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ep=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Dp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},il=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Dp,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ZI(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function JI(){return new lg([new wp])}var lg=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:JI})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||JI()),deps:[[n,new bp,new Co]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new X(901,!1)}}return n})();var lC=ug(null,"core",[]),dC=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(Cr))}}static{this.\u0275mod=Ct({type:n})}static{this.\u0275inj=Dt({})}}return n})();function hC(n){let e=_r(n);if(!e)return null;let t=new Do(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var yC=null;function fi(){return yC}function vC(n){yC??=n}var xl=class{};var Rt=new G(""),pg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>V(wk),providedIn:"platform"})}}return n})(),_C=new G(""),wk=(()=>{class n extends pg{constructor(){super(),this._doc=V(Rt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fi().getBaseHref(this._doc)}onPopState(t){let r=fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function gg(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function fC(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Wn(n){return n&&n[0]!=="?"?"?"+n:n}var pi=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>V(mg),providedIn:"root"})}}return n})(),wC=new G(""),mg=(()=>{class n extends pi{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(Rt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return gg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Wn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Wn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Wn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(pg),O(wC,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),IC=(()=>{class n extends pi{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=gg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Wn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Wn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(pg),O(wC,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Ao=(()=>{class n{constructor(t){this._subject=new It,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Dk(fC(pC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Wn(r))}normalize(t){return n.stripTrailingSlash(Ek(this._basePath,pC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Wn}static{this.joinWithSlash=gg}static{this.stripTrailingSlash=fC}static{this.\u0275fac=function(r){return new(r||n)(O(pi))}}static{this.\u0275prov=z({token:n,factory:()=>Ik(),providedIn:"root"})}}return n})();function Ik(){return new Ao(O(pi))}function Ek(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function pC(n){return n.replace(/\/index.html$/,"")}function Dk(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function EC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var dg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ml=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new dg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),gC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);gC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Vt(_a),Vt(eg),Vt(lg))}}static{this.\u0275dir=al({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function gC(n,e){n.context.$implicit=e.item}var DC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ct({type:n})}static{this.\u0275inj=Dt({})}}return n})(),yg="browser",Ck="server";function Tk(n){return n===yg}function gi(n){return n===Ck}var CC=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>Tk(V(xt))?new hg(V(Rt),window):new fg})}}return n})(),hg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=bk(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function bk(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var fg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Rl=class{};var wg=class extends xl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ig=class n extends wg{static makeCurrent(){vC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Ak();return t==null?null:xk(t)}resetBaseElement(){Ta=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return EC(document.cookie,e)}},Ta=null;function Ak(){return Ta=Ta||document.querySelector("base"),Ta?Ta.getAttribute("href"):null}function xk(n){return new URL(n,document.baseURI).pathname}var Eg=class{addToWindow(e){qn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new X(5103,!1);return o},qn.getAllAngularTestabilities=()=>e.getAllTestabilities(),qn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=qn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};qn.frameworkStabilizers||(qn.frameworkStabilizers=[]),qn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?fi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},Rk=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Dg=new G(""),xC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(Dg),O(pe))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Nl=class{constructor(e){this._doc=e}},vg="ng-app-id",RC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gi(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${vg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(vg),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(vg,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(Rt),O(ml),O(zp,8),O(xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),_g={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Tg=/%COMP%/g,MC="%COMP%",Mk=`_nghost-${MC}`,Nk=`_ngcontent-${MC}`,Pk=!0,kk=new G("",{providedIn:"root",factory:()=>Pk});function Ok(n){return Nk.replace(Tg,n)}function Fk(n){return Mk.replace(Tg,n)}function NC(n,e){return e.map(t=>t.replace(Tg,n))}var bC=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=gi(a),this.defaultRenderer=new ba(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===_n.ShadowDom&&(r=Ae($({},r),{encapsulation:_n.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Pl?i.applyToHost(t):i instanceof Sa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case _n.Emulated:o=new Pl(c,l,r,this.appId,h,s,a,p);break;case _n.ShadowDom:return new Cg(c,l,t,r,s,a,this.nonce,p);default:o=new Sa(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(xC),O(RC),O(ml),O(kk),O(Rt),O(xt),O(pe),O(zp))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),ba=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(_g[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(SC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(SC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=_g[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=_g[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(hi.DashCase|hi.Important)?e.style.setProperty(t,r,i&hi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&hi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=fi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function SC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Cg=class extends ba{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=NC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Sa=class extends ba{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?NC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Pl=class extends Sa{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=Ok(l),this.hostAttr=Fk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Lk=(()=>{class n extends Nl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(Rt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),AC=["alt","control","meta","shift"],Vk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Bk=(()=>{class n extends Nl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),AC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=Vk[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),AC.forEach(s=>{if(s!==i){let a=jk[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(Rt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function Uk(){Ig.makeCurrent()}function $k(){return new Hn}function Hk(){return mD(document),document}var qk=[{provide:xt,useValue:yg},{provide:qp,useValue:Uk,multi:!0},{provide:Rt,useFactory:Hk,deps:[]}],PC=ug(lC,"browser",qk),zk=new G(""),Gk=[{provide:Ea,useClass:Eg,deps:[]},{provide:ig,useClass:Tl,deps:[pe,bl,Ea]},{provide:Tl,useClass:Tl,deps:[pe,bl,Ea]}],Wk=[{provide:ul,useValue:"root"},{provide:Hn,useFactory:$k,deps:[]},{provide:Dg,useClass:Lk,multi:!0,deps:[Rt,pe,xt]},{provide:Dg,useClass:Bk,multi:!0,deps:[Rt]},bC,RC,xC,{provide:Eo,useExisting:bC},{provide:Rl,useClass:Rk,deps:[]},[]],kC=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ml,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(zk,12))}}static{this.\u0275mod=Ct({type:n})}static{this.\u0275inj=Dt({providers:[...Wk,...Gk],imports:[DC,dC]})}}return n})();var OC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(Rt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",$a=Symbol("RouteTitle"),Rg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ko(n){return new Rg(n)}function Kk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Qk(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Cn(n[t],e[t]))return!1;return!0}function Cn(n,e){let t=n?Mg(n):void 0,r=e?Mg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!WC(n[i],e[i]))return!1;return!0}function Mg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function WC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function KC(n){return n.length>0?n[n.length-1]:null}function br(n){return bf(n)?n:Da(n)?_e(Promise.resolve(n)):J(n)}var Yk={exact:YC,subset:ZC},QC={exact:Zk,subset:Jk,ignored:()=>!0};function LC(n,e,t){return Yk[t.paths](n.root,e.root,t.matrixParams)&&QC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Zk(n,e){return Cn(n,e)}function YC(n,e,t){if(!yi(n.segments,e.segments)||!Fl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!YC(n.children[r],e.children[r],t))return!1;return!0}function Jk(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>WC(n[t],e[t]))}function ZC(n,e,t){return JC(n,e,e.segments,t)}function JC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!yi(i,t)||e.hasChildren()||!Fl(i,t,r))}else if(n.segments.length===t.length){if(!yi(n.segments,t)||!Fl(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!ZC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!yi(n.segments,i)||!Fl(n.segments,i,r)||!n.children[oe]?!1:JC(n.children[oe],e,o,r)}}function Fl(n,e,t){return e.every((r,i)=>QC[t](n[i].parameters,r.parameters))}var Qn=class{constructor(e=new Ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ko(this.queryParams),this._queryParamMap}toString(){return t1.serialize(this)}},Ee=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ll(this)}},mi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ko(this.parameters),this._parameterMap}toString(){return eT(this)}};function Xk(n,e){return yi(n,e)&&n.every((t,r)=>Cn(t.parameters,e[r].parameters))}function yi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function e1(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var Ha=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new Oo,providedIn:"root"})}}return n})(),Oo=class{parse(e){let t=new Pg(e);return new Qn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Aa(e.root,!0)}`,r=i1(e.queryParams),i=typeof e.fragment=="string"?`#${n1(e.fragment)}`:"";return`${t}${r}${i}`}},t1=new Oo;function Ll(n){return n.segments.map(e=>eT(e)).join("/")}function Aa(n,e){if(!n.hasChildren())return Ll(n);if(e){let t=n.children[oe]?Aa(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${Aa(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=e1(n,(r,i)=>i===oe?[Aa(n.children[oe],!1)]:[`${i}:${Aa(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${Ll(n)}/${t[0]}`:`${Ll(n)}/(${t.join("//")})`}}function XC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kl(n){return XC(n).replace(/%3B/gi,";")}function n1(n){return encodeURI(n)}function Ng(n){return XC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vl(n){return decodeURIComponent(n)}function VC(n){return Vl(n.replace(/\+/g,"%20"))}function eT(n){return`${Ng(n.path)}${r1(n.parameters)}`}function r1(n){return Object.entries(n).map(([e,t])=>`;${Ng(e)}=${Ng(t)}`).join("")}function i1(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${kl(t)}=${kl(i)}`).join("&"):`${kl(t)}=${kl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var o1=/^[^\/()?;#]+/;function bg(n){let e=n.match(o1);return e?e[0]:""}var s1=/^[^\/()?;=#]+/;function a1(n){let e=n.match(s1);return e?e[0]:""}var u1=/^[^=?&#]+/;function c1(n){let e=n.match(u1);return e?e[0]:""}var l1=/^[^&#]+/;function d1(n){let e=n.match(l1);return e?e[0]:""}var Pg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new Ee(e,t)),r}parseSegment(){let e=bg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new mi(Vl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=a1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=bg(this.remaining);i&&(r=i,this.capture(r))}e[Vl(t)]=Vl(r)}parseQueryParam(e){let t=c1(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=d1(this.remaining);s&&(r=s,this.capture(r))}let i=VC(t),o=VC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=bg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new Ee([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function tT(n){return n.segments.length>0?new Ee([],{[oe]:n}):n}function nT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=nT(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ee(n.segments,e);return h1(t)}function h1(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new Ee(n.segments.concat(e.segments),e.children)}return n}function ka(n){return n instanceof Qn}function f1(n,e,t=null,r=null){let i=rT(n);return iT(i,e,t,r)}function rT(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new Ee(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=tT(r);return e??i}function iT(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Sg(i,i,i,t,r);let o=p1(e);if(o.toRoot())return Sg(i,i,new Ee([],{}),t,r);let s=g1(o,i,n),a=s.processChildren?Ma(s.segmentGroup,s.index,o.commands):sT(s.segmentGroup,s.index,o.commands);return Sg(i,s.segmentGroup,a,t,r)}function jl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Oa(n){return typeof n=="object"&&n!=null&&n.outlets}function Sg(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=oT(n,e,t);let a=tT(nT(s));return new Qn(a,o,i)}function oT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=oT(o,e,t)}),new Ee(n.segments,r)}var Bl=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&jl(r[0]))throw new X(4003,!1);let i=r.find(Oa);if(i&&i!==KC(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function p1(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Bl(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Bl(t,e,r)}var Mo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function g1(n,e,t){if(n.isAbsolute)return new Mo(e,!0,0);if(!t)return new Mo(e,!1,NaN);if(t.parent===null)return new Mo(t,!0,0);let r=jl(n.commands[0])?0:1,i=t.segments.length-1+r;return m1(t,i,n.numberOfDoubleDots)}function m1(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new Mo(r,!1,i-o)}function y1(n){return Oa(n[0])?n[0].outlets:{[oe]:n}}function sT(n,e,t){if(n??=new Ee([],{}),n.segments.length===0&&n.hasChildren())return Ma(n,e,t);let r=v1(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ee(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new Ee(n.segments.slice(r.pathIndex),n.children),Ma(o,0,i)}else return r.match&&i.length===0?new Ee(n.segments,{}):r.match&&!n.hasChildren()?kg(n,e,t):r.match?Ma(n,0,i):kg(n,e,t)}function Ma(n,e,t){if(t.length===0)return new Ee(n.segments,{});{let r=y1(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=Ma(n.children[oe],e,t);return new Ee(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=sT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ee(n.segments,i)}}function v1(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Oa(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!BC(c,l,s))return o;r+=2}else{if(!BC(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function kg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Oa(o)){let c=_1(o.outlets);return new Ee(r,c)}if(i===0&&jl(t[0])){let c=n.segments[e];r.push(new mi(c.path,jC(t[0]))),i++;continue}let s=Oa(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&jl(a)?(r.push(new mi(s,jC(a))),i+=2):(r.push(new mi(s,{})),i++)}return new Ee(r,{})}function _1(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=kg(new Ee([],{}),0,r))}),e}function jC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function BC(n,e,t){return n==t.path&&Cn(e,t.parameters)}var Na="imperative",it=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(it||{}),Zt=class{constructor(e,t){this.id=e,this.url=t}},Fo=class extends Zt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=it.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Yn=class extends Zt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=it.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ut=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ut||{}),Ul=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ul||{}),Kn=class extends Zt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=it.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tr=class extends Zt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=it.NavigationSkipped}},Fa=class extends Zt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=it.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$l=class extends Zt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Og=class extends Zt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fg=class extends Zt{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=it.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Lg=class extends Zt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vg=class extends Zt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=it.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jg=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Bg=class{constructor(e){this.route=e,this.type=it.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ug=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$g=class{constructor(e){this.snapshot=e,this.type=it.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hg=class{constructor(e){this.snapshot=e,this.type=it.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qg=class{constructor(e){this.snapshot=e,this.type=it.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hl=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=it.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},La=class{},Lo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function w1(n,e){return n.providers&&!n._injector&&(n._injector=El(n.providers,e,`Route: ${n.path}`)),n._injector??e}function un(n){return n.outlet||oe}function I1(n,e){let t=n.filter(r=>un(r)===e);return t.push(...n.filter(r=>un(r)!==e)),t}function qa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var zg=class{get injector(){return qa(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new za(this.rootInjector),this.attachRef=null}},za=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new zg(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ql=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Gg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Gg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Wg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wg(e,this._root).map(t=>t.value)}};function Gg(n,e){if(n===e.value)return e;for(let t of e.children){let r=Gg(n,t);if(r)return r}return null}function Wg(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Wg(n,t);if(r.length)return r.unshift(e),r}return[]}var Bt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ro(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var zl=class extends ql{constructor(e,t){super(e),this.snapshot=t,nm(this,e)}toString(){return this.snapshot.toString()}};function aT(n){let e=E1(n),t=new st([new mi("",{})]),r=new st({}),i=new st({}),o=new st({}),s=new st(""),a=new Vo(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new zl(new Bt(a,[]),e)}function E1(n){let e={},t={},r={},i="",o=new No([],e,r,i,t,oe,n,null,{});return new Wl("",new Bt(o,[]))}var Vo=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(K(l=>l[$a]))??J(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(e=>ko(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(e=>ko(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Gl(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:$($({},e.params),n.params),data:$($({},e.data),n.data),resolve:$($($($({},n.data),e.data),i?.data),n._resolvedData)}:r={params:$({},n.params),data:$({},n.data),resolve:$($({},n.data),n._resolvedData??{})},i&&cT(i)&&(r.resolve[$a]=i.title),r}var No=class{get title(){return this.data?.[$a]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ko(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ko(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Wl=class extends ql{constructor(e,t){super(t),this.url=e,nm(this,t)}toString(){return uT(this._root)}};function nm(n,e){e.value._routerState=n,e.children.forEach(t=>nm(n,t))}function uT(n){let e=n.children.length>0?` { ${n.children.map(uT).join(", ")} } `:"";return`${n.value}${e}`}function Ag(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Cn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Cn(e.params,t.params)||n.paramsSubject.next(t.params),Qk(e.url,t.url)||n.urlSubject.next(t.url),Cn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Kg(n,e){let t=Cn(n.params,e.params)&&Xk(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Kg(n.parent,e.parent))}function cT(n){return typeof n.title=="string"||n.title===null}var D1=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new It,this.deactivateEvents=new It,this.attachEvents=new It,this.detachEvents=new It,this.parentContexts=V(za),this.location=V(_a),this.changeDetector=V(Ca),this.inputBinder=V(Jl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Qg(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=al({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[dl]})}}return n})(),Qg=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Vo?this.route:e===za?this.childContexts:this.parent.get(e,t)}},Jl=new G(""),UC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=na([r.queryParams,r.params,r.data]).pipe(je(([o,s,a],c)=>(a=$($($({},o),s),a),c===0?J(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=hC(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function C1(n,e,t){let r=Va(n,e._root,t?t._root:void 0);return new zl(r,e)}function Va(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=T1(n,e,t);return new Bt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Va(n,a)),s}}let r=b1(e.value),i=e.children.map(o=>Va(n,o));return new Bt(r,i)}}function T1(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Va(n,r,i);return Va(n,r)})}function b1(n){return new Vo(new st(n.url),new st(n.params),new st(n.queryParams),new st(n.fragment),new st(n.data),n.outlet,n.component,n)}var ja=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},lT="ngNavigationCancelingError";function Kl(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ka(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=dT(!1,Ut.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function dT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[lT]=!0,t.cancellationCode=e,t}function S1(n){return hT(n)&&ka(n.url)}function hT(n){return!!n&&n[lT]}var A1=(n,e,t,r)=>K(i=>(new Yg(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Yg=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ag(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ro(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ro(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ro(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ro(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new qg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new $g(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Ag(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Ag(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ql=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Po=class{constructor(e,t){this.component=e,this.route=t}};function x1(n,e,t){let r=n._root,i=e?e._root:null;return xa(r,i,t,[r.value])}function R1(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Bo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!nE(n)?n:e.get(n):r}function xa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ro(e);return n.children.forEach(s=>{M1(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Pa(a,t.getContext(s),i)),i}function M1(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=N1(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ql(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?xa(n,e,a?a.children:null,r,i):xa(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Po(a.outlet.component,s))}else s&&Pa(e,a,i),i.canActivateChecks.push(new Ql(r)),o.component?xa(n,null,a?a.children:null,r,i):xa(n,null,t,r,i);return i}function N1(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!yi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!yi(n.url,e.url)||!Cn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kg(n,e)||!Cn(n.queryParams,e.queryParams);case"paramsChange":default:return!Kg(n,e)}}function Pa(n,e,t){let r=Ro(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Pa(s,e.children.getContext(o),t):Pa(s,null,t):Pa(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Po(e.outlet.component,i)):t.canDeactivateChecks.push(new Po(null,i)):t.canDeactivateChecks.push(new Po(null,i))}function Ga(n){return typeof n=="function"}function P1(n){return typeof n=="boolean"}function k1(n){return n&&Ga(n.canLoad)}function O1(n){return n&&Ga(n.canActivate)}function F1(n){return n&&Ga(n.canActivateChild)}function L1(n){return n&&Ga(n.canDeactivate)}function V1(n){return n&&Ga(n.canMatch)}function fT(n){return n instanceof jn||n?.name==="EmptyError"}var Ol=Symbol("INITIAL_VALUE");function jo(){return je(n=>na(n.map(e=>e.pipe(Bn(1),ii(Ol)))).pipe(K(e=>{for(let t of e)if(t!==!0){if(t===Ol)return Ol;if(t===!1||j1(t))return t}return!0}),at(e=>e!==Ol),Bn(1)))}function j1(n){return ka(n)||n instanceof ja}function B1(n,e){return We(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?J(Ae($({},t),{guardsResult:!0})):U1(s,r,i,n).pipe(We(a=>a&&P1(a)?$1(r,o,n,e):J(a)),K(a=>Ae($({},t),{guardsResult:a})))})}function U1(n,e,t,r){return _e(n).pipe(We(i=>W1(i.component,i.route,t,e,r)),zt(i=>i!==!0,!0))}function $1(n,e,t,r){return _e(e).pipe(ni(i=>so(q1(i.route.parent,r),H1(i.route,r),G1(n,i.path,t),z1(n,i.route,t))),zt(i=>i!==!0,!0))}function H1(n,e){return n!==null&&e&&e(new Hg(n)),J(!0)}function q1(n,e){return n!==null&&e&&e(new Ug(n)),J(!0)}function z1(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(o=>Cc(()=>{let s=qa(e)??t,a=Bo(o,s),c=O1(a)?a.canActivate(e,n):In(s,()=>a(e,n));return br(c).pipe(zt())}));return J(i).pipe(jo())}function G1(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>R1(s)).filter(s=>s!==null).map(s=>Cc(()=>{let a=s.guards.map(c=>{let l=qa(s.node)??t,h=Bo(c,l),p=F1(h)?h.canActivateChild(r,n):In(l,()=>h(r,n));return br(p).pipe(zt())});return J(a).pipe(jo())}));return J(o).pipe(jo())}function W1(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let c=qa(e)??i,l=Bo(a,c),h=L1(l)?l.canDeactivate(n,e,t,r):In(c,()=>l(n,e,t,r));return br(h).pipe(zt())});return J(s).pipe(jo())}function K1(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let o=i.map(s=>{let a=Bo(s,n),c=k1(a)?a.canLoad(e,t):In(n,()=>a(e,t));return br(c)});return J(o).pipe(jo(),pT(r))}function pT(n){return wf(Je(e=>{if(typeof e!="boolean")throw Kl(n,e)}),K(e=>e===!0))}function Q1(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let o=i.map(s=>{let a=Bo(s,n),c=V1(a)?a.canMatch(e,t):In(n,()=>a(e,t));return br(c)});return J(o).pipe(jo(),pT(r))}var Ba=class{constructor(e){this.segmentGroup=e||null}},Ua=class extends Error{constructor(e){super(),this.urlTree=e}};function xo(n){return oo(new Ba(n))}function Y1(n){return oo(new X(4e3,!1))}function Z1(n){return oo(dT(!1,Ut.GuardRejected))}var Zg=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[oe])return Y1(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:b,title:M}=i,N=In(o,()=>a({params:v,data:b,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:M}));if(N instanceof Qn)throw new Ua(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ua(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Qn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ee(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Jg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function J1(n,e,t,r,i){let o=gT(n,e,t);return o.matched?(r=w1(e,r),Q1(r,e,t,i).pipe(K(s=>s===!0?o:$({},Jg)))):J(o)}function gT(n,e,t){if(e.path==="**")return X1(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?$({},Jg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Kk)(t,n,e);if(!i)return $({},Jg);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?$($({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function X1(n){return{matched:!0,parameters:n.length>0?KC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function $C(n,e,t,r){return t.length>0&&nO(n,t,r)?{segmentGroup:new Ee(e,tO(r,new Ee(t,n.children))),slicedSegments:[]}:t.length===0&&rO(n,t,r)?{segmentGroup:new Ee(n.segments,eO(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ee(n.segments,n.children),slicedSegments:t}}function eO(n,e,t,r){let i={};for(let o of t)if(Xl(n,e,o)&&!r[un(o)]){let s=new Ee([],{});i[un(o)]=s}return $($({},r),i)}function tO(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&un(r)!==oe){let i=new Ee([],{});t[un(r)]=i}return t}function nO(n,e,t){return t.some(r=>Xl(n,e,r)&&un(r)!==oe)}function rO(n,e,t){return t.some(r=>Xl(n,e,r))}function Xl(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function iO(n,e,t){return e.length===0&&!n.children[t]}var Xg=class{};function oO(n,e,t,r,i,o,s="emptyOnly"){return new em(n,e,t,r,i,s,o).recognize()}var sO=31,em=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Zg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=$C(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(K(({children:t,rootSnapshot:r})=>{let i=new Bt(r,t),o=new Wl("",i),s=f1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new No([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(K(r=>({children:r,rootSnapshot:t})),fr(r=>{if(r instanceof Ua)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ba?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(K(s=>s instanceof Bt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return _e(o).pipe(ni(s=>{let a=r.children[s],c=I1(t,s);return this.processSegmentGroup(e,c,a,s,i)}),ri((s,a)=>(s.push(...a),s)),pr(null),Rf(),We(s=>{if(s===null)return xo(r);let a=mT(s);return aO(a),J(a)}))}processSegment(e,t,r,i,o,s,a){return _e(t).pipe(ni(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(fr(l=>{if(l instanceof Ba)return J(null);throw l}))),zt(c=>!!c),fr(c=>{if(fT(c))return iO(r,i,o)?J(new Xg):xo(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return un(r)!==s&&(s===oe||!Xl(i,o,r))?xo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):xo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=gT(t,i,o);if(!c)return xo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>sO&&(this.allowRedirects=!1));let v=new No(o,l,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,HC(i),un(i),i.component??i._loadedComponent??null,i,qC(i)),b=Gl(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(We(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=J1(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(je(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(je(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=c,b=new No(m,p,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,HC(r),un(r),r.component??r._loadedComponent??null,r,qC(r)),M=Gl(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let{segmentGroup:N,slicedSegments:j}=$C(t,m,v,l);if(j.length===0&&N.hasChildren())return this.processChildren(h,l,N,b).pipe(K(F=>new Bt(b,F)));if(l.length===0&&j.length===0)return J(new Bt(b,[]));let H=un(r)===o;return this.processSegment(h,l,N,j,H?oe:o,!0,b).pipe(K(F=>new Bt(b,F instanceof Bt?[F]:[])))}))):xo(t)))}getChildConfig(e,t,r){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):K1(e,t,r,this.urlSerializer).pipe(We(i=>i?this.configLoader.loadChildren(e,t).pipe(Je(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Z1(t))):J({routes:[],injector:e})}};function aO(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function uO(n){let e=n.value.routeConfig;return e&&e.path===""}function mT(n){let e=[],t=new Set;for(let r of n){if(!uO(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=mT(r.children);e.push(new Bt(r.value,i))}return e.filter(r=>!t.has(r))}function HC(n){return n.data||{}}function qC(n){return n.resolve||{}}function cO(n,e,t,r,i,o){return We(s=>oO(n,e,t,r,s.extractedUrl,i,o).pipe(K(({state:a,tree:c})=>Ae($({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function lO(n,e){return We(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return J(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of yT(c))s.add(l);let a=0;return _e(s).pipe(ni(c=>o.has(c)?dO(c,r,n,e):(c.data=Gl(c,c.parent,n).resolve,J(void 0))),Je(()=>a++),ao(1),We(c=>a===s.size?J(t):wt))})}function yT(n){let e=n.children.map(t=>yT(t)).flat();return[n,...e]}function dO(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!cT(i)&&(o[$a]=i.title),hO(o,n,e,r).pipe(K(s=>(n._resolvedData=s,n.data=Gl(n,n.parent,t).resolve,null)))}function hO(n,e,t,r){let i=Mg(n);if(i.length===0)return J({});let o={};return _e(i).pipe(We(s=>fO(n[s],e,t,r).pipe(zt(),Je(a=>{if(a instanceof ja)throw Kl(new Oo,a);o[s]=a}))),ao(1),Af(o),fr(s=>fT(s)?wt:oo(s)))}function fO(n,e,t,r){let i=qa(e)??r,o=Bo(n,i),s=o.resolve?o.resolve(e,t):In(i,()=>o(e,t));return br(s)}function xg(n){return je(e=>{let t=n(e);return t?_e(t).pipe(K(()=>e)):J(e)})}var vT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[$a]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>V(pO),providedIn:"root"})}}return n})(),pO=(()=>{class n extends vT{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(OC))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wa=new G("",{providedIn:"root",factory:()=>({})}),gO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=tt({type:n,selectors:[["ng-component"]],standalone:!0,features:[tC],decls:1,vars:0,template:function(r,i){r&1&&jt(0,"router-outlet")},dependencies:[D1],encapsulation:2})}}return n})();function rm(n){let e=n.children&&n.children.map(rm),t=e?Ae($({},n),{children:e}):$({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=gO),t}var Yl=new G(""),im=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(Al)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=br(t.loadComponent()).pipe(K(_T),Je(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ra(()=>{this.componentLoaders.delete(t)})),i=new to(r,()=>new Ue).pipe(eo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=mO(r,this.compiler,t,this.onLoadEndListener).pipe(ra(()=>{this.childrenLoaders.delete(r)})),s=new to(o,()=>new Ue).pipe(eo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function mO(n,e,t,r){return br(n.loadChildren()).pipe(K(_T),We(i=>i instanceof pa||Array.isArray(i)?J(i):_e(e.compileModuleAsync(i))),K(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Yl,[],{optional:!0,self:!0}).flat()),{routes:s.map(rm),injector:o}}))}function yO(n){return n&&typeof n=="object"&&"default"in n}function _T(n){return yO(n)?n.default:n}var om=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>V(vO),providedIn:"root"})}}return n})(),vO=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wT=new G(""),IT=new G("");function _O(n,e,t){let r=n.get(IT),i=n.get(Rt);return n.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),wO(n))),{onViewTransitionCreated:c}=r;return c&&In(n,()=>c({transition:a,from:e,to:t})),s})}function wO(n){return new Promise(e=>{rg({read:()=>setTimeout(e)},{injector:n})})}var IO=new G(""),sm=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ue,this.transitionAbortSubject=new Ue,this.configLoader=V(im),this.environmentInjector=V(Ft),this.urlSerializer=V(Ha),this.rootContexts=V(za),this.location=V(Ao),this.inputBindingEnabled=V(Jl,{optional:!0})!==null,this.titleStrategy=V(vT),this.options=V(Wa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(om),this.createViewTransition=V(wT,{optional:!0}),this.navigationErrorHandler=V(IO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let t=i=>this.events.next(new jg(i)),r=i=>this.events.next(new Bg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ae($($({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new st({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Na,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(at(o=>o.id!==0),K(o=>Ae($({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),je(o=>{let s=!1,a=!1;return J(o).pipe(je(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ut.SupersededByNewNavigation),wt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Ae($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Tr(c.id,this.urlSerializer.serialize(c.rawUrl),p,Ul.IgnoredSameUrlNavigation)),c.resolve(!1),wt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return J(c).pipe(je(p=>{let m=this.transitions?.getValue();return this.events.next(new Fo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?wt:Promise.resolve(p)}),cO(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Je(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Ae($({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new $l(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:b,extras:M}=c,N=new Fo(p,this.urlSerializer.serialize(m),v,b);this.events.next(N);let j=aT(this.rootComponentType).snapshot;return this.currentTransition=o=Ae($({},c),{targetSnapshot:j,urlAfterRedirects:m,extras:Ae($({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,J(o)}else{let p="";return this.events.next(new Tr(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Ul.IgnoredByUrlHandlingStrategy)),c.resolve(!1),wt}}),Je(c=>{let l=new Og(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),K(c=>(this.currentTransition=o=Ae($({},c),{guards:x1(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),B1(this.environmentInjector,c=>this.events.next(c)),Je(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Kl(this.urlSerializer,c.guardsResult);let l=new Fg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),at(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Ut.GuardRejected),!1)),xg(c=>{if(c.guards.canActivateChecks.length)return J(c).pipe(Je(l=>{let h=new Lg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),je(l=>{let h=!1;return J(l).pipe(lO(this.paramsInheritanceStrategy,this.environmentInjector),Je({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Ut.NoDataFromResolver)}}))}),Je(l=>{let h=new Vg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),xg(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Je(m=>{h.component=m}),K(()=>{})));for(let m of h.children)p.push(...l(m));return p};return na(l(c.targetSnapshot.root)).pipe(pr(null),Bn(1))}),xg(()=>this.afterPreactivation()),je(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?_e(h).pipe(K(()=>o)):J(o)}),K(c=>{let l=C1(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Ae($({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Je(()=>{this.events.next(new La)}),A1(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Bn(1),Je({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Yn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Nf(this.transitionAbortSubject.pipe(Je(c=>{throw c}))),ra(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Ut.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),fr(c=>{if(a=!0,hT(c))this.events.next(new Kn(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),S1(c)?this.events.next(new Lo(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Fa(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=In(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof ja){let{message:p,cancellationCode:m}=Kl(this.urlSerializer,h);this.events.next(new Kn(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Lo(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return wt}))}))}cancelNavigationTransition(t,r,i){let o=new Kn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function EO(n){return n!==Na}var DO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>V(CO),providedIn:"root"})}}return n})(),tm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},CO=(()=>{class n extends tm{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Bp(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ET=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>V(TO),providedIn:"root"})}}return n})(),TO=(()=>{class n extends ET{constructor(){super(...arguments),this.location=V(Ao),this.urlSerializer=V(Ha),this.options=V(Wa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(om),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Qn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=aT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Fo)this.stateMemento=this.createStateMemento();else if(t instanceof Tr)this.rawUrlTree=r.initialUrl;else if(t instanceof $l){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof La?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Kn&&(t.code===Ut.GuardRejected||t.code===Ut.NoDataFromResolver)?this.restoreHistory(r):t instanceof Fa?this.restoreHistory(r,!0):t instanceof Yn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Qn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=$($({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=$($({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Bp(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ra=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ra||{});function DT(n,e){n.events.pipe(at(t=>t instanceof Yn||t instanceof Kn||t instanceof Fa||t instanceof Tr),K(t=>t instanceof Yn||t instanceof Tr?Ra.COMPLETE:(t instanceof Kn?t.code===Ut.Redirect||t.code===Ut.SupersededByNewNavigation:!1)?Ra.REDIRECTING:Ra.FAILED),at(t=>t!==Ra.REDIRECTING),Bn(1)).subscribe(()=>{e()})}function bO(n){throw n}var SO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},AO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},vi=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=V(Cl),this.stateManager=V(ET),this.options=V(Wa,{optional:!0})||{},this.pendingTasks=V(So),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(sm),this.urlSerializer=V(Ha),this.location=V(Ao),this.urlHandlingStrategy=V(om),this._events=new Ue,this.errorHandler=this.options.errorHandler||bO,this.navigated=!1,this.routeReuseStrategy=V(DO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(Yl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(Jl,{optional:!0}),this.eventsSubscription=new Ve,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Kn&&r.code!==Ut.Redirect&&r.code!==Ut.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Yn)this.navigated=!0;else if(r instanceof Lo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=$({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||EO(i.source)},s);this.scheduleNavigation(a,Na,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}RO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Na,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=$({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(rm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=$($({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=rT(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return iT(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ka(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Na,null,r)}navigate(t,r={skipLocationChange:!1}){return xO(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=$({},SO):r===!1?i=$({},AO):i=r,ka(t))return LC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return LC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return DT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xO(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function RO(n){return!(n instanceof La)&&!(n instanceof Lo)}var Zl=class{};var MO=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(at(t=>t instanceof Yn),ni(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=El(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return _e(i).pipe(hr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=J(null);let o=i.pipe(We(s=>s===null?J(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return _e([o,s]).pipe(hr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(vi),O(Al),O(Ft),O(Zl),O(im))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),CT=new G(""),NO=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Fo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Yn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Tr&&t.code===Ul.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Hl&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Hl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){xD()}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function PO(n){return n.routerState.root}function Ka(n,e){return{\u0275kind:n,\u0275providers:e}}function kO(){let n=V(Yt);return e=>{let t=n.get(Cr);if(e!==t.components[0])return;let r=n.get(vi),i=n.get(TT);n.get(am)===1&&r.initialNavigation(),n.get(bT,null,ue.Optional)?.setUpPreloading(),n.get(CT,null,ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var TT=new G("",{factory:()=>new Ue}),am=new G("",{providedIn:"root",factory:()=>1});function OO(){return Ka(2,[{provide:am,useValue:0},{provide:Sl,multi:!0,deps:[Yt],useFactory:e=>{let t=e.get(_C,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(vi),o=e.get(TT);DT(i,()=>{r(!0)}),e.get(sm).afterPreactivation=()=>(r(!0),o.closed?J(void 0):o),i.initialNavigation()}))}}])}function FO(){return Ka(3,[{provide:Sl,multi:!0,useFactory:()=>{let e=V(vi);return()=>{e.setUpLocationChangeListener()}}},{provide:am,useValue:2}])}var bT=new G("");function LO(n){return Ka(0,[{provide:bT,useExisting:MO},{provide:Zl,useExisting:n}])}function VO(){return Ka(8,[UC,{provide:Jl,useExisting:UC}])}function jO(n){let e=[{provide:wT,useValue:_O},{provide:IT,useValue:$({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ka(9,e)}var zC=new G("ROUTER_FORROOT_GUARD"),BO=[Ao,{provide:Ha,useClass:Oo},vi,za,{provide:Vo,useFactory:PO,deps:[vi]},im,[]],um=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[BO,[],{provide:Yl,multi:!0,useValue:t},{provide:zC,useFactory:qO,deps:[[vi,new Co,new bp]]},{provide:Wa,useValue:r||{}},r?.useHash?$O():HO(),UO(),r?.preloadingStrategy?LO(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?zO(r):[],r?.bindToComponentInputs?VO().\u0275providers:[],r?.enableViewTransitions?jO().\u0275providers:[],GO()]}}static forChild(t){return{ngModule:n,providers:[{provide:Yl,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(zC,8))}}static{this.\u0275mod=Ct({type:n})}static{this.\u0275inj=Dt({})}}return n})();function UO(){return{provide:CT,useFactory:()=>{let n=V(CC),e=V(pe),t=V(Wa),r=V(sm),i=V(Ha);return t.scrollOffset&&n.setOffset(t.scrollOffset),new NO(i,r,n,e,t)}}}function $O(){return{provide:pi,useClass:IC}}function HO(){return{provide:pi,useClass:mg}}function qO(n){return"guarded"}function zO(n){return[n.initialNavigation==="disabled"?FO().\u0275providers:[],n.initialNavigation==="enabledBlocking"?OO().\u0275providers:[]]}var GC=new G("");function GO(){return[{provide:GC,useFactory:kO},{provide:sg,multi:!0,useExisting:GC}]}var WO=[],ST=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ct({type:n})}static{this.\u0275inj=Dt({imports:[um.forRoot(WO),um]})}}return n})();var ed=class{constructor(){this.name="name",this.goalLife="goal",this.photoUrl="photo",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var KO="firebase",QO="10.14.1";dr(KO,QO,"app");var Qa=new Dr("ANGULARFIRE2_VERSION");var YO=(n,e)=>{let t=e?[e]:Uw(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},_i=class{constructor(){return YO(ZO)}},ZO="app-check";function cm(){}var td=class{zone;delegate;constructor(e,t=Cf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},lm=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",cm,{},cm,cm)),t.pipe(Je({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},nd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new td(Zone.current)),this.insideAngular=t.run(()=>new td(Zone.current,ta)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(pe))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function JO(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Mt(n){return XO(JO())(n)}function XO(n){return function(t){return t=t.lift(new lm(n.ngZone)),t.pipe(rn(n.outsideAngular),qt(n.insideAngular))}}var nF=new Map,rF={activated:!1,tokenObservers:[]},iF={initialized:!1,enabled:!1};function cn(n){return nF.get(n)||Object.assign({},rF)}function PT(){return iF}var oF="https://content-firebaseappcheck.googleapis.com/v1";var sF="exchangeDebugToken",xT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Vz=24*60*60*1e3;var hm=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return R(this,null,function*(){this.stop();try{this.pending=new nf,this.pending.promise.catch(t=>{}),yield aF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new nf,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function aF(n){return new Promise(e=>{setTimeout(e,n)})}var uF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Sr=new jw("appCheck","AppCheck",uF);function kT(n){if(!cn(n).activated)throw Sr.create("use-before-activation",{appName:n.name})}function OT(r,i){return R(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(v){throw Sr.create("fetch-network-error",{originalErrorMessage:v?.message})}if(c.status!==200)throw Sr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(v){throw Sr.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Sr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function FT(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${oF}/projects/${t}/apps/${r}:${sF}?key=${i}`,body:{debug_token:e}}}var cF="firebase-app-check-database",lF=1,fm="firebase-app-check-store";var rd=null;function dF(){return rd||(rd=new Promise((n,e)=>{try{let t=indexedDB.open(cF,lF);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Sr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(fm,{keyPath:"compositeKey"})}}}catch(t){e(Sr.create("storage-open",{originalErrorMessage:t?.message}))}}),rd)}function hF(n,e){return fF(pF(n),e)}function fF(n,e){return R(this,null,function*(){let r=(yield dF()).transaction(fm,"readwrite"),o=r.objectStore(fm).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Sr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function pF(n){return`${n.options.appId}-${n.name}`}var pm=new ic("@firebase/app-check");function dm(n,e){return rc()?hF(n,e).catch(t=>{pm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function LT(){return PT().enabled}function VT(){return R(this,null,function*(){let n=PT();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var gF={error:"UNKNOWN_ERROR"};function mF(n){return Fw.encodeString(JSON.stringify(n),!1)}function gm(n,e=!1){return R(this,null,function*(){let t=n.app;kT(t);let r=cn(t),i=r.token,o;if(i&&!Ya(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Ya(c)?i=c:yield dm(t,void 0))}if(!e&&i&&Ya(i))return{token:i.token};let s=!1;if(LT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=OT(FT(t,yield VT()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield dm(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield cn(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?pm.warn(c.message):pm.error(c),o=c}let a;return i?o?Ya(i)?a={token:i.token,internalError:o}:a=MT(o):(a={token:i.token},r.token=i,yield dm(t,i)):a=MT(o),s&&wF(t,a),a})}function yF(n){return R(this,null,function*(){let e=n.app;kT(e);let{provider:t}=cn(e);if(LT()){let r=yield VT(),{token:i}=yield OT(FT(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function vF(n,e,t,r){let{app:i}=n,o=cn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ya(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),RT(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>RT(n))}function jT(n,e){let t=cn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function RT(n){let{app:e}=n,t=cn(e),r=t.tokenRefresher;r||(r=_F(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function _F(n){let{app:e}=n;return new hm(()=>R(this,null,function*(){let t=cn(e),r;if(t.token?r=yield gm(n,!0):r=yield gm(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=cn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},xT.RETRIAL_MIN_WAIT,xT.RETRIAL_MAX_WAIT)}function wF(n,e){let t=cn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ya(n){return n.expireTimeMillis-Date.now()>0}function MT(n){return{token:mF(gF),error:n}}var mm=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=cn(this.app);for(let t of e)jT(this.app,t.next);return Promise.resolve()}};function IF(n,e){return new mm(n,e)}function EF(n){return{getToken:e=>gm(n,e),getLimitedUseToken:()=>yF(n),addTokenListener:e=>vF(n,"INTERNAL",e),removeTokenListener:e=>jT(n.app,e)}}var DF="@firebase/app-check",CF="0.8.8";var TF="app-check",NT="app-check-internal";function bF(){Zs(new Jr(TF,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return IF(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(NT).initialize()})),Zs(new Jr(NT,n=>{let e=n.getProvider("app-check").getImmediate();return EF(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),dr(DF,CF)}bF();var SF=["localhost","0.0.0.0","127.0.0.1"],Yz=typeof window<"u"&&SF.includes(window.location.hostname);var AF="firebase",xF="10.14.1";kt.registerVersion(AF,xF,"app-compat");var RF=["ngOnDestroy"],$T=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(RF.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var id=class{constructor(e){return e}},Uo=new G("angularfire2.app.options"),$o=new G("angularfire2.app.name");function Za(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=kt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>kt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;MF("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new id(s)}var MF=(n,...e)=>{cg()&&typeof console<"u"&&console[n](...e)},NF={provide:id,useFactory:Za,deps:[Uo,pe,[new Co,$o]]},HT=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Uo,useValue:t},{provide:$o,useValue:r}]}}constructor(t){kt.registerVersion("angularfire",Qa.full,"core"),kt.registerVersion("angularfire",Qa.full,"app-compat"),kt.registerVersion("angular",nC.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(xt))};static \u0275mod=Ct({type:n});static \u0275inj=Dt({providers:[NF]})}return n})();function od(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return PF(i,s)||(UT("error",`${e} was already initialized on the ${t} Firebase App with different settings.${kF?" You may need to reload as Firebase is not HMR aware.":""}`),UT("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function PF(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var kF=typeof module<"u"&&!!module.hot,UT=(n,...e)=>{cg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var ym=new G("angularfire2.auth.use-emulator"),vm=new G("angularfire2.auth.settings"),_m=new G("angularfire2.auth.tenant-id"),wm=new G("angularfire2.auth.langugage-code"),Im=new G("angularfire2.auth.use-device-language"),Em=new G("angularfire.auth.persistence"),Dm=(n,e,t,r,i,o,s,a)=>od(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),qT=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,v){let b=new Ue,M=J(void 0).pipe(qt(s.outsideAngular),je(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),K(()=>Za(t,o,r)),K(N=>Dm(N,o,a,l,h,p,c,m)),bc({bufferSize:1,refCount:!1}));if(gi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=J(null);else{M.pipe(zt()).subscribe();let N=M.pipe(je(F=>F.getRedirectResult().then(Y=>Y,()=>null)),Mt,bc({bufferSize:1,refCount:!1})),j=M.pipe(je(F=>new he(Y=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(ee=>Y.next(ee),ee=>Y.error(ee),()=>Y.complete()))})))),H=M.pipe(je(F=>new he(Y=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(ee=>Y.next(ee),ee=>Y.error(ee),()=>Y.complete()))}))));this.authState=N.pipe(Sc(j),rn(s.outsideAngular),qt(s.insideAngular)),this.user=N.pipe(Sc(H),rn(s.outsideAngular),qt(s.insideAngular)),this.idToken=this.user.pipe(je(F=>F?_e(F.getIdToken()):J(null))),this.idTokenResult=this.user.pipe(je(F=>F?_e(F.getIdTokenResult()):J(null))),this.credential=Sf(N,b,this.authState.pipe(at(F=>!F))).pipe(K(F=>F?.user?F:null),rn(s.outsideAngular),qt(s.insideAngular))}return $T(this,M,o,{spy:{apply:(N,j,H)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&H.then(F=>b.next(F))}}})}static \u0275fac=function(r){return new(r||n)(O(Uo),O($o,8),O(xt),O(pe),O(nd),O(ym,8),O(vm,8),O(_m,8),O(wm,8),O(Im,8),O(Em,8),O(_i,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var zT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},GT={};var Ar,Cm;(function(){var n;function e(I,y){function w(){}w.prototype=y.prototype,I.D=y.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,T){for(var _=Array(arguments.length-2),On=2;On<arguments.length;On++)_[On-2]=arguments[On];return y.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=I.g[0],w=I.g[1],D=I.g[2];var T=I.g[3],_=y+(T^w&(D^T))+E[0]+3614090360&4294967295;y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[1]+3905402710&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[5]+1200080426&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[9]+2336552879&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[13]+4254626195&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(D^T&(w^D))+E[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[6]+3225465664&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[10]+38016083&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[14]+3275163606&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[2]+4243563512&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(w^D^T)+E[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[8]+2272392833&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[4]+1272893353&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[0]+3936430074&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[12]+3873151461&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(D^(w|~T))+E[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[7]+1126891415&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[3]+2399980690&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[15]+4264355552&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[11]+3174756917&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var w=y-this.blockSize,E=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<y;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var w=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.u(I),I=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)I[w++]=this.g[y]>>>E&255;return I};function o(I,y){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=y(I)}function s(I,y){this.h=y;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==y||(w[D]=T,E=!1)}this.g=w}var a={};function c(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],w=1,E=0;I>=w;E++)y[E]=I/w|0,w*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(M(this))return-N(this).m();for(var I=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(M(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),w=this,E="";;){var D=Y(w,y).g;w=j(w,D.j(y));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,b(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=j(this,I),M(I)?-1:b(I)?0:1};function N(I){for(var y=I.g.length,w=[],E=0;E<y;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return M(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=y;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function j(I,y){return I.add(N(y))}n.j=function(I){if(b(this)||b(I))return p;if(M(this))return M(I)?N(this).j(N(I)):N(N(this).j(I));if(M(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,_=this.i(E)&65535,On=I.i(D)>>>16,Ms=I.i(D)&65535;w[2*E+2*D]+=_*Ms,H(w,2*E+2*D),w[2*E+2*D+1]+=T*Ms,H(w,2*E+2*D+1),w[2*E+2*D+1]+=_*On,H(w,2*E+2*D+1),w[2*E+2*D+2]+=T*On,H(w,2*E+2*D+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function H(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function Y(I,y){if(b(y))throw Error("division by zero");if(b(I))return new F(p,p);if(M(I))return y=Y(N(I),y),new F(N(y.g),N(y.h));if(M(y))return y=Y(I,N(y)),new F(N(y.g),y.h);if(30<I.g.length){if(M(I)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(I);)w=ee(w),E=ee(E);var D=Z(w,1),T=Z(E,1);for(E=Z(E,2),w=Z(w,2);!b(E);){var _=T.add(E);0>=_.l(I)&&(D=D.add(w),T=_),E=Z(E,1),w=Z(w,1)}return y=j(I,D.j(y)),new F(D,y)}for(D=p;0<=I.l(y);){for(w=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(y);M(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(y);b(T)&&(T=m),D=D.add(T),I=j(I,_)}return new F(D,I)}n.A=function(I){return Y(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function ee(I){for(var y=I.g.length+1,w=[],E=0;E<y;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function Z(I,y){var w=y>>5;y%=32;for(var E=I.g.length-w,D=[],T=0;T<E;T++)D[T]=0<y?I.i(T+w)>>>y|I.i(T+w+1)<<32-y:I.i(T+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Cm=GT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Ar=GT.Integer=s}).apply(typeof zT<"u"?zT:typeof self<"u"?self:typeof window<"u"?window:{});var sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zn={};var Tm,FF,Ho,bm,Ja,ad,Sm,Am,xm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof sd=="object"&&sd];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var C=u[g];if(!(C in f))break e;f=f[C]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,C={next:function(){if(!g&&f<u.length){var A=f++;return{value:d(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function b(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,C,A){for(var L=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)L[Te-2]=arguments[Te];return d.prototype[C].apply(g,L)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function N(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=u.length||0,A=g.length||0;u.length=C+A;for(let L=0;L<A;L++)u[C+L]=g[L]}else u.push(g)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Y(u){return Y[" "](u),u}Y[" "]=function(){};var ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Z(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function y(u){let d={};for(let f in u)d[f]=u[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)u[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function T(u){a.setTimeout(()=>{throw u},0)}function _(){var u=Rh;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class On{constructor(){this.h=this.g=null}add(d,f){let g=Ms.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ms=new j(()=>new VA,u=>u.reset());class VA{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ns,Ps=!1,Rh=new On,N_=()=>{let u=a.Promise.resolve(void 0);Ns=()=>{u.then(jA)}};var jA=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(f){T(f)}var d=Ms;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Ps=!1};function ar(){this.s=this.s,this.C=this.C}ar.prototype.s=!1,ar.prototype.ma=function(){this.s||(this.s=!0,this.N())},ar.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}lt.prototype.h=function(){this.defaultPrevented=!0};var BA=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function ks(u,d){if(lt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ee){e:{try{Y(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:UA[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ks.aa.h.call(this)}}b(ks,lt);var UA={2:"touch",3:"pen",4:"mouse"};ks.prototype.h=function(){ks.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Os="closure_listenable_"+(1e6*Math.random()|0),$A=0;function HA(u,d,f,g,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++$A,this.da=this.fa=!1}function ju(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Bu(u){this.src=u,this.g={},this.h=0}Bu.prototype.add=function(u,d,f,g,C){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var L=Nh(u,d,g,C);return-1<L?(d=u[L],f||(d.fa=!1)):(d=new HA(d,this.src,A,!!g,C),d.fa=f,u.push(d)),d};function Mh(u,d){var f=d.type;if(f in u.g){var g=u.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(ju(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Nh(u,d,f,g){for(var C=0;C<u.length;++C){var A=u[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Ph="closure_lm_"+(1e6*Math.random()|0),kh={};function P_(u,d,f,g,C){if(g&&g.once)return O_(u,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)P_(u,d[A],f,g,C);return null}return f=Vh(f),u&&u[Os]?u.K(d,f,l(g)?!!g.capture:!!g,C):k_(u,d,f,!1,g,C)}function k_(u,d,f,g,C,A){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,Te=Fh(u);if(Te||(u[Ph]=Te=new Bu(u)),f=Te.add(d,f,g,L,A),f.proxy)return f;if(g=qA(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)BA||(C=L),C===void 0&&(C=!1),u.addEventListener(d.toString(),g,C);else if(u.attachEvent)u.attachEvent(L_(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function qA(){function u(f){return d.call(u.src,u.listener,f)}let d=zA;return u}function O_(u,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)O_(u,d[A],f,g,C);return null}return f=Vh(f),u&&u[Os]?u.L(d,f,l(g)?!!g.capture:!!g,C):k_(u,d,f,!0,g,C)}function F_(u,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)F_(u,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Vh(f),u&&u[Os]?(u=u.i,d=String(d).toString(),d in u.g&&(A=u.g[d],f=Nh(A,f,g,C),-1<f&&(ju(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete u.g[d],u.h--)))):u&&(u=Fh(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Nh(d,f,g,C)),(f=-1<u?d[u]:null)&&Oh(f))}function Oh(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Os])Mh(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(L_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Fh(d))?(Mh(f,u),f.h==0&&(f.src=null,d[Ph]=null)):ju(u)}}}function L_(u){return u in kh?kh[u]:kh[u]="on"+u}function zA(u,d){if(u.da)u=!0;else{d=new ks(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Oh(u),u=f.call(g,d)}return u}function Fh(u){return u=u[Ph],u instanceof Bu?u:null}var Lh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vh(u){return typeof u=="function"?u:(u[Lh]||(u[Lh]=function(d){return u.handleEvent(d)}),u[Lh])}function dt(){ar.call(this),this.i=new Bu(this),this.M=this,this.F=null}b(dt,ar),dt.prototype[Os]=!0,dt.prototype.removeEventListener=function(u,d,f,g){F_(this,u,d,f,g)};function yt(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new lt(d,u);else if(d instanceof lt)d.target=d.target||u;else{var C=d;d=new lt(g,u),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];C=Uu(L,g,!0,d)&&C}if(L=d.g=u,C=Uu(L,g,!0,d)&&C,C=Uu(L,g,!1,d)&&C,f)for(A=0;A<f.length;A++)L=d.g=f[A],C=Uu(L,g,!1,d)&&C}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)ju(f[g]);delete u.g[d],u.h--}}this.F=null},dt.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},dt.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function Uu(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var Te=L.listener,ot=L.ha||L.src;L.fa&&Mh(u.i,L),C=Te.call(ot,g)!==!1&&C}}return C&&!g.defaultPrevented}function V_(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function j_(u){u.g=V_(()=>{u.g=null,u.i&&(u.i=!1,j_(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class GA extends ar{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:j_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fs(u){ar.call(this),this.h=u,this.g={}}b(Fs,ar);var B_=[];function U_(u){Z(u.g,function(d,f){this.g.hasOwnProperty(f)&&Oh(d)},u),u.g={}}Fs.prototype.N=function(){Fs.aa.N.call(this),U_(this)},Fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jh=a.JSON.stringify,WA=a.JSON.parse,KA=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Bh(){}Bh.prototype.h=null;function $_(u){return u.h||(u.h=u.i())}function H_(){}var Ls={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Uh(){lt.call(this,"d")}b(Uh,lt);function $h(){lt.call(this,"c")}b($h,lt);var Kr={},q_=null;function $u(){return q_=q_||new dt}Kr.La="serverreachability";function z_(u){lt.call(this,Kr.La,u)}b(z_,lt);function Vs(u){let d=$u();yt(d,new z_(d))}Kr.STAT_EVENT="statevent";function G_(u,d){lt.call(this,Kr.STAT_EVENT,u),this.stat=d}b(G_,lt);function vt(u){let d=$u();yt(d,new G_(d,u))}Kr.Ma="timingevent";function W_(u,d){lt.call(this,Kr.Ma,u),this.size=d}b(W_,lt);function js(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Bs(){this.g=!0}Bs.prototype.xa=function(){this.g=!1};function QA(u,d,f,g,C,A){u.info(function(){if(u.g)if(A)for(var L="",Te=A.split("&"),ot=0;ot<Te.length;ot++){var ve=Te[ot].split("=");if(1<ve.length){var ht=ve[0];ve=ve[1];var ft=ht.split("_");L=2<=ft.length&&ft[1]=="type"?L+(ht+"="+ve+"&"):L+(ht+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function YA(u,d,f,g,C,A,L){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+L})}function Gi(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+JA(u,f)+(g?" "+g:"")})}function ZA(u,d){u.info(function(){return"TIMEOUT: "+d})}Bs.prototype.info=function(){};function JA(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return jh(f)}catch{return d}}var Hu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},K_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hh;function qu(){}b(qu,Bh),qu.prototype.g=function(){return new XMLHttpRequest},qu.prototype.i=function(){return{}},Hh=new qu;function ur(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new Fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Q_}function Q_(){this.i=null,this.g="",this.h=!1}var Y_={},qh={};function zh(u,d,f){u.L=1,u.v=Ku(Fn(d)),u.m=f,u.P=!0,Z_(u,null)}function Z_(u,d){u.F=Date.now(),zu(u),u.A=Fn(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),dw(f.i,"t",g),u.C=0,f=u.j.J,u.h=new Q_,u.g=xw(u.j,f?d:null,!u.m),0<u.O&&(u.M=new GA(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(B_[0]=C.toString()),C=B_);for(var A=0;A<C.length;A++){var L=P_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Vs(),QA(u.i,u.u,u.A,u.l,u.R,u.m)}ur.prototype.ca=function(u){u=u.target;let d=this.M;d&&Ln(u)==3?d.j():this.Y(u)},ur.prototype.Y=function(u){try{if(u==this.g)e:{let ft=Ln(this.g);var d=this.g.Ba();let Qi=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||vw(this.g)))){this.J||ft!=4||d==7||(d==8||0>=Qi?Vs(3):Vs(2)),Gh(this);var f=this.g.Z();this.X=f;t:if(J_(this)){var g=vw(this.g);u="";var C=g.length,A=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),Us(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,YA(this.i,this.u,this.A,this.l,this.R,ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,ot=this.g;if((Te=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Te)){var ve=Te;break t}}ve=null}if(f=ve)Gi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wh(this,f);else{this.o=!1,this.s=3,vt(12),Qr(this),Us(this);break e}}if(this.P){f=!0;let tn;for(;!this.J&&this.C<L.length;)if(tn=XA(this,L),tn==qh){ft==4&&(this.s=4,vt(14),f=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==Y_){this.s=4,vt(15),Gi(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else Gi(this.i,this.l,tn,null),Wh(this,tn);if(J_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||L.length!=0||this.h.h||(this.s=1,vt(16),f=!1),this.o=this.o&&f,!f)Gi(this.i,this.l,L,"[Invalid Chunked Response]"),Qr(this),Us(this);else if(0<L.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Xh(ht),ht.M=!0,vt(11))}}else Gi(this.i,this.l,L,null),Wh(this,L);ft==4&&Qr(this),this.o&&!this.J&&(ft==4?Tw(this.j,this):(this.o=!1,zu(this)))}else mx(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),Qr(this),Us(this)}}}catch{}finally{}};function J_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function XA(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?qh:(f=Number(d.substring(f,g)),isNaN(f)?Y_:(g+=1,g+f>d.length?qh:(d=d.slice(g,g+f),u.C=g+f,d)))}ur.prototype.cancel=function(){this.J=!0,Qr(this)};function zu(u){u.S=Date.now()+u.I,X_(u,u.I)}function X_(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=js(m(u.ba,u),d)}function Gh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ur.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(ZA(this.i,this.A),this.L!=2&&(Vs(),vt(17)),Qr(this),this.s=2,Us(this)):X_(this,this.S-u)};function Us(u){u.j.G==0||u.J||Tw(u.j,u)}function Qr(u){Gh(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,U_(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Wh(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Kh(f.h,u))){if(!u.K&&Kh(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)Xu(f),Zu(f);else break e;Jh(f),vt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=js(m(f.Za,f),6e3));if(1>=nw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Zr(f,11)}else if((u.K||f.g==u)&&Xu(f),!H(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let ve=C[d];if(f.T=ve[0],ve=ve[1],f.G==2)if(ve[0]=="c"){f.K=ve[1],f.ia=ve[2];let ht=ve[3];ht!=null&&(f.la=ht,f.j.info("VER="+f.la));let ft=ve[4];ft!=null&&(f.Aa=ft,f.j.info("SVER="+f.Aa));let Qi=ve[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(g=1.5*Qi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let tn=u.g;if(tn){let tc=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tc){var A=g.h;A.g||tc.indexOf("spdy")==-1&&tc.indexOf("quic")==-1&&tc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Qh(A,A.h),A.h=null))}if(g.D){let ef=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;ef&&(g.ya=ef,Re(g.I,g.D,ef))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=u;if(g.qa=Aw(g,g.J?g.ia:null,g.W),L.K){rw(g.h,L);var Te=L,ot=g.L;ot&&(Te.I=ot),Te.B&&(Gh(Te),zu(Te)),g.g=L}else Dw(g);0<f.i.length&&Ju(f)}else ve[0]!="stop"&&ve[0]!="close"||Zr(f,7);else f.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Zr(f,7):Zh(f):ve[0]!="noop"&&f.l&&f.l.ta(ve),f.v=0)}}Vs(4)}catch{}}var ex=class{constructor(u,d){this.g=u,this.map=d}};function ew(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function nw(u){return u.h?1:u.g?u.g.size:0}function Kh(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Qh(u,d){u.g?u.g.add(d):u.h=d}function rw(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}ew.prototype.cancel=function(){if(this.i=iw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function iw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function tx(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function nx(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function ow(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=nx(u),g=tx(u),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],u)}var sw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rx(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),C=null;if(0<=g){var A=u[f].substring(0,g);C=u[f].substring(g+1)}else A=u[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Yr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Yr){this.h=u.h,Gu(this,u.j),this.o=u.o,this.g=u.g,Wu(this,u.s),this.l=u.l;var d=u.i,f=new qs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),aw(this,f),this.m=u.m}else u&&(d=String(u).match(sw))?(this.h=!1,Gu(this,d[1]||"",!0),this.o=$s(d[2]||""),this.g=$s(d[3]||"",!0),Wu(this,d[4]),this.l=$s(d[5]||"",!0),aw(this,d[6]||"",!0),this.m=$s(d[7]||"")):(this.h=!1,this.i=new qs(null,this.h))}Yr.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Hs(d,uw,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Hs(d,uw,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Hs(f,f.charAt(0)=="/"?sx:ox,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Hs(f,ux)),u.join("")};function Fn(u){return new Yr(u)}function Gu(u,d,f){u.j=f?$s(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Wu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function aw(u,d,f){d instanceof qs?(u.i=d,cx(u.i,u.h)):(f||(d=Hs(d,ax)),u.i=new qs(d,u.h))}function Re(u,d,f){u.i.set(d,f)}function Ku(u){return Re(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function $s(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Hs(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,ix),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ix(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var uw=/[#\/\?@]/g,ox=/[#\?:]/g,sx=/[#\?]/g,ax=/[#\?@]/g,ux=/#/g;function qs(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function cr(u){u.g||(u.g=new Map,u.h=0,u.i&&rx(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=qs.prototype,n.add=function(u,d){cr(this),this.i=null,u=Wi(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function cw(u,d){cr(u),d=Wi(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function lw(u,d){return cr(u),d=Wi(u,d),u.g.has(d)}n.forEach=function(u,d){cr(this),this.g.forEach(function(f,g){f.forEach(function(C){u.call(d,C,g,this)},this)},this)},n.na=function(){cr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=u[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(u){cr(this);let d=[];if(typeof u=="string")lw(this,u)&&(d=d.concat(this.g.get(Wi(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return cr(this),this.i=null,u=Wi(this,u),lw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function dw(u,d,f){cw(u,d),0<f.length&&(u.i=null,u.g.set(Wi(u,d),M(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=A;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),u.push(C)}}return this.i=u.join("&")};function Wi(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function cx(u,d){d&&!u.j&&(cr(u),u.i=null,u.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(cw(this,g),dw(this,C,f))},u)),u.j=d}function lx(u,d){let f=new Bs;if(a.Image){let g=new Image;g.onload=v(lr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(lr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(lr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(lr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function dx(u,d){let f=new Bs,g=new AbortController,C=setTimeout(()=>{g.abort(),lr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?lr(f,"TestPingServer: ok",!0,d):lr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),lr(f,"TestPingServer: error",!1,d)})}function lr(u,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function hx(){this.g=new KA}function fx(u,d,f){let g=f||"";try{ow(u,function(C,A){let L=C;l(C)&&(L=jh(C)),d.push(g+A+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function zs(u){this.l=u.Ub||null,this.j=u.eb||!1}b(zs,Bh),zs.prototype.g=function(){return new Qu(this.l,this.j)},zs.prototype.i=function(u){return function(){return u}}({});function Qu(u,d){dt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Qu,dt),n=Qu.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Ws(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gs(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function hw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Gs(this):Ws(this),this.readyState==3&&hw(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Gs(this))},n.Qa=function(u){this.g&&(this.response=u,Gs(this))},n.ga=function(){this.g&&Gs(this)};function Gs(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ws(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function Ws(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Qu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function fw(u){let d="";return Z(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Yh(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=fw(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Re(u,d,f))}function Le(u){dt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Le,dt);var px=/^https?$/i,gx=["POST","PUT"];n=Le.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hh.g(),this.v=this.o?$_(this.o):$_(Hh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(A){pw(this,A);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(gx,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yw(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){pw(this,A)}};function pw(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,gw(u),Yu(u)}function gw(u){u.A||(u.A=!0,yt(u,"complete"),yt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,yt(this,"complete"),yt(this,"abort"),Yu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yu(this,!0)),Le.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?mw(this):this.bb())},n.bb=function(){mw(this)};function mw(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Ln(u)!=4||u.Z()!=2)){if(u.u&&Ln(u)==4)V_(u.Ea,0,u);else if(yt(u,"readystatechange"),Ln(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(u.D).match(sw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!px.test(C?C.toLowerCase():"")}f=g}if(f)yt(u,"complete"),yt(u,"success");else{u.m=6;try{var A=2<Ln(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",gw(u)}}finally{Yu(u)}}}}function Yu(u,d){if(u.g){yw(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||yt(u,"ready");try{f.onreadystatechange=g}catch{}}}function yw(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Ln(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),WA(d)}};function vw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function mx(u){let d={};u=(u.g&&2<=Ln(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(H(u[g]))continue;var f=D(u[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function _w(u){this.Aa=0,this.i=[],this.j=new Bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ks("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ks("baseRetryDelayMs",5e3,u),this.cb=Ks("retryDelaySeedMs",1e4,u),this.Wa=Ks("forwardChannelMaxRetries",2,u),this.wa=Ks("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ew(u&&u.concurrentRequestLimit),this.Da=new hx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=_w.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){vt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Aw(this,null,this.W),Ju(this)};function Zh(u){if(ww(u),u.G==3){var d=u.U++,f=Fn(u.I);if(Re(f,"SID",u.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),Qs(u,f),d=new ur(u,u.j,d),d.L=2,d.v=Ku(Fn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=xw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),zu(d)}Sw(u)}function Zu(u){u.g&&(Xh(u),u.g.cancel(),u.g=null)}function ww(u){Zu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Xu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ju(u){if(!tw(u.h)&&!u.s){u.s=!0;var d=u.Ga;Ns||N_(),Ps||(Ns(),Ps=!0),Rh.add(d,u),u.B=0}}function yx(u,d){return nw(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=js(m(u.Ga,u,d),bw(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new ur(this,this.j,u),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Ew(this,C,d),f=Fn(this.I),Re(f,"RID",u),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),Qs(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(fw(A)))+"&"+d:this.m&&Yh(f,this.m,A)),Qh(this.h,C),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),C.T=!0,zh(C,f,null)):zh(C,f,d),this.G=2}}else this.G==3&&(u?Iw(this,u):this.i.length==0||tw(this.h)||Iw(this))};function Iw(u,d){var f;d?f=d.l:f=u.U++;let g=Fn(u.I);Re(g,"SID",u.K),Re(g,"RID",f),Re(g,"AID",u.T),Qs(u,g),u.m&&u.o&&Yh(g,u.m,u.o),f=new ur(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=Ew(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Qh(u.h,f),zh(f,g,d)}function Qs(u,d){u.H&&Z(u.H,function(f,g){Re(d,g,f)}),u.l&&ow({},function(f,g){Re(d,g,f)})}function Ew(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var C=u.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=C[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let Te=!0;for(let ot=0;ot<f;ot++){let ve=C[ot].g,ht=C[ot].map;if(ve-=A,0>ve)A=Math.max(0,C[ot].g-100),Te=!1;else try{fx(ht,L,"req"+ve+"_")}catch{g&&g(ht)}}if(Te){g=L.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function Dw(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;Ns||N_(),Ps||(Ns(),Ps=!0),Rh.add(d,u),u.v=0}}function Jh(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=js(m(u.Fa,u),bw(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Cw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=js(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Zu(this),Cw(this))};function Xh(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Cw(u){u.g=new ur(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=Fn(u.qa);Re(d,"RID","rpc"),Re(d,"SID",u.K),Re(d,"AID",u.T),Re(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Re(d,"TO",u.ja),Re(d,"TYPE","xmlhttp"),Qs(u,d),u.m&&u.o&&Yh(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=Ku(Fn(d)),f.m=null,f.P=!0,Z_(f,u)}n.Za=function(){this.C!=null&&(this.C=null,Zu(this),Jh(this),vt(19))};function Xu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Tw(u,d){var f=null;if(u.g==d){Xu(u),Xh(u),u.g=null;var g=2}else if(Kh(u.h,d))f=d.D,rw(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;g=$u(),yt(g,new W_(g,f)),Ju(u)}else Dw(u);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&yx(u,d)||g==2&&Jh(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:Zr(u,5);break;case 4:Zr(u,10);break;case 3:Zr(u,6);break;default:Zr(u,2)}}}function bw(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function Zr(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let C=!g;g=new Yr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gu(g,"https"),Ku(g),C?lx(g.toString(),f):dx(g.toString(),f)}else vt(2);u.G=0,u.l&&u.l.sa(d),Sw(u),ww(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function Sw(u){if(u.G=0,u.ka=[],u.l){let d=iw(u.h);(d.length!=0||u.i.length!=0)&&(N(u.ka,d),N(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function Aw(u,d,f){var g=f instanceof Yr?Fn(f):new Yr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Wu(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Yr(null);g&&Gu(A,g),d&&(A.g=d),C&&Wu(A,C),f&&(A.l=f),g=A}return f=u.D,d=u.ya,f&&d&&Re(g,f,d),Re(g,"VER",u.la),Qs(u,g),g}function xw(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Le(new zs({eb:f})):new Le(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rw(){}n=Rw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ec(){}ec.prototype.g=function(u,d){return new Pt(u,d)};function Pt(u,d){dt.call(this),this.g=new _w(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!H(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new Ki(this)}b(Pt,dt),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){Zh(this.g)},Pt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=jh(u),u=f);d.i.push(new ex(d.Ya++,u)),d.G==3&&Ju(d)},Pt.prototype.N=function(){this.g.l=null,delete this.j,Zh(this.g),delete this.g,Pt.aa.N.call(this)};function Mw(u){Uh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}b(Mw,Uh);function Nw(){$h.call(this),this.status=1}b(Nw,$h);function Ki(u){this.g=u}b(Ki,Rw),Ki.prototype.ua=function(){yt(this.g,"a")},Ki.prototype.ta=function(u){yt(this.g,new Mw(u))},Ki.prototype.sa=function(u){yt(this.g,new Nw)},Ki.prototype.ra=function(){yt(this.g,"b")},ec.prototype.createWebChannel=ec.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,xm=Zn.createWebChannelTransport=function(){return new ec},Am=Zn.getStatEventTarget=function(){return $u()},Sm=Zn.Event=Kr,ad=Zn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hu.NO_ERROR=0,Hu.TIMEOUT=8,Hu.HTTP_ERROR=6,Ja=Zn.ErrorCode=Hu,K_.COMPLETE="complete",bm=Zn.EventType=K_,H_.EventType=Ls,Ls.OPEN="a",Ls.CLOSE="b",Ls.ERROR="c",Ls.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Ho=Zn.WebChannel=H_,FF=Zn.FetchXmlHttpFactory=zs,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,Tm=Zn.XhrIo=Le}).apply(typeof sd<"u"?sd:typeof self<"u"?self:typeof window<"u"?window:{});var WT="@firebase/firestore";var Ye=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");var ws="10.14.0";var Or=new ic("@firebase/firestore");function Ko(){return Or.logLevel}function Y0(n){Or.setLogLevel(n)}function k(n,...e){if(Or.logLevel<=gn.DEBUG){let t=e.map(kv);Or.debug(`Firestore (${ws}): ${n}`,...t)}}function He(n,...e){if(Or.logLevel<=gn.ERROR){let t=e.map(kv);Or.error(`Firestore (${ws}): ${n}`,...t)}}function ln(n,...e){if(Or.logLevel<=gn.WARN){let t=e.map(kv);Or.warn(`Firestore (${ws}): ${n}`,...t)}}function kv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function q(n="Unexpected state"){let e=`FIRESTORE (${ws}) INTERNAL ASSERTION FAILED: `+n;throw He(e),new Error(e)}function W(n,e){n||q()}function Z0(n,e){n||q()}function B(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends Vw{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xe=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var yd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Om=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ye.UNAUTHENTICATED))}shutdown(){}},Fm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Lm=class{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){W(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Xe;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xe,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>R(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xe)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(W(typeof r.accessToken=="string"),new yd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return W(e===null||typeof e=="string"),new Ye(e)}},Vm=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},jm=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Vm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Bm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Um=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){W(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(W(typeof t.token=="string"),this.R=t.token,new Bm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function LF(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var vd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=LF(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function rs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function J0(n){return n+"\0"}var Oe=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Oe(0,0))}static max(){return new n(new Oe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var _d=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(),r===void 0?r=e.length-t:r>e.length-t&&q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},me=class n extends _d{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},VF=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qe=class n extends _d{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return VF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var U=class n{constructor(e){this.path=e}static fromPath(e){return new n(me.fromString(e))}static fromName(e){return new n(me.fromString(e).popFirst(5))}static empty(){return new n(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new me(e.slice()))}};var is=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function $m(n){return n.fields.find(e=>e.kind===2)}function Ii(n){return n.fields.filter(e=>e.kind!==2)}is.UNKNOWN_ID=-1;var es=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var lu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Xt.min())}};function X0(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new Oe(t+1,0):new Oe(t,r));return new Xt(i,U.empty(),e)}function eb(n){return new Xt(n.readTime,n.key,-1)}var Xt=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Q.min(),U.empty(),-1)}static max(){return new n(Q.max(),U.empty(),-1)}};function Ov(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=U.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var tb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zr(n){return R(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==tb)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Id=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Xe,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Si(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Fv(r.target.error);this.V.reject(new Si(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Si(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new qm(t)}},Fr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Ys())===12.2&&He("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),Ei(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!rc())return!1;if(n.v())return!0;let e=Ys(),t=n.S(e),r=0<t&&t<10,i=nb(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return R(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Si(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Si(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return R(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Id.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function nb(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Hm=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ei(this.B.delete())}},Si=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Gr(n){return n.name==="IndexedDbTransactionError"}var qm=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ei(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),Ei(this.store.add(e))}get(e){return Ei(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),Ei(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),Ei(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Fv(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Hm(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Ei(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Fv(r.target.error);t(i)}})}var KT=!1;function Fv(n){let e=Fr.S(Ys());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return KT||(KT=!0,setTimeout(()=>{throw r},0)),r}}return n}var zm=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Gr(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield zr(t)}yield this.X(6e4)}))}},Gm=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=eb(o);Ov(s,r)>0&&(r=s)}),new Xt(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var $t=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Mu(n){return n==null}function du(n){return n===0&&1/n==-1/0}function rb(n){return typeof n=="number"&&Number.isInteger(n)&&!du(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Tt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=QT(e)),e=jF(n.get(t),e);return QT(e)}function jF(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function QT(n){return n+""}function Tn(n){let e=n.length;if(W(e>=2),e===2)return W(n.charAt(0)===""&&n.charAt(1)===""),me.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&q(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:q()}o=s+2}return new me(r)}var YT=["userId","batchId"];function hd(n,e){return[n,Tt(e)]}function ib(n,e,t){return[n,Tt(e),t]}var BF={},UF=["prefixPath","collectionGroup","readTime","documentId"],$F=["prefixPath","collectionGroup","documentId"],HF=["collectionGroup","readTime","prefixPath","documentId"],qF=["canonicalId","targetId"],zF=["targetId","path"],GF=["path","targetId"],WF=["collectionId","parent"],KF=["indexId","uid"],QF=["uid","sequenceNumber"],YF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZF=["indexId","uid","orderedDocumentKey"],JF=["userId","collectionPath","documentId"],XF=["userId","collectionPath","largestBatchId"],eL=["userId","collectionGroup","largestBatchId"],ob=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tL=[...ob,"documentOverlays"],sb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ab=sb,Lv=[...ab,"indexConfiguration","indexState","indexEntries"],nL=Lv,rL=[...Lv,"globals"];var hu=class extends wd{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function et(n,e){let t=B(n);return Fr.F(t._e,e)}function ZT(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ji(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ub(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Me=class n{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xo(this.root,e,this.comparator,!0)}},Xo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Sn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();let e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Se=class n{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ed(this.data.getIterator())}getIteratorFrom(e){return new Ed(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ed=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function qo(n){return n.hasNext()?n.getNext():void 0}var Ht=class n{constructor(e){this.fields=e,e.sort(qe.comparator)}static empty(){return new n([])}unionWith(e){let t=new Se(qe.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rs(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Dd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function cb(){return typeof atob<"u"}var Ge=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Dd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ge.EMPTY_BYTE_STRING=new Ge("");var iL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function er(n){if(W(!!n),typeof n=="string"){let e=0,t=iL.exec(n);if(W(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Lr(n){return typeof n=="string"?Ge.fromBase64String(n):Ge.fromUint8Array(n)}function ph(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Vv(n){let e=n.mapValue.fields.__previous_value__;return ph(e)?Vv(e):e}function fu(n){let e=er(n.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}var Wm=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Vr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Pr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fd={nullValue:"NULL_VALUE"};function Ai(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ph(n)?4:lb(n)?9007199254740991:gh(n)?10:11:q()}function Rn(n,e){if(n===e)return!0;let t=Ai(n);if(t!==Ai(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return fu(n).isEqual(fu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=er(i.timestampValue),a=er(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Lr(i.bytesValue).isEqual(Lr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?du(s)===du(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return rs(n.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(ZT(s)!==ZT(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Rn(s[c],a[c])))return!1;return!0}(n,e);default:return q()}}function pu(n,e){return(n.values||[]).find(t=>Rn(t,e))!==void 0}function jr(n,e){if(n===e)return 0;let t=Ai(n),r=Ai(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ne(o.integerValue||o.doubleValue),c=Ne(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return JT(n.timestampValue,e.timestampValue);case 4:return JT(fu(n),fu(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Lr(o),c=Lr(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=re(a[l],c[l]);if(h!==0)return h}return re(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Ne(o.latitude),Ne(s.latitude));return a!==0?a:re(Ne(o.longitude),Ne(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return XT(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(c=m.value)===null||c===void 0?void 0:c.arrayValue,M=re(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:XT(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Pr.mapValue&&s===Pr.mapValue)return 0;if(o===Pr.mapValue)return 1;if(s===Pr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=re(c[p],h[p]);if(m!==0)return m;let v=jr(a[c[p]],l[h[p]]);if(v!==0)return v}return re(c.length,h.length)}(n.mapValue,e.mapValue);default:throw q()}}function JT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=er(n),r=er(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function XT(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=jr(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function os(n){return Km(n)}function Km(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=er(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Lr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return U.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Km(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Km(t.fields[s])}`;return i+"}"}(n.mapValue):q()}function xi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qm(n){return!!n&&"integerValue"in n}function gu(n){return!!n&&"arrayValue"in n}function e0(n){return!!n&&"nullValue"in n}function t0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pd(n){return!!n&&"mapValue"in n}function gh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ou(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ji(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ou(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ou(n.arrayValue.values[t]);return e}return Object.assign({},n)}function lb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var db={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function oL(n){return"nullValue"in n?fd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?xi(Vr.empty(),U.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?gh(n)?db:{mapValue:{}}:q()}function sL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?xi(Vr.empty(),U.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?db:"mapValue"in n?gh(n)?{mapValue:{}}:Pr:q()}function n0(n,e){let t=jr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function r0(n,e){let t=jr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var mt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(t)}setAll(e){let t=qe.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ou(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());pd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];pd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ji(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ou(this.value))}};function hb(n){let e=[];return ji(n.fields,(t,r)=>{let i=new qe([t]);if(pd(r)){let o=hb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ht(e)}var Ze=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Q.min(),Q.min(),Q.min(),mt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Q.min(),Q.min(),mt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Q.min(),Q.min(),mt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Mn=class{constructor(e,t){this.position=e,this.inclusive=t}};function i0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=U.comparator(U.fromName(s.referenceValue),t.key):r=jr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function o0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Rn(n.position[t],e.position[t]))return!1;return!0}var Ri=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function aL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Cd=class{},de=class n extends Cd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Jm(e,t,r):t==="array-contains"?new ty(e,r):t==="in"?new Td(e,r):t==="not-in"?new ny(e,r):t==="array-contains-any"?new ry(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Xm(e,r):new ey(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(jr(t,this.value)):t!==null&&Ai(this.value)===Ai(t)&&this.matchesComparison(jr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ce=class n extends Cd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ss(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ss(n){return n.op==="and"}function Ym(n){return n.op==="or"}function jv(n){return fb(n)&&ss(n)}function fb(n){for(let e of n.filters)if(e instanceof Ce)return!1;return!0}function Zm(n){if(n instanceof de)return n.field.canonicalString()+n.op.toString()+os(n.value);if(jv(n))return n.filters.map(e=>Zm(e)).join(",");{let e=n.filters.map(t=>Zm(t)).join(",");return`${n.op}(${e})`}}function pb(n,e){return n instanceof de?function(r,i){return i instanceof de&&r.op===i.op&&r.field.isEqual(i.field)&&Rn(r.value,i.value)}(n,e):n instanceof Ce?function(r,i){return i instanceof Ce&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&pb(s,i.filters[a]),!0):!1}(n,e):void q()}function gb(n,e){let t=n.filters.concat(e);return Ce.create(t,n.op)}function mb(n){return n instanceof de?function(t){return`${t.field.canonicalString()} ${t.op} ${os(t.value)}`}(n):n instanceof Ce?function(t){return t.op.toString()+" {"+t.getFilters().map(mb).join(" ,")+"}"}(n):"Filter"}var Jm=class extends de{constructor(e,t,r){super(e,t,r),this.key=U.fromName(r.referenceValue)}matches(e){let t=U.comparator(e.key,this.key);return this.matchesComparison(t)}},Xm=class extends de{constructor(e,t){super(e,"in",t),this.keys=yb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ey=class extends de{constructor(e,t){super(e,"not-in",t),this.keys=yb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function yb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>U.fromName(r.referenceValue))}var ty=class extends de{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return gu(t)&&pu(t.arrayValue,this.value)}},Td=class extends de{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&pu(this.value.arrayValue,t)}},ny=class extends de{constructor(e,t){super(e,"not-in",t)}matches(e){if(pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!pu(this.value.arrayValue,t)}},ry=class extends de{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!gu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pu(this.value.arrayValue,r))}};var iy=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function oy(n,e=null,t=[],r=[],i=null,o=null,s=null){return new iy(n,e,t,r,i,o,s)}function Mi(n){let e=B(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Zm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Mu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>os(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>os(r)).join(",")),e.ue=t}return e.ue}function Nu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!aL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!o0(n.startAt,e.startAt)&&o0(n.endAt,e.endAt)}function bd(n){return U.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Sd(n,e){return n.filters.filter(t=>t instanceof de&&t.field.isEqual(e))}function s0(n,e,t){let r=fd,i=!0;for(let o of Sd(n,e)){let s=fd,a=!0;switch(o.op){case"<":case"<=":s=oL(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=fd}n0({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];n0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function a0(n,e,t){let r=Pr,i=!0;for(let o of Sd(n,e)){let s=Pr,a=!0;switch(o.op){case">=":case">":s=sL(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Pr}r0({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];r0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var dn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function vb(n,e,t,r,i,o,s,a){return new dn(n,e,t,r,i,o,s,a)}function Is(n){return new dn(n)}function u0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Bv(n){return n.collectionGroup!==null}function ts(n){let e=B(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Se(qe.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ri(o,r))}),t.has(qe.keyField().canonicalString())||e.ce.push(new Ri(qe.keyField(),r))}return e.ce}function bt(n){let e=B(n);return e.le||(e.le=uL(e,ts(n))),e.le}function uL(n,e){if(n.limitType==="F")return oy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ri(i.field,o)});let t=n.endAt?new Mn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Mn(n.startAt.position,n.startAt.inclusive):null;return oy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function sy(n,e){let t=n.filters.concat([e]);return new dn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ad(n,e,t){return new dn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pu(n,e){return Nu(bt(n),bt(e))&&n.limitType===e.limitType}function _b(n){return`${Mi(bt(n))}|lt:${n.limitType}`}function Qo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>mb(i)).join(", ")}]`),Mu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>os(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>os(i)).join(",")),`Target(${r})`}(bt(n))}; limitType=${n.limitType})`}function ku(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):U.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ts(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=i0(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,ts(r),i)||r.endAt&&!function(s,a,c){let l=i0(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,ts(r),i))}(n,e)}function wb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ib(n){return(e,t)=>{let r=!1;for(let i of ts(n)){let o=cL(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function cL(n,e,t){let r=n.field.isKeyField()?U.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?jr(c,l):q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}var Nn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ji(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return ub(this.inner)}size(){return this.innerSize}};var lL=new Me(U.comparator);function Nt(){return lL}var Eb=new Me(U.comparator);function ru(...n){let e=Eb;for(let t of n)e=e.insert(t.key,t);return e}function Db(n){let e=Eb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bn(){return su()}function Cb(){return su()}function su(){return new Nn(n=>n.toString(),(n,e)=>n.isEqual(e))}var dL=new Me(U.comparator),hL=new Se(U.comparator);function ie(...n){let e=hL;for(let t of n)e=e.add(t);return e}var fL=new Se(re);function Uv(){return fL}function $v(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:du(e)?"-0":e}}function Tb(n){return{integerValue:""+n}}function bb(n,e){return rb(e)?Tb(e):$v(n,e)}var as=class{constructor(){this._=void 0}};function pL(n,e,t){return n instanceof Br?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ph(o)&&(o=Vv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof tr?Ab(n,e):n instanceof nr?xb(n,e):function(i,o){let s=Sb(i,o),a=c0(s)+c0(i.Pe);return Qm(s)&&Qm(i.Pe)?Tb(a):$v(i.serializer,a)}(n,e)}function gL(n,e,t){return n instanceof tr?Ab(n,e):n instanceof nr?xb(n,e):t}function Sb(n,e){return n instanceof Ur?function(r){return Qm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Br=class extends as{},tr=class extends as{constructor(e){super(),this.elements=e}};function Ab(n,e){let t=Rb(e);for(let r of n.elements)t.some(i=>Rn(i,r))||t.push(r);return{arrayValue:{values:t}}}var nr=class extends as{constructor(e){super(),this.elements=e}};function xb(n,e){let t=Rb(e);for(let r of n.elements)t=t.filter(i=>!Rn(i,r));return{arrayValue:{values:t}}}var Ur=class extends as{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function c0(n){return Ne(n.integerValue||n.doubleValue)}function Rb(n){return gu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ni=class{constructor(e,t){this.field=e,this.transform=t}};function mL(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof tr&&i instanceof tr||r instanceof nr&&i instanceof nr?rs(r.elements,i.elements,Rn):r instanceof Ur&&i instanceof Ur?Rn(r.Pe,i.Pe):r instanceof Br&&i instanceof Br}(n.transform,e.transform)}var ay=class{constructor(e,t){this.version=e,this.transformResults=t}},Be=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function gd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var us=class{};function Mb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Hr(n.key,Be.none()):new $r(n.key,n.data,Be.none());{let t=n.data,r=mt.empty(),i=new Se(qe.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new hn(n.key,r,new Ht(i.toArray()),Be.none())}}function yL(n,e,t){n instanceof $r?function(i,o,s){let a=i.value.clone(),c=d0(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof hn?function(i,o,s){if(!gd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=d0(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Nb(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function au(n,e,t,r){return n instanceof $r?function(o,s,a,c){if(!gd(o.precondition,s))return a;let l=o.value.clone(),h=h0(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof hn?function(o,s,a,c){if(!gd(o.precondition,s))return a;let l=h0(o.fieldTransforms,c,s),h=s.data;return h.setAll(Nb(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return gd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function vL(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Sb(r.transform,i||null);o!=null&&(t===null&&(t=mt.empty()),t.set(r.field,o))}return t||null}function l0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rs(r,i,(o,s)=>mL(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var $r=class extends us{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},hn=class extends us{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Nb(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function d0(n,e,t){let r=new Map;W(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,gL(s,a,t[i]))}return r}function h0(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,pL(o,s,e))}return r}var Hr=class extends us{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},mu=class extends us{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var yu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&yL(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=au(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=au(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Cb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=Mb(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&rs(this.mutations,e.mutations,(t,r)=>l0(t,r))&&rs(this.baseMutations,e.baseMutations,(t,r)=>l0(t,r))}},uy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){W(e.mutations.length===r.length);let i=function(){return dL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var vu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var cy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ke,ge;function Pb(n){switch(n){default:return q();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function kb(n){if(n===void 0)return He("GRPC error has no .code"),x.UNKNOWN;switch(n){case Ke.OK:return x.OK;case Ke.CANCELLED:return x.CANCELLED;case Ke.UNKNOWN:return x.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return x.INTERNAL;case Ke.UNAVAILABLE:return x.UNAVAILABLE;case Ke.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ke.NOT_FOUND:return x.NOT_FOUND;case Ke.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ke.ABORTED:return x.ABORTED;case Ke.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ke.DATA_LOSS:return x.DATA_LOSS;default:return q()}}(ge=Ke||(Ke={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var f0=null;function Ob(){return new TextEncoder}var _L=new Ar([4294967295,4294967295],0);function p0(n){let e=Ob().encode(n),t=new Cm;return t.update(e),new Uint8Array(t.digest())}function g0(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ar([t,r],0),new Ar([i,o],0)]}var ly=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bi(`Invalid padding: ${t}`);if(r<0)throw new bi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new bi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ar.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ar.fromNumber(r)));return i.compare(_L)===1&&(i=new Ar([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=p0(e),[r,i]=g0(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=p0(e),[r,i]=g0(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},bi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var _u=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Q.min(),i,new Me(re),Nt(),ie())}},wu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var ns=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},xd=class{constructor(e,t){this.targetId=e,this.me=t}},Rd=class{constructor(e,t,r=Ge.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Md=class{constructor(){this.fe=0,this.ge=y0(),this.pe=Ge.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:q()}}),new wu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=y0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,W(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},dy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Nt(),this.qe=m0(),this.Qe=new Me(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(bd(o))if(r===0){let s=new U(o.path);this.Ue(t,s,Ze.newNoDocument(s,Q.min()))}else W(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}f0?.et(function(h,p,m,v,b){var M,N,j,H,F,Y;let ee={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Z=p.unchangedNames;return Z&&(ee.bloomFilter={applied:b===0,hashCount:(M=Z?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(H=(j=(N=Z?.bits)===null||N===void 0?void 0:N.bitmap)===null||j===void 0?void 0:j.length)!==null&&H!==void 0?H:0,padding:(Y=(F=Z?.bits)===null||F===void 0?void 0:F.padding)!==null&&Y!==void 0?Y:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),ee}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Lr(r).toUint8Array()}catch(c){if(c instanceof Dd)return ln("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ly(s,i,o)}catch(c){return ln(c instanceof bi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&bd(a.target)){let c=new U(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Ze.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new _u(e,t,this.Qe,this.ke,r);return this.ke=Nt(),this.qe=m0(),this.Qe=new Me(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Md,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Se(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Md),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function m0(){return new Me(U.comparator)}function y0(){return new Me(U.comparator)}var wL={asc:"ASCENDING",desc:"DESCENDING"},IL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EL={and:"AND",or:"OR"},hy=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function fy(n,e){return n.useProto3Json||Mu(e)?e:{value:e}}function cs(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function DL(n,e){return cs(n,e.toTimestamp())}function ze(n){return W(!!n),Q.fromTimestamp(function(t){let r=er(t);return new Oe(r.seconds,r.nanos)}(n))}function Hv(n,e){return py(n,e).canonicalString()}function py(n,e){let t=function(i){return new me(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Lb(n){let e=me.fromString(n);return W(Wb(e)),e}function Iu(n,e){return Hv(n.databaseId,e.path)}function An(n,e){let t=Lb(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new U(Bb(t))}function Vb(n,e){return Hv(n.databaseId,e)}function jb(n){let e=Lb(n);return e.length===4?me.emptyPath():Bb(e)}function gy(n){return new me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Bb(n){return W(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function v0(n,e,t){return{name:Iu(n,e),fields:t.value.mapValue.fields}}function Ub(n,e,t){let r=An(n,e.name),i=ze(e.updateTime),o=e.createTime?ze(e.createTime):Q.min(),s=new mt({mapValue:{fields:e.fields}}),a=Ze.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function CL(n,e){return"found"in e?function(r,i){W(!!i.found),i.found.name,i.found.updateTime;let o=An(r,i.found.name),s=ze(i.found.updateTime),a=i.found.createTime?ze(i.found.createTime):Q.min(),c=new mt({mapValue:{fields:i.found.fields}});return Ze.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){W(!!i.missing),W(!!i.readTime);let o=An(r,i.missing),s=ze(i.readTime);return Ze.newNoDocument(o,s)}(n,e):q()}function TL(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(W(h===void 0||typeof h=="string"),Ge.fromBase64String(h||"")):(W(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ge.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:kb(l.code);return new P(h,l.message||"")}(s);t=new Rd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=An(n,r.document.name),o=ze(r.document.updateTime),s=r.document.createTime?ze(r.document.createTime):Q.min(),a=new mt({mapValue:{fields:r.document.fields}}),c=Ze.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ns(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=An(n,r.document),o=r.readTime?ze(r.readTime):Q.min(),s=Ze.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ns([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=An(n,r.document),o=r.removedTargetIds||[];t=new ns([],o,i,null)}else{if(!("filter"in e))return q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new cy(i,o),a=r.targetId;t=new xd(a,s)}}return t}function Eu(n,e){let t;if(e instanceof $r)t={update:v0(n,e.key,e.value)};else if(e instanceof Hr)t={delete:Iu(n,e.key)};else if(e instanceof hn)t={update:v0(n,e.key,e.data),updateMask:ML(e.fieldMask)};else{if(!(e instanceof mu))return q();t={verify:Iu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Br)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof tr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof nr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ur)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:DL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q()}(n,e.precondition)),t}function my(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Be.updateTime(ze(o.updateTime)):o.exists!==void 0?Be.exists(o.exists):Be.none()}(e.currentDocument):Be.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)W(a.setToServerValue==="REQUEST_TIME"),c=new Br;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new tr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new nr(h)}else"increment"in a?c=new Ur(s,a.increment):q();let l=qe.fromServerFormat(a.fieldPath);return new Ni(l,c)}(n,i)):[];if(e.update){e.update.name;let i=An(n,e.update.name),o=new mt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Ht(l.map(h=>qe.fromServerFormat(h)))}(e.updateMask);return new hn(i,o,s,t,r)}return new $r(i,o,t,r)}if(e.delete){let i=An(n,e.delete);return new Hr(i,t)}if(e.verify){let i=An(n,e.verify);return new mu(i,t)}return q()}function bL(n,e){return n&&n.length>0?(W(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?ze(i.updateTime):ze(o);return s.isEqual(Q.min())&&(s=ze(o)),new ay(s,i.transformResults||[])}(t,e))):[]}function $b(n,e){return{documents:[Vb(n,e.path)]}}function Hb(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Vb(n,i);let o=function(l){if(l.length!==0)return Gb(Ce.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Yo(m.field),direction:AL(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=fy(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function qb(n){let e=jb(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){W(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=zb(p);return m instanceof Ce&&jv(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new Ri(Zo(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Mu(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new Mn(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Mn(v,m)}(t.endAt)),vb(e,i,s,o,a,"F",c,l)}function SL(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function zb(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Zo(t.unaryFilter.field);return de.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Zo(t.unaryFilter.field);return de.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Zo(t.unaryFilter.field);return de.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Zo(t.unaryFilter.field);return de.create(s,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(n):n.fieldFilter!==void 0?function(t){return de.create(Zo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ce.create(t.compositeFilter.filters.map(r=>zb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q()}}(t.compositeFilter.op))}(n):q()}function AL(n){return wL[n]}function xL(n){return IL[n]}function RL(n){return EL[n]}function Yo(n){return{fieldPath:n.canonicalString()}}function Zo(n){return qe.fromServerFormat(n.fieldPath)}function Gb(n){return n instanceof de?function(t){if(t.op==="=="){if(t0(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NAN"}};if(e0(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(t0(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NOT_NAN"}};if(e0(t.value))return{unaryFilter:{field:Yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(t.field),op:xL(t.op),value:t.value}}}(n):n instanceof Ce?function(t){let r=t.getFilters().map(i=>Gb(i));return r.length===1?r[0]:{compositeFilter:{op:RL(t.op),filters:r}}}(n):q()}function ML(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Wb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ls=class n{constructor(e,t,r,i,o=Q.min(),s=Q.min(),a=Ge.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Nd=class{constructor(e){this.ct=e}};function NL(n,e){let t;if(e.document)t=Ub(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=U.fromSegments(e.noDocument.path),i=ki(e.noDocument.readTime);t=Ze.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return q();{let r=U.fromSegments(e.unknownDocument.path),i=ki(e.unknownDocument.version);t=Ze.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Oe(i[0],i[1]);return Q.fromTimestamp(o)}(e.readTime)),t}function _0(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Pd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Iu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:cs(o,s.version.toTimestamp()),createTime:cs(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Pi(e.version)};else{if(!e.isUnknownDocument())return q();r.unknownDocument={path:t.path.toArray(),version:Pi(e.version)}}return r}function Pd(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Pi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ki(n){let e=new Oe(n.seconds,n.nanoseconds);return Q.fromTimestamp(e)}function Di(n,e){let t=(e.baseMutations||[]).map(o=>my(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>my(n.ct,o)),i=Oe.fromMillis(e.localWriteTimeMs);return new yu(e.batchId,i,t,r)}function iu(n){let e=ki(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ki(n.lastLimboFreeSnapshotVersion):Q.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return W(o.documents.length===1),bt(Is(jb(o.documents[0])))}(n.query):function(o){return bt(qb(o))}(n.query),new ls(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ge.fromBase64String(n.resumeToken))}function Kb(n,e){let t=Pi(e.snapshotVersion),r=Pi(e.lastLimboFreeSnapshotVersion),i;i=bd(e.target)?$b(n.ct,e.target):Hb(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function qv(n){let e=qb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ad(e,e.limit,"L"):e}function Rm(n,e){return new vu(e.largestBatchId,my(n.ct,e.overlayMutation))}function w0(n,e){let t=e.path.lastSegment();return[n,Tt(e.path.popLast()),t]}function I0(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Pi(r.readTime),documentKey:Tt(r.documentKey.path),largestBatchId:r.largestBatchId}}var yy=class{getBundleMetadata(e,t){return E0(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:ki(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return E0(e).put(function(i){return{bundleId:i.id,createTime:Pi(ze(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return D0(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:qv(o.bundledQuery),readTime:ki(o.readTime)}}(r)})}saveNamedQuery(e,t){return D0(e).put(function(i){return{name:i.name,readTime:Pi(ze(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function E0(n){return et(n,"bundles")}function D0(n){return et(n,"namedQueries")}var kd=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Xa(e).get(w0(this.userId,t)).next(r=>r?Rm(this.serializer,r):null)}getOverlays(e,t){let r=bn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new vu(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Tt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Xa(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=bn(),o=Tt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Xa(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=Rm(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=bn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xa(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=Rm(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Xa(e).put(function(i,o,s){let[a,c,l]=w0(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Eu(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function Xa(n){return et(n,"documentOverlays")}var vy=class{Pt(e){return et(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ge.fromUint8Array(r):Ge.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Jn=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),du(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=er(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Lr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?lb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):gh(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):q()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ne(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),U.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Jn.vt=new Jn;function PL(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function C0(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=PL(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var _y=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=C0(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=C0(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},wy=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Iy=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Ci=class{constructor(){this.jt=new _y,this.Ht=new wy(this.jt),this.Jt=new Iy(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Ti=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function xr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=T0(n.arrayValue,e.arrayValue),t!==0?t:(t=T0(n.directionalValue,e.directionalValue),t!==0?t:U.comparator(n.documentKey,e.documentKey)))}function T0(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Od=class{constructor(e){this.Xt=new Se((t,r)=>qe.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(W(e.collectionGroup===this.collectionId),this.nn)return!1;let t=$m(e);if(t!==void 0&&!this.sn(t))return!1;let r=Ii(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Se(qe.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new es(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new es(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new es(r.field,r.dir==="asc"?0:1)));return new is(is.UNKNOWN_ID,this.collectionId,t,lu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function Qb(n){var e,t;if(W(n instanceof de||n instanceof Ce),n instanceof de){if(n instanceof Td){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>de.create(n.field,"==",o)))||[];return Ce.create(i,"or")}return n}let r=n.filters.map(i=>Qb(i));return Ce.create(r,n.op)}function kL(n){if(n.getFilters().length===0)return[];let e=Cy(Qb(n));return W(Yb(e)),Ey(e)||Dy(e)?[e]:e.getFilters()}function Ey(n){return n instanceof de}function Dy(n){return n instanceof Ce&&jv(n)}function Yb(n){return Ey(n)||Dy(n)||function(t){if(t instanceof Ce&&Ym(t)){for(let r of t.getFilters())if(!Ey(r)&&!Dy(r))return!1;return!0}return!1}(n)}function Cy(n){if(W(n instanceof de||n instanceof Ce),n instanceof de)return n;if(n.filters.length===1)return Cy(n.filters[0]);let e=n.filters.map(r=>Cy(r)),t=Ce.create(e,n.op);return t=Fd(t),Yb(t)?t:(W(t instanceof Ce),W(ss(t)),W(t.filters.length>1),t.filters.reduce((r,i)=>zv(r,i)))}function zv(n,e){let t;return W(n instanceof de||n instanceof Ce),W(e instanceof de||e instanceof Ce),t=n instanceof de?e instanceof de?function(i,o){return Ce.create([i,o],"and")}(n,e):b0(n,e):e instanceof de?b0(e,n):function(i,o){if(W(i.filters.length>0&&o.filters.length>0),ss(i)&&ss(o))return gb(i,o.getFilters());let s=Ym(i)?i:o,a=Ym(i)?o:i,c=s.filters.map(l=>zv(l,a));return Ce.create(c,"or")}(n,e),Fd(t)}function b0(n,e){if(ss(e))return gb(e,n.getFilters());{let t=e.filters.map(r=>zv(n,r));return Ce.create(t,"or")}}function Fd(n){if(W(n instanceof de||n instanceof Ce),n instanceof de)return n;let e=n.getFilters();if(e.length===1)return Fd(e[0]);if(fb(n))return n;let t=e.map(i=>Fd(i)),r=[];return t.forEach(i=>{i instanceof de?r.push(i):i instanceof Ce&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ce.create(r,n.op)}var Ty=class{constructor(){this.un=new Du}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(Xt.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(Xt.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Du=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Se(me.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Se(me.comparator)).toArray()}};var ud=new Uint8Array(0),by=class{constructor(e,t){this.databaseId=t,this.cn=new Du,this.ln=new Nn(r=>Mi(r),(r,i)=>Nu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Tt(i)};return S0(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[J0(t),""],!1,!0);return S0(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Tn(s.parent))}return r})}addFieldIndex(e,t){let r=eu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Go(e);return o.next(a=>{s.put(I0(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=eu(e),i=Go(e),o=zo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=eu(e),r=zo(e),i=Go(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Od(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=zo(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return S.forEach(o,(c,l)=>{k("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(c)} to execute ${Mi(t)}`);let h=function(F,Y){let ee=$m(Y);if(ee===void 0)return null;for(let Z of Sd(F,ee.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null}(l,c),p=function(F,Y){let ee=new Map;for(let Z of Ii(Y))for(let I of Sd(F,Z.fieldPath))switch(I.op){case"==":case"in":ee.set(Z.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ee.set(Z.fieldPath.canonicalString(),I.value),Array.from(ee.values())}return null}(l,c),m=function(F,Y){let ee=[],Z=!0;for(let I of Ii(Y)){let y=I.kind===0?s0(F,I.fieldPath,F.startAt):a0(F,I.fieldPath,F.startAt);ee.push(y.value),Z&&(Z=y.inclusive)}return new Mn(ee,Z)}(l,c),v=function(F,Y){let ee=[],Z=!0;for(let I of Ii(Y)){let y=I.kind===0?a0(F,I.fieldPath,F.endAt):s0(F,I.fieldPath,F.endAt);ee.push(y.value),Z&&(Z=y.inclusive)}return new Mn(ee,Z)}(l,c),b=this.In(c,l,m),M=this.In(c,l,v),N=this.Tn(c,l,p),j=this.En(c.indexId,h,b,m.inclusive,M,v.inclusive,N);return S.forEach(j,H=>r.G(H,t.limit).next(F=>{F.forEach(Y=>{let ee=U.fromSegments(Y.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=kL(Ce.create(e.filters,"and")).map(r=>oy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):ud,v=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),M=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,b,M))}return h}An(e,t,r,i){let o=new Ti(e,U.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Ti(e,U.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Od(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Se(qe.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Ci;for(let i of Ii(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Jn.vt.It(o,s)}return r.zt()}dn(e){let t=new Ci;return Jn.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Ci;return Jn.vt.It(xi(this.databaseId,t),r.Yt(function(o){let s=Ii(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Ci);let o=0;for(let s of Ii(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&gu(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);Jn.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Ci;c.seed(a.zt()),Jn.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof de&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=eu(e),i=Go(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new lu(p.sequenceNumber,new Xt(ki(p.readTime),new U(Tn(p.documentKey)),p.largestBatchId)):lu.empty(),v=h.fields.map(([b,M])=>new es(qe.fromServerFormat(b),M));return new is(h.indexId,h.collectionGroup,v,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=eu(e),o=Go(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>o.put(I0(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?S.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return zo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return zo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=zo(e),o=new Se(xr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Ti(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Se(xr),i=this.Vn(t,e);if(i==null)return r;let o=$m(t);if(o!=null){let s=e.data.field(o.fieldPath);if(gu(s))for(let a of s.arrayValue.values||[])r=r.add(new Ti(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Ti(t.indexId,e.key,ud,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let v=c.getIterator(),b=l.getIterator(),M=qo(v),N=qo(b);for(;M||N;){let j=!1,H=!1;if(M&&N){let F=h(M,N);F<0?H=!0:F>0&&(j=!0)}else M!=null?H=!0:j=!0;j?(p(N),N=qo(b)):H?(m(M),M=qo(v)):(M=qo(v),N=qo(b))}}(i,o,xr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return Go(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>xr(s,a)).filter((s,a,c)=>!a||xr(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=xr(s,e),c=xr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,ud,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,ud,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return xr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(A0)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||q())).next(A0)}};function S0(n){return et(n,"collectionParents")}function zo(n){return et(n,"indexEntries")}function eu(n){return et(n,"indexConfiguration")}function Go(n){return et(n,"indexState")}function A0(n){W(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Ov(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Xt(e.readTime,e.documentKey,t)}var x0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Zb(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{W(a===1)}));let l=[];for(let h of t.mutations){let p=ib(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function Ld(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw q();e=n.noDocument}return JSON.stringify(e).length}Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(41943040,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);var Vd=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){W(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Jo(e),s=Rr(e);return s.add({}).next(a=>{W(typeof a=="number");let c=new yu(a,t,r,i),l=function(v,b,M){let N=M.baseMutations.map(H=>Eu(v.ct,H)),j=M.mutations.map(H=>Eu(v.ct,H));return{userId:b,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:j}}(this.serializer,this.userId,c),h=[],p=new Se((m,v)=>re(m.canonicalString(),v.canonicalString()));for(let m of i){let v=ib(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,BF))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Rr(e).get(t).next(r=>r?(W(r.userId===this.userId),Di(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Rr(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(W(a.batchId>=r),o=Di(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Rr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Di(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=hd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Jo(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=Tn(h);if(l===this.userId&&t.path.isEqual(m))return Rr(e).get(p).next(v=>{if(!v)throw q();W(v.userId===this.userId),o.push(Di(this.serializer,v))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Se(re),i=[];return t.forEach(o=>{let s=hd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Jo(e).J({range:a},(l,h,p)=>{let[m,v,b]=l,M=Tn(v);m===this.userId&&o.path.isEqual(M)?r=r.add(b):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=hd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Se(re);return Jo(e).J({range:s},(c,l,h)=>{let[p,m,v]=c,b=Tn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Rr(e).get(o).next(s=>{if(s===null)throw q();W(s.userId===this.userId),r.push(Di(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Zb(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Jo(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Tn(o[1]);i.push(c)}else a.done()}).next(()=>{W(i.length===0)})})}containsKey(e,t){return Jb(e,this.userId,t)}Nn(e){return Xb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Jb(n,e,t){let r=hd(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Jo(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Rr(n){return et(n,"mutations")}function Jo(n){return et(n,"documentMutations")}function Xb(n){return et(n,"mutationQueues")}var ds=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Sy=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ds(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Q.fromTimestamp(new Oe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Wo(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(W(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return Wo(e).J((s,a)=>{let c=iu(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Wo(e).J((r,i)=>{let o=iu(i);t(o)})}qn(e){return R0(e).get("targetGlobalKey").next(t=>(W(t!==null),t))}Qn(e,t){return R0(e).put("targetGlobalKey",t)}Kn(e,t){return Wo(e).put(Kb(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Mi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Wo(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=iu(a);Nu(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Mr(e);return t.forEach(s=>{let a=Tt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Mr(e);return S.forEach(t,o=>{let s=Tt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Mr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Mr(e),o=ie();return i.J({range:r,H:!0},(s,a,c)=>{let l=Tn(s[1]),h=new U(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Tt(t.path),i=IDBKeyRange.bound([r],[J0(r)],!1,!0),o=0;return Mr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Wo(e).get(t).next(r=>r?iu(r):null)}};function Wo(n){return et(n,"targets")}function R0(n){return et(n,"targetGlobal")}function Mr(n){return et(n,"targetDocuments")}function M0([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var Ay=class{constructor(e){this.Un=e,this.buffer=new Se(M0),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();M0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},xy=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Gr(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield zr(t)}yield this.Hn(3e5)}))}},Ry=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve($t.oe);let r=new Ay(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(x0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),x0):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ko()<=gn.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function OL(n,e){return new Ry(n,e)}var My=class{constructor(e,t){this.db=e,this.garbageCollector=OL(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return cd(e,r)}removeReference(e,t,r){return cd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return cd(e,t)}nr(e,t){return function(i,o){let s=!1;return Xb(i).Y(a=>Jb(i,a,o).next(c=>(c&&(s=!0),S.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Q.min()),Mr(e).delete(function(p){return[0,Tt(p.path)]}(s))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return cd(e,t)}tr(e,t){let r=Mr(e),i,o=$t.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==$t.oe&&t(new U(Tn(i)),o),o=l,i=c):o=$t.oe}).next(()=>{o!==$t.oe&&t(new U(Tn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function cd(n,e){return Mr(n).put(function(r,i){return{targetId:0,path:Tt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var jd=class{constructor(){this.changes=new Nn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ze.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ny=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return wi(e).put(r)}removeEntry(e,t,r){return wi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Pd(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Ze.newInvalidDocument(t);return wi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tu(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:Ze.newInvalidDocument(t)};return wi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tu(t))},(i,o)=>{r={document:this.ir(t,o),size:Ld(o)}}).next(()=>r)}getEntries(e,t){let r=Nt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Nt(),i=new Me(U.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Ld(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Se(k0);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(tu(i.first()),tu(i.last())),s=i.getIterator(),a=s.getNext();return wi(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=U.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&k0(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(tu(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Pd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wi(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Nt();for(let p of l){let m=this.ir(U.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(ku(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Nt(),s=P0(t,r),a=P0(t,Xt.max());return wi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir(U.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Py(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return N0(e).get("remoteDocumentGlobalKey").next(t=>(W(!!t),t))}rr(e,t){return N0(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=NL(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Q.min())))return r}return Ze.newInvalidDocument(e)}};function eS(n){return new Ny(n)}var Py=class extends jd{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Nn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Se((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=_0(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Ld(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=_0(this.cr.serializer,s.convertToNoDocument(Q.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function N0(n){return et(n,"remoteDocumentGlobal")}function wi(n){return et(n,"remoteDocumentsV14")}function tu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function P0(n,e){let t=e.documentKey.path.toArray();return[n,Pd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function k0(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var ky=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Bd=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&au(r.mutation,i,Ht.empty(),Oe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=bn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ru();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=bn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Nt(),s=su(),a=function(){return su()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof hn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),au(h.mutation,l,h.mutation.getFieldMask(),Oe.now())):s.set(l.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new ky(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=su(),i=new Me((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Ht.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ie()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=Cb();h.forEach(m=>{if(!o.has(m)){let v=Mb(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return U.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(bn()),a=-1,c=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ie())).next(h=>({batchId:a,changes:Db(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new U(t)).next(r=>{let i=ru();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ru();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,c=>{let l=function(p,m){return new dn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Ze.newInvalidDocument(h)))});let a=ru();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&au(h.mutation,l,Ht.empty(),Oe.now()),ku(t,l)&&(a=a.insert(c,l))}),a})}};var Oy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ze(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:qv(i.bundledQuery),readTime:ze(i.readTime)}}(t)),S.resolve()}};var Fy=class{constructor(){this.overlays=new Me(U.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=bn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=bn(),o=t.length+1,s=new U(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Me((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=bn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=bn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new vu(t,r));let o=this.Ir.get(t);o===void 0&&(o=ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Ly=class{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Cu=class{constructor(){this.Tr=new Se(Qe.Er),this.dr=new Se(Qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Qe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Qe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new U(new me([])),r=new Qe(t,e),i=new Qe(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new U(new me([])),r=new Qe(t,e),i=new Qe(t,e+1),o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Qe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Qe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return U.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||U.comparator(e.key,t.key)}};var Vy=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Se(Qe.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new yu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Qe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Qe(t,0),i=new Qe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Se(re);return t.forEach(i=>{let o=new Qe(i,0),s=new Qe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;U.isDocumentKey(o)||(o=o.child(""));let s=new Qe(new U(o),0),a=new Se(re);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){W(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Qe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Qe(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var jy=class{constructor(e){this.Mr=e,this.docs=function(){return new Me(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():Ze.newInvalidDocument(t))}getEntries(e,t){let r=Nt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ze.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Nt(),s=t.path,a=new U(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Ov(eb(h),r)<=0||(i.has(h.key)||ku(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){q()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new By(this)}getSize(e){return S.resolve(this.size)}},By=class extends jd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Uy=class{constructor(e){this.persistence=e,this.Nr=new Nn(t=>Mi(t),Nu),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cu,this.targetCount=0,this.kr=ds.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ds(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var Ud=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new $t(0),this.Kr=!1,this.Kr=!0,this.$r=new Ly,this.referenceDelegate=e(this),this.Ur=new Uy(this),this.indexManager=new Ty,this.remoteDocumentCache=function(i){return new jy(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Nd(t),this.Gr=new Oy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Vy(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new $y(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},$y=class extends wd{constructor(e){super(),this.currentSequenceNumber=e}},$d=class n{constructor(e){this.persistence=e,this.Jr=new Cu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw q()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=U.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Q.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Hy=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Id("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YT,{unique:!0}),c.createObjectStore("documentMutations")}(e),O0(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),O0(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Q.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YT,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:JF});l.createIndex("collectionPathOverlayIndex",XF,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",eL,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:UF});l.createIndex("documentKeyIndex",$F),l.createIndex("collectionGroupIndex",HF)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:KF}).createIndex("sequenceNumberIndex",QF,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:YF}).createIndex("documentKeyIndex",ZF,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Ld(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,c=>{W(c.userId===o.userId);let l=Di(this.serializer,c);return Zb(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new me(s),l=function(p){return[0,Tt(p)]}(c);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:Tt(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:WF});let r=t.store("collectionParents"),i=new Du,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Tt(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new me(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=Tn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=iu(i),s=Kb(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new U(me.fromString(p.document.name).popFirst(5)):p.noDocument?U.fromSegments(p.noDocument.path):p.unknownDocument?U.fromSegments(p.unknownDocument.path):q()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=eS(this.serializer),o=new Ud($d.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ie();Di(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new Ye(l),p=kd.lt(this.serializer,h),m=o.getIndexManager(h),v=Vd.lt(h,this.serializer,m,o.referenceDelegate);return new Bd(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new hu(t,$t.oe),c).next()})})}};function O0(n){n.createObjectStore("targetDocuments",{keyPath:zF}).createIndex("documentTargetsIndex",GF,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qF,{unique:!0}),n.createObjectStore("targetGlobal")}var Mm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qy=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new My(this,i),this.Ai=t+"main",this.serializer=new Nd(c),this.Ri=new Fr(this.Ai,this.hi,new Hy(this.serializer)),this.$r=new vy,this.Ur=new Sy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=eS(this.serializer),this.Gr=new yy,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&He("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Mm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new $t(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>R(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>R(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ld(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Gr(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return nu(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return ld(e).delete(this.clientId)}Fi(){return R(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=et(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):nu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Mm);return!1}}return!(!this.networkEnabled||!this.inForeground)||ld(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return R(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new hu(e,$t.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>ld(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Vd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new by(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return kd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?rL:c===16?nL:c===15?Lv:c===14?ab:c===13?sb:c===12?tL:c===11?ob:void q()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new hu(a,this.Qr?this.Qr.next():$t.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw He(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,tb);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return nu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,Mm)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nu(e).put("owner",t)}static D(){return Fr.D()}bi(e){let t=nu(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(He(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;rf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return He("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){He("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function nu(n){return et(n,"owner")}function ld(n){return et(n,"clientMetadata")}function Gv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var zy=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Gy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Hd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return rf()?8:nb(Ys())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Gy;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ko()<=gn.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",Qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Ko()<=gn.DEBUG&&k("QueryEngine","Query:",Qo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ko()<=gn.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",Qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bt(t))):S.resolve())}Yi(e,t){if(u0(t))return S.resolve(null);let r=bt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ad(t,null,"F"),r=bt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,Ad(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return u0(t)||i.isEqual(Q.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(Ko()<=gn.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qo(t)),this.rs(e,s,t,X0(i,-1)).next(a=>a))})}ts(e,t){let r=new Se(Ib(e));return t.forEach((i,o)=>{ku(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Ko()<=gn.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",Qo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Xt.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Wy=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Me(re),this._s=new Nn(o=>Mi(o),Nu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function tS(n,e,t,r){return new Wy(n,e,t,r)}function nS(n,e){return R(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function FL(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(c,b)).next(M=>{let N=l.docVersions.get(b);W(N!==null),M.version.compareTo(N)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function rS(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function LL(n,e){let t=B(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ge.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(M,N,j){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let c=Nt(),l=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(iS(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(Q.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function iS(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Nt();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Q.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function VL(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hs(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new ls(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function fs(n,e,t){return R(this,null,function*(){let r=B(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Gr(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function qd(n,e,t){let r=B(n),i=Q.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=B(c),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,bt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Q.min(),t?o:ie())).next(a=>(aS(r,wb(e),a),{documents:a,Ts:o})))}function oS(n,e){let t=B(n),r=B(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function sS(n,e){let t=B(n),r=t.us.get(e)||Q.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,X0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(aS(t,e,i),i))}function aS(n,e,t){let r=n.us.get(e)||Q.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function jL(n,e,t,r){return R(this,null,function*(){let i=B(n),o=ie(),s=Nt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield hs(i,function(h){return bt(Is(me.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>iS(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function BL(r,i){return R(this,arguments,function*(n,e,t=ie()){let o=yield hs(n,bt(qv(e.bundledQuery))),s=B(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=ze(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ge.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function F0(n,e){return`firestore_clients_${n}_${e}`}function L0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Nm(n,e){return`firestore_targets_${n}_${e}`}var zd=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(He("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},uu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(He("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Gd=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Uv();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=rb(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(He("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},Ky=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(He("SharedClientState",`Failed to parse online state: ${e}`),null)}},Tu=class{constructor(){this.activeTargetIds=Uv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},cu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Me(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=F0(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Tu),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return R(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(F0(this.persistenceKey,r));if(i){let o=Gd.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Nm(this.persistenceKey,e));if(i){let o=uu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Nm(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void He("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>R(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=$t.oe;if(o!=null)try{let a=JSON.parse(o);W(typeof a=="number"),s=a}catch(a){He("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==$t.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new zd(this.currentUser,e,t,r),o=L0(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=L0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Nm(this.persistenceKey,e),o=new uu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Gd.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return zd.Rs(new Ye(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return uu.Rs(i,t)}Ls(e){return Ky.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return R(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Uv();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Wd=class{constructor(){this.so=new Tu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Tu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Qy=class{_o(e){}shutdown(){}};var Kd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var dd=null;function Pm(){return dd===null?dd=function(){return 268435456+Math.round(2147483648*Math.random())}():dd++,"0x"+dd.toString(16)}var UL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Yy=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var gt="WebChannelConnection",Zy=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Pm(),c=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw ln("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ws}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=UL[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Pm();return new Promise((s,a)=>{let c=new Tm;c.setWithCredentials(!0),c.listenOnce(bm.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ja.NO_ERROR:let h=c.getResponseJson();k(gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Ja.TIMEOUT:k(gt,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case Ja.HTTP_ERROR:let p=c.getStatus();if(k(gt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(N){let j=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(j)>=0?j:x.UNKNOWN}(v.status);a(new P(b,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{k(gt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(gt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Pm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=xm(),a=Am(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");k(gt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,v=!1,b=new Yy({Io:N=>{v?k(gt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(gt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(gt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),M=(N,j,H)=>{N.listen(j,F=>{try{H(F)}catch(Y){setTimeout(()=>{throw Y},0)}})};return M(p,Ho.EventType.OPEN,()=>{v||(k(gt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),M(p,Ho.EventType.CLOSE,()=>{v||(v=!0,k(gt,`RPC '${e}' stream ${i} transport closed`),b.So())}),M(p,Ho.EventType.ERROR,N=>{v||(v=!0,ln(gt,`RPC '${e}' stream ${i} transport errored:`,N),b.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,Ho.EventType.MESSAGE,N=>{var j;if(!v){let H=N.data[0];W(!!H);let F=H,Y=F.error||((j=F[0])===null||j===void 0?void 0:j.error);if(Y){k(gt,`RPC '${e}' stream ${i} received error:`,Y);let ee=Y.status,Z=function(w){let E=Ke[w];if(E!==void 0)return kb(E)}(ee),I=Y.message;Z===void 0&&(Z=x.INTERNAL,I="Unknown error status: "+ee+" with message "+Y.message),v=!0,b.So(new P(Z,I)),p.close()}else k(gt,`RPC '${e}' stream ${i} received:`,H),b.bo(H)}}),M(a,Sm.STAT_EVENT,N=>{N.stat===ad.PROXY?k(gt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===ad.NOPROXY&&k(gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function uS(){return typeof window<"u"?window:null}function md(){return typeof document<"u"?document:null}function Ou(n){return new hy(n,!0)}var bu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Qd=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return R(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return R(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return R(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(He(t.toString()),He("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>R(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Jy=class extends Qd{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=TL(this.serializer,e),r=function(o){if(!("targetChange"in o))return Q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?ze(s.readTime):Q.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=gy(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=bd(c)?{documents:$b(o,c)}:{query:Hb(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Fb(o,s.resumeToken);let l=fy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Q.min())>0){a.readTime=cs(o,s.snapshotVersion.toTimestamp());let l=fy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=SL(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=gy(this.serializer),t.removeTarget=e,this.a_(t)}},Xy=class extends Qd{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return W(!!e.streamToken),this.lastStreamToken=e.streamToken,W(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){W(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=bL(e.writeResults,e.commitTime),r=ze(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=gy(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Eu(this.serializer,r))};this.a_(t)}};var ev=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,py(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,py(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},tv=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(He(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var nv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>R(this,null,function*(){Wr(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(c){return R(this,null,function*(){let l=B(c);l.L_.add(4),yield Es(l),l.q_.set("Unknown"),l.L_.delete(4),yield Fu(l)})}(this))}))}),this.q_=new tv(r,i)}};function Fu(n){return R(this,null,function*(){if(Wr(n))for(let e of n.B_)yield e(!0)})}function Es(n){return R(this,null,function*(){for(let e of n.B_)yield e(!1)})}function mh(n,e){let t=B(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Qv(t)?Kv(t):Cs(t).r_()&&Wv(t,e))}function ps(n,e){let t=B(n),r=Cs(t);t.N_.delete(e),r.r_()&&cS(t,e),t.N_.size===0&&(r.r_()?r.o_():Wr(t)&&t.q_.set("Unknown"))}function Wv(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cs(n).A_(e)}function cS(n,e){n.Q_.xe(e),Cs(n).R_(e)}function Kv(n){n.Q_=new dy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Cs(n).start(),n.q_.v_()}function Qv(n){return Wr(n)&&!Cs(n).n_()&&n.N_.size>0}function Wr(n){return B(n).L_.size===0}function lS(n){n.Q_=void 0}function $L(n){return R(this,null,function*(){n.q_.set("Online")})}function HL(n){return R(this,null,function*(){n.N_.forEach((e,t)=>{Wv(n,e)})})}function qL(n,e){return R(this,null,function*(){lS(n),Qv(n)?(n.q_.M_(e),Kv(n)):n.q_.set("Unknown")})}function zL(n,e,t){return R(this,null,function*(){if(n.q_.set("Online"),e instanceof Rd&&e.state===2&&e.cause)try{yield function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Yd(n,r)}else if(e instanceof ns?n.Q_.Ke(e):e instanceof xd?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Q.min()))try{let r=yield rS(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(Ge.EMPTY_BYTE_STRING,h.snapshotVersion)),cS(o,c);let p=new ls(h.target,c,l,h.sequenceNumber);Wv(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Yd(n,r)}})}function Yd(n,e,t){return R(this,null,function*(){if(!Gr(e))throw e;n.L_.add(1),yield Es(n),n.q_.set("Offline"),t||(t=()=>rS(n.localStore)),n.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Fu(n)}))})}function dS(n,e){return e().catch(t=>Yd(n,t,e))}function Ds(n){return R(this,null,function*(){let e=B(n),t=qr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;GL(e);)try{let i=yield VL(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,WL(e,i)}catch(i){yield Yd(e,i)}hS(e)&&fS(e)})}function GL(n){return Wr(n)&&n.O_.length<10}function WL(n,e){n.O_.push(e);let t=qr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function hS(n){return Wr(n)&&!qr(n).n_()&&n.O_.length>0}function fS(n){qr(n).start()}function KL(n){return R(this,null,function*(){qr(n).p_()})}function QL(n){return R(this,null,function*(){let e=qr(n);for(let t of n.O_)e.m_(t.mutations)})}function YL(n,e,t){return R(this,null,function*(){let r=n.O_.shift(),i=uy.from(r,e,t);yield dS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ds(n)})}function ZL(n,e){return R(this,null,function*(){e&&qr(n).V_&&(yield function(r,i){return R(this,null,function*(){if(function(s){return Pb(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();qr(r).s_(),yield dS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ds(r)}})}(n,e)),hS(n)&&fS(n)})}function V0(n,e){return R(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Wr(t);t.L_.add(3),yield Es(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Fu(t)})}function rv(n,e){return R(this,null,function*(){let t=B(n);e?(t.L_.delete(2),yield Fu(t)):e||(t.L_.add(2),yield Es(t),t.q_.set("Unknown"))})}function Cs(n){return n.K_||(n.K_=function(t,r,i){let o=B(t);return o.w_(),new Jy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:$L.bind(null,n),Ro:HL.bind(null,n),mo:qL.bind(null,n),d_:zL.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.K_.s_(),Qv(n)?Kv(n):n.q_.set("Unknown")):(yield n.K_.stop(),lS(n))}))),n.K_}function qr(n){return n.U_||(n.U_=function(t,r,i){let o=B(t);return o.w_(),new Xy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:KL.bind(null,n),mo:ZL.bind(null,n),f_:QL.bind(null,n),g_:YL.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.U_.s_(),yield Ds(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var iv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Xe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ts(n,e){if(He("AsyncQueue",`${e}: ${n}`),Gr(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var Zd=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||U.comparator(t.key,r.key):(t,r)=>U.comparator(t.key,r.key),this.keyedMap=ru(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Jd=class{constructor(){this.W_=new Me(U.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):q():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},gs=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Zd.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var ov=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},sv=class{constructor(){this.queries=j0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=j0(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function j0(){return new Nn(n=>_b(n),Pu)}function Yv(n,e){return R(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new ov,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ts(s,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Jv(t)})}function Zv(n,e){return R(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function JL(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Jv(t)}function XL(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function Jv(n){n.Y_.forEach(e=>{e.next()})}var av,B0;(B0=av||(av={})).ea="default",B0.Cache="cache";var Su=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new gs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=gs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==av.Cache}};var uv=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Xd=class{constructor(e){this.serializer=e}Es(e){return An(this.serializer,e)}ds(e){return e.metadata.exists?Ub(this.serializer,e.document,!1):Ze.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ze(e)}},cv=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pS(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=me.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Xd(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ie()).add(o);t.set(s,a)}}return t}complete(){return R(this,null,function*(){let e=yield jL(this.localStore,new Xd(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield BL(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function pS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var eh=class{constructor(e){this.key=e}},th=class{constructor(e){this.key=e}},nh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=Ib(e),this.Ra=new Zd(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Jd,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=ku(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),M=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?b!==M&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(v?(s=s.add(v),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,b){let M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return M(v)-M(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new gs(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Jd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new th(r))}),this.da.forEach(r=>{e.has(r)||t.push(new eh(r))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return gs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},lv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},dv=class{constructor(e){this.key=e,this.va=!1}},hv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Nn(a=>_b(a),Pu),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(U.comparator),this.Na=new Map,this.La=new Cu,this.Ba={},this.ka=new Map,this.qa=ds.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function eV(n,e,t=!0){return R(this,null,function*(){let r=yh(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield gS(r,e,t,!0),i})}function tV(n,e){return R(this,null,function*(){let t=yh(n);yield gS(t,e,!0,!1)})}function gS(n,e,t,r){return R(this,null,function*(){let i=yield hs(n.localStore,bt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Xv(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&mh(n.remoteStore,i),a})}function Xv(n,e,t,r,i){return R(this,null,function*(){n.Ka=(p,m,v)=>function(M,N,j,H){return R(this,null,function*(){let F=N.view.ma(j);F.ns&&(F=yield qd(M.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,F)));let Y=H&&H.targetChanges.get(N.targetId),ee=H&&H.targetMismatches.get(N.targetId)!=null,Z=N.view.applyChanges(F,M.isPrimaryClient,Y,ee);return fv(M,N.targetId,Z.wa),Z.snapshot})}(n,p,m,v);let o=yield qd(n.localStore,e,!0),s=new nh(e,o.Ts),a=s.ma(o.documents),c=wu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);fv(n,t,l.wa);let h=new lv(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function nV(n,e,t){return R(this,null,function*(){let r=B(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Pu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield fs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ps(r.remoteStore,i.targetId),ms(r,i.targetId)}).catch(zr))):(ms(r,i.targetId),yield fs(r.localStore,i.targetId,!0))})}function rV(n,e){return R(this,null,function*(){let t=B(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ps(t.remoteStore,r.targetId))})}function iV(n,e,t){return R(this,null,function*(){let r=r_(n);try{let i=yield function(s,a){let c=B(s),l=Oe.now(),h=a.reduce((v,b)=>v.add(b.key),ie()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Nt(),M=ie();return c.cs.getEntries(v,h).next(N=>{b=N,b.forEach((j,H)=>{H.isValidDocument()||(M=M.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,b)).next(N=>{p=N;let j=[];for(let H of a){let F=vL(H,p.get(H.key).overlayedDocument);F!=null&&j.push(new hn(H.key,F,hb(F.value.mapValue),Be.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,j,a)}).next(N=>{m=N;let j=N.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(v,N.batchId,j)})}).then(()=>({batchId:m.batchId,changes:Db(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Me(re)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield or(r,i.changes),yield Ds(r.remoteStore)}catch(i){let o=Ts(i,"Failed to persist write");t.reject(o)}})}function mS(n,e){return R(this,null,function*(){let t=B(n);try{let r=yield LL(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(W(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?W(s.va):i.removedDocuments.size>0&&(W(s.va),s.va=!1))}),yield or(t,r,e)}catch(r){yield zr(r)}})}function U0(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=B(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&Jv(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function oV(n,e,t){return R(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Me(U.comparator);s=s.insert(o,Ze.newNoDocument(o,Q.min()));let a=ie().add(o),c=new _u(Q.min(),new Map,new Me(re),s,a);yield mS(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),n_(r)}else yield fs(r.localStore,e,!1).then(()=>ms(r,e,t)).catch(zr)})}function sV(n,e){return R(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield FL(t.localStore,e);t_(t,r,null),e_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield or(t,i)}catch(i){yield zr(i)}})}function aV(n,e,t){return R(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let c=B(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(W(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);t_(r,e,t),e_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield or(r,i)}catch(i){yield zr(i)}})}function uV(n,e){return R(this,null,function*(){let t=B(n);Wr(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ts(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function e_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function t_(n,e,t){let r=B(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ms(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||yS(n,r)})}function yS(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(ps(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),n_(n))}function fv(n,e,t){for(let r of t)r instanceof eh?(n.La.addReference(r.key,e),cV(n,r)):r instanceof th?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||yS(n,r.key)):q()}function cV(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),n_(n))}function n_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new U(me.fromString(e)),r=n.qa.next();n.Na.set(r,new dv(t)),n.Oa=n.Oa.insert(t,r),mh(n.remoteStore,new ls(bt(Is(t.path)),r,"TargetPurposeLimboResolution",$t.oe))}}function or(n,e,t){return R(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=zy.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return R(this,null,function*(){let h=B(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Gr(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),b=v.snapshotVersion,M=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,M)}}})}(r.localStore,o))})}function lV(n,e){return R(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield nS(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield or(t,r.hs)}})}function dV(n,e){let t=B(n),r=t.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function hV(n,e){return R(this,null,function*(){let t=B(n),r=yield qd(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&fv(t,e.targetId,i.wa),i})}function fV(n,e){return R(this,null,function*(){let t=B(n);return sS(t.localStore,e).then(r=>or(t,r))})}function pV(n,e,t,r){return R(this,null,function*(){let i=B(n),o=yield function(a,c){let l=B(a),h=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Ds(i.remoteStore):t==="acknowledged"||t==="rejected"?(t_(i,e,r||null),e_(i,e),function(a,c){B(B(a).mutationQueue).On(c)}(i.localStore,e)):q(),yield or(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function gV(n,e){return R(this,null,function*(){let t=B(n);if(yh(t),r_(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield $0(t,r.toArray());t.Qa=!0,yield rv(t.remoteStore,!0);for(let o of i)mh(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ms(t,s),fs(t.localStore,s,!0))),ps(t.remoteStore,s)}),yield i,yield $0(t,r),function(s){let a=B(s);a.Na.forEach((c,l)=>{ps(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Me(U.comparator)}(t),t.Qa=!1,yield rv(t.remoteStore,!1)}})}function $0(n,e,t){return R(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield hs(r.localStore,bt(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield hV(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield oS(r.localStore,s);a=yield hs(r.localStore,l),yield Xv(r,vS(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function vS(n){return vb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function mV(n){return function(t){return B(B(t).persistence).Qi()}(B(n).localStore)}function yV(n,e,t,r){return R(this,null,function*(){let i=B(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield sS(i.localStore,wb(o[0])),a=_u.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ge.EMPTY_BYTE_STRING);yield or(i,s,a);break}case"rejected":yield fs(i.localStore,e,!0),ms(i,e,r);break;default:q()}})}function vV(n,e,t){return R(this,null,function*(){let r=yh(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield oS(r.localStore,i),s=yield hs(r.localStore,o);yield Xv(r,vS(o),s.targetId,!1,s.resumeToken),mh(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield fs(r.localStore,i,!1).then(()=>{ps(r.remoteStore,i),ms(r,i)}).catch(zr))}})}function yh(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oV.bind(null,e),e.Ca.d_=JL.bind(null,e.eventManager),e.Ca.$a=XL.bind(null,e.eventManager),e}function r_(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aV.bind(null,e),e}function _V(n,e,t){let r=B(n);(function(o,s,a){return R(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(v,b){let M=B(v),N=ze(b.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",j=>M.Gr.getBundleMetadata(j,b.id)).then(j=>!!j&&j.createTime.compareTo(N)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(pS(c));let l=new cv(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield or(o,p.Ia,void 0),yield function(v,b){let M=B(v);return M.persistence.runTransaction("Save bundle","readwrite",N=>M.Gr.saveBundleMetadata(N,b))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return ln("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var pv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return R(this,null,function*(){this.serializer=Ou(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return tS(this.persistence,new Hd,t.initialUser,this.serializer)}Ga(t){return new Ud($d.Zr,this.serializer)}Wa(t){return new Wd}terminate(){return R(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var rh=class n extends pv{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield tf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield r_(this.Ja.syncEngine),yield Ds(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return tS(this.persistence,new Hd,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new xy(r,e.asyncQueue,t)}Ha(e,t){let r=new Gm(t,this.persistence);return new zm(e.asyncQueue,r)}Ga(e){let t=Gv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new qy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,uS(),md(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Wd}},gv=class n extends rh{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return R(this,null,function*(){yield tf(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof cu&&(this.sharedClientState.syncEngine={no:pV.bind(null,t),ro:yV.bind(null,t),io:vV.bind(null,t),Qi:mV.bind(null,t),eo:fV.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>R(this,null,function*(){yield gV(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=uS();if(!cu.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Gv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},i_=(()=>{class n{initialize(t,r){return R(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>U0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lV.bind(null,this.syncEngine),yield rv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new sv}()}createDatastore(t){let r=Ou(t.databaseInfo.databaseId),i=function(s){return new Zy(s)}(t.databaseInfo);return function(s,a,c,l){return new ev(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new nv(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>U0(this.syncEngine,r,0),function(){return Kd.D()?new Kd:new Qy}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new hv(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){var t,r;yield function(o){return R(this,null,function*(){let s=B(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Es(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function H0(n,e=10240){let t=0;return{read(){return R(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return R(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ys=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):He("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var mv=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Xe,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return R(this,null,function*(){return this.metadata.promise})}Ua(){return R(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return R(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new uv(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return R(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return R(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return R(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var yv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return R(this,null,function*(){let s=B(i),a={documents:o.map(p=>Iu(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,me.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=CL(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());W(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=U.fromPath(r);this.mutations.push(new mu(i,this.precondition(i)))}),yield function(r,i){return R(this,null,function*(){let o=B(r),s={writes:i.map(a=>Eu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,me.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw q();t=Q.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Q.min())?Be.exists(!1):Be.updateTime(t):Be.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Q.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Be.updateTime(t)}return Be.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var vv=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new bu(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>R(this,null,function*(){let e=new yv(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Mu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Pb(t)}return!1}};var _v=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ye.UNAUTHENTICATED,this.clientId=vd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ts(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function km(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield nS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function q0(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield o_(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>V0(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>V0(e.remoteStore,i)),n._onlineComponents=e})}function o_(n){return R(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield km(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ln("Error using user provided cache. Falling back to memory cache: "+t),yield km(n,new pv)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield km(n,new pv);return n._offlineComponents})}function vh(n){return R(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield q0(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield q0(n,new i_))),n._onlineComponents})}function _S(n){return o_(n).then(e=>e.persistence)}function s_(n){return o_(n).then(e=>e.localStore)}function wS(n){return vh(n).then(e=>e.remoteStore)}function a_(n){return vh(n).then(e=>e.syncEngine)}function wV(n){return vh(n).then(e=>e.datastore)}function vs(n){return R(this,null,function*(){let e=yield vh(n),t=e.eventManager;return t.onListen=eV.bind(null,e.syncEngine),t.onUnlisten=nV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rV.bind(null,e.syncEngine),t})}function IV(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield _S(n),t=yield wS(n);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.L_.delete(0),Fu(o)}(t)}))}function EV(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield _S(n),t=yield wS(n);return e.setNetworkEnabled(!1),function(i){return R(this,null,function*(){let o=B(i);o.L_.add(0),yield Es(o),o.q_.set("Offline")})}(t)}))}function DV(n,e){let t=new Xe;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield function(l,h){let p=B(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Ts(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield s_(n),e,t)})),t.promise}function IS(n,e,t={}){let r=new Xe;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new ys({next:m=>{h.Za(),s.enqueueAndForget(()=>Zv(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Su(Is(a.path),h,{includeMetadataChanges:!0,_a:!0});return Yv(o,p)}(yield vs(n),n.asyncQueue,e,t,r)})),r.promise}function CV(n,e){let t=new Xe;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield qd(i,o,!0),c=new nh(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=Ts(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield s_(n),e,t)})),t.promise}function ES(n,e,t={}){let r=new Xe;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new ys({next:m=>{h.Za(),s.enqueueAndForget(()=>Zv(o,p)),m.fromCache&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Su(a,h,{includeMetadataChanges:!0,_a:!0});return Yv(o,p)}(yield vs(n),n.asyncQueue,e,t,r)})),r.promise}function TV(n,e){let t=new ys(e);return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){B(i).Y_.add(o),o.next()}(yield vs(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){B(i).Y_.delete(o)}(yield vs(n),t)}))}}function bV(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?Ob().encode(s):s,function(h,p){return new mv(h,p)}(function(h,p){if(h instanceof Uint8Array)return H0(h,p);if(h instanceof ArrayBuffer)return H0(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Ou(e));n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){_V(yield a_(n),i,r)}))}function SV(n,e){return n.asyncQueue.enqueue(()=>R(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield s_(n),e)}))}function DS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var z0=new Map;function u_(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function c_(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function G0(n){if(!U.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function W0(n){if(U.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _h(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q()}function ye(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=_h(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function CS(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var ih=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Oi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ih({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ih(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Om;switch(r.type){case"firstParty":return new jm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=z0.get(t);r&&(k("ComponentProvider","Removing Datastore"),z0.delete(t),r.terminate())}(this),Promise.resolve()}};function TS(n,e,t,r={}){var i;let o=(n=ye(n,Oi))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ln("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ye.MOCK_USER;else{a=Lw(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ye(l)}n._authCredentials=new Fm(new yd(a,c))}}var ut=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},xe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},xn=class n extends ut{constructor(e,t,r){super(e,t,Is(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xe(this.firestore,null,new U(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function l_(n,e,...t){if(n=Pe(n),u_("collection","path",e),n instanceof Oi){let r=me.fromString(e,...t);return W0(r),new xn(n,null,r)}{if(!(n instanceof xe||n instanceof xn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return W0(r),new xn(n.firestore,null,r)}}function bS(n,e){if(n=ye(n,Oi),u_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ut(n,null,function(r){return new dn(me.emptyPath(),r)}(e))}function Lu(n,e,...t){if(n=Pe(n),arguments.length===1&&(e=vd.newId()),u_("doc","path",e),n instanceof Oi){let r=me.fromString(e,...t);return G0(r),new xe(n,null,new U(r))}{if(!(n instanceof xe||n instanceof xn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(me.fromString(e,...t));return G0(r),new xe(n.firestore,n instanceof xn?n.converter:null,new U(r))}}function d_(n,e){return n=Pe(n),e=Pe(e),(n instanceof xe||n instanceof xn)&&(e instanceof xe||e instanceof xn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function h_(n,e){return n=Pe(n),e=Pe(e),n instanceof ut&&e instanceof ut&&n.firestore===e.firestore&&Pu(n._query,e._query)&&n.converter===e.converter}var oh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new bu(this,"async_queue_retry"),this.Vu=()=>{let r=md();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=md();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=md();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Xe;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return R(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Gr(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw He("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=iv.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&q()}verifyOperationInProgress(){}wu(){return R(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function wv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Iv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var SS=-1,Fe=class extends Oi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new oh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new oh(e),this._firestoreClient=void 0,yield e}})}};function ct(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||AS(n),n._firestoreClient}function AS(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new Wm(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,DS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new _v(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function xS(n,e){ln("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return MS(n,i_.provider,{build:r=>new rh(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function RS(n){return R(this,null,function*(){ln("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();MS(n,i_.provider,{build:t=>new gv(t,e.cacheSizeBytes)})})}function MS(n,e,t){if((n=ye(n,Fe))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},AS(n)}function NS(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Xe;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{yield function(r){return R(this,null,function*(){if(!Fr.D())return Promise.resolve();let i=r+"main";yield Fr.delete(i)})}(Gv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function PS(n){return function(t){let r=new Xe;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return uV(yield a_(t),r)})),r.promise}(ct(n=ye(n,Fe)))}function kS(n){return IV(ct(n=ye(n,Fe)))}function OS(n){return EV(ct(n=ye(n,Fe)))}function FS(n,e){let t=ct(n=ye(n,Fe)),r=new Iv;return bV(t,n._databaseId,e,r),r}function LS(n,e){return SV(ct(n=ye(n,Fe)),e).then(t=>t?new ut(n,null,t.query):null)}var Pn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ge.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var fn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var rr=class{constructor(e){this._methodName=e}};var Fi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var Au=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var AV=/^__.*__$/,Ev=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hn(e,this.data,this.fieldMask,t,this.fieldTransforms):new $r(e,this.data,t,this.fieldTransforms)}},sh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function VS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}var ah=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(VS(this.Cu)&&AV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Dv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ou(e)}Qu(e,t,r,i=!1){return new ah({Cu:e,methodName:t,qu:r,path:qe.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Bi(n){let e=n._freezeSettings(),t=Ou(n._databaseId);return new Dv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wh(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);g_("Data must be an object, but it was:",s,r);let a=US(r,s),c,l;if(o.merge)c=new Ht(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Av(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);HS(h,m)||h.push(m)}c=new Ht(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new Ev(new mt(a),c,l)}var xu=class n extends rr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function jS(n,e,t){return new ah({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Cv=class n extends rr{_toFieldTransform(e){return new Ni(e.path,new Br)}isEqual(e){return e instanceof n}},Tv=class n extends rr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=jS(this,e,!0),r=this.Ku.map(o=>Ui(o,t)),i=new tr(r);return new Ni(e.path,i)}isEqual(e){return e instanceof n&&of(this.Ku,e.Ku)}},bv=class n extends rr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=jS(this,e,!0),r=this.Ku.map(o=>Ui(o,t)),i=new nr(r);return new Ni(e.path,i)}isEqual(e){return e instanceof n&&of(this.Ku,e.Ku)}},Sv=class n extends rr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Ur(e.serializer,bb(e.serializer,this.$u));return new Ni(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function f_(n,e,t,r){let i=n.Qu(1,e,t);g_("Data must be an object, but it was:",i,r);let o=[],s=mt.empty();ji(r,(c,l)=>{let h=m_(e,c,t);l=Pe(l);let p=i.Nu(h);if(l instanceof xu)o.push(h);else{let m=Ui(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Ht(o);return new sh(s,a,i.fieldTransforms)}function p_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Av(e,r,t)],c=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Av(e,o[m])),c.push(o[m+1]);let l=[],h=mt.empty();for(let m=a.length-1;m>=0;--m)if(!HS(l,a[m])){let v=a[m],b=c[m];b=Pe(b);let M=s.Nu(v);if(b instanceof xu)l.push(v);else{let N=Ui(b,M);N!=null&&(l.push(v),h.set(v,N))}}let p=new Ht(l);return new sh(h,p,s.fieldTransforms)}function BS(n,e,t,r=!1){return Ui(t,n.Qu(r?4:3,e))}function Ui(n,e){if($S(n=Pe(n)))return g_("Unsupported field value:",e,n),US(n,e);if(n instanceof rr)return function(r,i){if(!VS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Ui(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Oe.fromDate(r);return{timestampValue:cs(i.serializer,o)}}if(r instanceof Oe){let o=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cs(i.serializer,o)}}if(r instanceof Fi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pn)return{bytesValue:Fb(i.serializer,r._byteString)};if(r instanceof xe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Hv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Au)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return $v(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${_h(r)}`)}(n,e)}function US(n,e){let t={};return ub(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ji(n,(r,i)=>{let o=Ui(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function $S(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Oe||n instanceof Fi||n instanceof Pn||n instanceof xe||n instanceof rr||n instanceof Au)}function g_(n,e,t){if(!$S(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=_h(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Av(n,e,t){if((e=Pe(e))instanceof fn)return e._internalPath;if(typeof e=="string")return m_(n,e);throw uh("Field path arguments must be of type string or ",n,!1,void 0,t)}var xV=new RegExp("[~\\*/\\[\\]]");function m_(n,e,t){if(e.search(xV)>=0)throw uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fn(...e.split("."))._internalPath}catch{throw uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function uh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new P(x.INVALID_ARGUMENT,a+n+c)}function HS(n,e){return n.some(t=>t.isEqual(e))}var Li=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new xv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Ih("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},xv=class extends Li{data(){return super.data()}};function Ih(n,e){return typeof e=="string"?m_(n,e):e instanceof fn?e._internalPath:e._delegate._internalPath}function qS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ru=class{},Vi=class extends Ru{};function sr(n,e,...t){let r=[];e instanceof Ru&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof Rv).length,a=o.filter(c=>c instanceof ch).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var ch=class n extends Vi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return eA(e._query,t),new ut(e.firestore,e.converter,sy(e._query,t))}_parse(e){let t=Bi(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Q0(p,h);let v=[];for(let b of p)v.push(K0(c,o,b));m={arrayValue:{values:v}}}else m=K0(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Q0(p,h),m=BS(a,s,p,h==="in"||h==="not-in");return de.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function zS(n,e,t){let r=e,i=Ih("where",n);return ch._create(i,r,t)}var Rv=class n extends Ru{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ce.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)eA(s,c),s=sy(s,c)}(e._query,t),new ut(e.firestore,e.converter,sy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Mv=class n extends Vi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ri(o,s)}(e._query,this._field,this._direction);return new ut(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new dn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function GS(n,e="asc"){let t=e,r=Ih("orderBy",n);return Mv._create(r,t)}var lh=class n extends Vi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ut(e.firestore,e.converter,Ad(e._query,this._limit,this._limitType))}};function WS(n){return CS("limit",n),lh._create("limit",n,"F")}function KS(n){return CS("limitToLast",n),lh._create("limitToLast",n,"L")}var dh=class n extends Vi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=XS(e,this.type,this._docOrFields,this._inclusive);return new ut(e.firestore,e.converter,function(i,o){return new dn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function QS(...n){return dh._create("startAt",n,!0)}function YS(...n){return dh._create("startAfter",n,!1)}var hh=class n extends Vi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=XS(e,this.type,this._docOrFields,this._inclusive);return new ut(e.firestore,e.converter,function(i,o){return new dn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function ZS(...n){return hh._create("endBefore",n,!1)}function JS(...n){return hh._create("endAt",n,!0)}function XS(n,e,t,r){if(t[0]=Pe(t[0]),t[0]instanceof Li)return function(o,s,a,c,l){if(!c)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of ts(o))if(p.field.isKeyField())h.push(xi(s,c.key));else{let m=c.data.field(p.field);if(ph(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new Mn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Bi(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let b=0;b<h.length;b++){let M=h[b];if(m[b].field.isKeyField()){if(typeof M!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof M}`);if(!Bv(s)&&M.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${M}' contains a slash.`);let N=s.path.child(me.fromString(M));if(!U.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let j=new U(N);v.push(xi(a,j))}else{let N=BS(c,l,M);v.push(N)}}return new Mn(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function K0(n,e,t){if(typeof(t=Pe(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bv(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(me.fromString(t));if(!U.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xi(n,new U(r))}if(t instanceof xe)return xi(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(t)}.`)}function Q0(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eA(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var _s=class{convertValue(e,t="none"){switch(Ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ji(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ne(s.doubleValue));return new Au(o)}convertGeoPoint(e){return new Fi(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Vv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fu(e));default:return null}}convertTimestamp(e){let t=er(e);return new Oe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=me.fromString(e);W(Wb(r));let i=new Vr(r.get(1),r.get(3)),o=new U(r.popFirst(5));return i.isEqual(t)||He(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Eh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Nv=class extends _s{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new xe(this.firestore,null,t)}};var Xn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},en=class extends Li{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new kr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Ih("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},kr=class extends en{data(e={}){return super.data(e)}},pn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Xn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new kr(this._firestore,this._userDataWriter,r.key,r,new Xn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new kr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new kr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:RV(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function RV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}function y_(n,e){return n instanceof en&&e instanceof en?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pn&&e instanceof pn&&n._firestore===e._firestore&&h_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function tA(n){n=ye(n,xe);let e=ye(n.firestore,Fe);return IS(ct(e),n._key).then(t=>I_(e,n,t))}var ir=class extends _s{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new xe(this.firestore,null,t)}};function nA(n){n=ye(n,xe);let e=ye(n.firestore,Fe),t=ct(e),r=new ir(e);return DV(t,n._key).then(i=>new en(e,r,n._key,i,new Xn(i!==null&&i.hasLocalMutations,!0),n.converter))}function rA(n){n=ye(n,xe);let e=ye(n.firestore,Fe);return IS(ct(e),n._key,{source:"server"}).then(t=>I_(e,n,t))}function iA(n){n=ye(n,ut);let e=ye(n.firestore,Fe),t=ct(e),r=new ir(e);return qS(n._query),ES(t,n._query).then(i=>new pn(e,r,n,i))}function oA(n){n=ye(n,ut);let e=ye(n.firestore,Fe),t=ct(e),r=new ir(e);return CV(t,n._query).then(i=>new pn(e,r,n,i))}function sA(n){n=ye(n,ut);let e=ye(n.firestore,Fe),t=ct(e),r=new ir(e);return ES(t,n._query,{source:"server"}).then(i=>new pn(e,r,n,i))}function v_(n,e,t){n=ye(n,xe);let r=ye(n.firestore,Fe),i=Eh(n.converter,e,t);return bs(r,[wh(Bi(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Be.none())])}function __(n,e,t,...r){n=ye(n,xe);let i=ye(n.firestore,Fe),o=Bi(i),s;return s=typeof(e=Pe(e))=="string"||e instanceof fn?p_(o,"updateDoc",n._key,e,t,r):f_(o,"updateDoc",n._key,e),bs(i,[s.toMutation(n._key,Be.exists(!0))])}function aA(n){return bs(ye(n.firestore,Fe),[new Hr(n._key,Be.none())])}function uA(n,e){let t=ye(n.firestore,Fe),r=Lu(n),i=Eh(n.converter,e);return bs(t,[wh(Bi(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Be.exists(!1))]).then(()=>r)}function w_(n,...e){var t,r,i;n=Pe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||wv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(wv(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof xe)l=ye(n.firestore,Fe),h=Is(n._key.path),c={next:p=>{e[s]&&e[s](I_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=ye(n,ut);l=ye(p.firestore,Fe),h=p._query;let m=new ir(l);c={next:v=>{e[s]&&e[s](new pn(l,m,p,v))},error:e[s+1],complete:e[s+2]},qS(n._query)}return function(m,v,b,M){let N=new ys(M),j=new Su(v,N,b);return m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return Yv(yield vs(m),j)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return Zv(yield vs(m),j)}))}}(ct(l),h,a,c)}function cA(n,e){return TV(ct(n=ye(n,Fe)),wv(e)?e:{next:e})}function bs(n,e){return function(r,i){let o=new Xe;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return iV(yield a_(r),i,o)})),o.promise}(ct(n),e)}function I_(n,e,t){let r=t.docs.get(e._key),i=new ir(n);return new en(n,i,e._key,r,new Xn(t.hasPendingWrites,t.fromCache),e.converter)}var MV={maxAttempts:5};var fh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bi(e)}set(e,t,r){this._verifyNotCommitted();let i=Nr(e,this._firestore),o=Eh(i.converter,t,r),s=wh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Be.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Nr(e,this._firestore),s;return s=typeof(t=Pe(t))=="string"||t instanceof fn?p_(this._dataReader,"WriteBatch.update",o._key,t,r,i):f_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Be.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Nr(e,this._firestore);return this._mutations=this._mutations.concat(new Hr(t._key,Be.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Nr(n,e){if((n=Pe(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Pv=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Bi(t)}get(t){let r=Nr(t,this._firestore),i=new Nv(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return q();let s=o[0];if(s.isFoundDocument())return new Li(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Li(this._firestore,i,r._key,null,r.converter);throw q()})}set(t,r,i){let o=Nr(t,this._firestore),s=Eh(o.converter,r,i),a=wh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Nr(t,this._firestore),a;return a=typeof(r=Pe(r))=="string"||r instanceof fn?p_(this._dataReader,"Transaction.update",s._key,r,i,o):f_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Nr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Nr(e,this._firestore),r=new ir(this._firestore);return super.get(e).then(i=>new en(this._firestore,r,t._key,i._document,new Xn(!1,!1),t.converter))}};function lA(n,e,t){n=ye(n,Fe);let r=Object.assign(Object.assign({},MV),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Xe;return o.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){let l=yield wV(o);new vv(o.asyncQueue,l,a,s,c).au()})),c.promise}(ct(n),i=>e(new Pv(n,i)),r)}function dA(){return new xu("deleteField")}function hA(){return new Cv("serverTimestamp")}function fA(...n){return new Tv("arrayUnion",n)}function pA(...n){return new bv("arrayRemove",n)}function gA(n){return new Sv("increment",n)}(function(e,t=!0){(function(i){ws=i})(Bw),Zs(new Jr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Fe(new Lm(r.getProvider("auth-internal")),new Um(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),dr(WT,"4.7.3",e),dr(WT,"4.7.3","esm2017")})();var NV="@firebase/firestore-compat",PV="0.3.38";function S_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function mA(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function yA(){if(!cb())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Dh=class n{constructor(e){this._delegate=e}static fromBase64String(e){return yA(),new n(Pn.fromBase64String(e))}static fromUint8Array(e){return mA(),new n(Pn.fromUint8Array(e))}toBase64(){return yA(),this._delegate.toBase64()}toUint8Array(){return mA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function E_(n){return kV(n,["next","error","complete"])}function kV(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var D_=class{enableIndexedDbPersistence(e,t){return xS(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return RS(e._delegate)}clearIndexedDbPersistence(e){return NS(e._delegate)}},Ch=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ln("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){TS(this._delegate,e,t,r)}enableNetwork(){return kS(this._delegate)}disableNetwork(){return OS(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,c_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return PS(this._delegate)}onSnapshotsInSync(e){return cA(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xs(this,l_(this._delegate,e))}catch(t){throw St(t,"collection()","Firestore.collection()")}}doc(e){try{return new kn(this,Lu(this._delegate,e))}catch(t){throw St(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zi(this,bS(this._delegate,e))}catch(t){throw St(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return lA(this._delegate,t=>e(new Th(this,t)))}batch(){return ct(this._delegate),new bh(new fh(this._delegate,e=>bs(this._delegate,e)))}loadBundle(e){return FS(this._delegate,e)}namedQuery(e){return LS(this._delegate,e).then(t=>t?new zi(this,t):null)}},Ss=class extends _s{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dh(new Pn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return kn.forKey(t,this.firestore,null)}};function OV(n){Y0(n)}var Th=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ss(e)}get(e){let t=$i(e);return this._delegate.get(t).then(r=>new Hi(this._firestore,new en(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=$i(e);return r?(S_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=$i(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=$i(e);return this._delegate.delete(t),this}},bh=class{constructor(e){this._delegate=e}set(e,t,r){let i=$i(e);return r?(S_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=$i(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=$i(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},As=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new kr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qi(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Ss(e),t),i.set(t,o)),o}};As.INSTANCES=new WeakMap;var kn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ss(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new xe(t._delegate,r,new U(e)))}static forKey(e,t,r){return new n(t,new xe(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new xs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xs(this.firestore,l_(this._delegate,e))}catch(t){throw St(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Pe(e),e instanceof xe?d_(this._delegate,e):!1}set(e,t){t=S_("DocumentReference.set",t);try{return t?v_(this._delegate,e,t):v_(this._delegate,e)}catch(r){throw St(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?__(this._delegate,e):__(this._delegate,e,t,...r)}catch(i){throw St(i,"updateDoc()","DocumentReference.update()")}}delete(){return aA(this._delegate)}onSnapshot(...e){let t=vA(e),r=_A(e,i=>new Hi(this.firestore,new en(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return w_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=nA(this._delegate):e?.source==="server"?t=rA(this._delegate):t=tA(this._delegate),t.then(r=>new Hi(this.firestore,new en(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(As.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function St(n,e,t){return n.message=n.message.replace(e,t),n}function vA(n){for(let e of n)if(typeof e=="object"&&!E_(e))return e;return{}}function _A(n,e){var t,r;let i;return E_(n[0])?i=n[0]:E_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Hi=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new kn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return y_(this._delegate,e._delegate)}},qi=class extends Hi{data(e){let t=this._delegate.data(e);return this._delegate._converter||Z0(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},zi=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ss(e)}where(e,t,r){try{return new n(this.firestore,sr(this._delegate,zS(e,t,r)))}catch(i){throw St(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,sr(this._delegate,GS(e,t)))}catch(r){throw St(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,sr(this._delegate,WS(e)))}catch(t){throw St(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,sr(this._delegate,KS(e)))}catch(t){throw St(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,sr(this._delegate,QS(...e)))}catch(t){throw St(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,sr(this._delegate,YS(...e)))}catch(t){throw St(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,sr(this._delegate,ZS(...e)))}catch(t){throw St(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,sr(this._delegate,JS(...e)))}catch(t){throw St(t,"endAt()","Query.endAt()")}}isEqual(e){return h_(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=oA(this._delegate):e?.source==="server"?t=sA(this._delegate):t=iA(this._delegate),t.then(r=>new Vu(this.firestore,new pn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=vA(e),r=_A(e,i=>new Vu(this.firestore,new pn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return w_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(As.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},C_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new qi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Vu=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new zi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new qi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new C_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new qi(this._firestore,r))})}isEqual(e){return y_(this._delegate,e._delegate)}},xs=class n extends zi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new kn(this.firestore,e):null}doc(e){try{return e===void 0?new kn(this.firestore,Lu(this._delegate)):new kn(this.firestore,Lu(this._delegate,e))}catch(t){throw St(t,"doc()","CollectionReference.doc()")}}add(e){return uA(this._delegate,e).then(t=>new kn(this.firestore,t))}isEqual(e){return d_(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(As.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function $i(n){return ye(n,xe)}var T_=class n{constructor(...e){this._delegate=new fn(...e)}static documentId(){return new n(qe.keyField().canonicalString())}isEqual(e){return e=Pe(e),e instanceof fn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var b_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=hA();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=dA();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=fA(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=pA(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=gA(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var FV={Firestore:Ch,GeoPoint:Fi,Timestamp:Oe,Blob:Dh,Transaction:Th,WriteBatch:bh,DocumentReference:kn,DocumentSnapshot:Hi,Query:zi,QueryDocumentSnapshot:qi,QuerySnapshot:Vu,CollectionReference:xs,FieldPath:T_,FieldValue:b_,setLogLevel:OV,CACHE_SIZE_UNLIMITED:SS};function LV(n,e){n.INTERNAL.registerComponent(new Jr("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},FV)))}function VV(n){LV(n,(e,t)=>new Ch(e,t,new D_)),n.registerVersion(NV,PV)}VV(kt);function jV(n,e=ta){return new he(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function wA(n,e){return jV(n,e)}function BV(n,e){return wA(n,e).pipe(ii(void 0),ia(),K(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function R_(n,e){return wA(n,e).pipe(K(t=>({payload:t,type:"query"})))}var Sh=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=DA(r,t);return new xh(i,o,this.afs)}snapshotChanges(){return BV(this.ref,this.afs.schedulers.outsideAngular).pipe(Mt)}valueChanges(e={}){return this.snapshotChanges().pipe(K(({payload:t})=>e.idField?Ae($({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return _e(this.ref.get(e)).pipe(Mt)}};function Ah(n,e){return R_(n,e).pipe(ii(void 0),ia(),K(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function IA(n,e,t){return Ah(n,t).pipe(ri((r,i)=>UV(r,i.map(o=>o.payload),e),[]),xf(),K(r=>r.map(i=>({type:i.type,payload:i}))))}function UV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=$V(n,r))}),n}function A_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function $V(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return A_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return A_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return A_(n,e.oldIndex,1);break}return n}function EA(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var xh=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ah(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(K(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ii(void 0),ia(),at(([r,i])=>i.length>0||!r),K(([,r])=>r),Mt)}auditTrail(e){return this.stateChanges(e).pipe(ri((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=EA(e);return IA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mt)}valueChanges(e={}){return R_(this.query,this.afs.schedulers.outsideAngular).pipe(K(t=>t.payload.docs.map(r=>e.idField?Ae($({},r.data()),{[e.idField]:r.id}):r.data())),Mt)}get(e){return _e(this.query.get(e)).pipe(Mt)}add(e){return this.ref.add(e)}doc(e){return new Sh(this.ref.doc(e),this.afs)}},x_=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Ah(this.query,this.afs.schedulers.outsideAngular).pipe(Mt):Ah(this.query,this.afs.schedulers.outsideAngular).pipe(K(t=>t.filter(r=>e.indexOf(r.type)>-1)),at(t=>t.length>0),Mt)}auditTrail(e){return this.stateChanges(e).pipe(ri((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=EA(e);return IA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mt)}valueChanges(e={}){return R_(this.query,this.afs.schedulers.outsideAngular).pipe(K(r=>r.payload.docs.map(i=>e.idField?$({[e.idField]:i.id},i.data()):i.data())),Mt)}get(e){return _e(this.query.get(e)).pipe(Mt)}},HV=new G("angularfire2.enableFirestorePersistence"),qV=new G("angularfire2.firestore.persistenceSettings"),zV=new G("angularfire2.firestore.settings"),GV=new G("angularfire2.firestore.use-emulator");function DA(n,e=t=>t){return{query:e(n),ref:n}}var Rs=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,v,b,M,N,j,H){this.schedulers=c;let F=Za(t,a,r),Y=h;p&&Dm(F,a,m,b,M,N,v,j),[this.firestore,this.persistenceEnabled$]=od(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ee=a.runOutsideAngular(()=>F.firestore());if(o&&ee.settings(o),Y&&ee.useEmulator(...Y),i&&!gi(s)){let Z=()=>{try{return _e(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),J(!1)}};return[ee,a.runOutsideAngular(Z)]}else return[ee,J(!1)]},[o,Y,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=DA(i,r),a=this.schedulers.ngZone.run(()=>o);return new xh(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new x_(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Sh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(Uo),O($o,8),O(HV,8),O(zV,8),O(xt),O(pe),O(nd),O(qV,8),O(GV,8),O(qT,8),O(ym,8),O(vm,8),O(_m,8),O(wm,8),O(Im,8),O(Em,8),O(_i,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var CA=(()=>{class n{constructor(t){this.db=t,this.accesoHeader="header service running...",this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}static{this.\u0275fac=function(r){return new(r||n)(O(Rs))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var TA=(()=>{class n{constructor(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bA=(()=>{class n{constructor(t,r){this.headerService=t,this.skillsService=r,this.header=new ed,this.skills={lenguajes:"",tecnologias:""},console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(K(i=>i.map(o=>$({id:o.payload.doc.id},o.payload.doc.data())))).subscribe(i=>{this.header=i[0],console.log(this.header)})}static{this.\u0275fac=function(r){return new(r||n)(Vt(CA),Vt(TA))}}static{this.\u0275cmp=tt({type:n,selectors:[["app-header"]],decls:22,vars:6,consts:[["src","header.photoUrl"]],template:function(r,i){r&1&&(le(0,"h1"),Ie(1),ae(),le(2,"p"),Ie(3),ae(),jt(4,"img",0),le(5,"ul")(6,"li")(7,"strong"),Ie(8,"Email: "),ae(),Ie(9),ae(),le(10,"li")(11,"strong"),Ie(12,"Phone Number: "),ae(),Ie(13),ae(),le(14,"li")(15,"strong"),Ie(16,"Location: "),ae(),Ie(17),ae(),le(18,"li")(19,"strong"),Ie(20,"socialNetwork: "),ae(),Ie(21),ae()()),r&2&&(nt(),Dl(i.header.name),nt(2),Dl(i.header.goalLife),nt(6),rt("",i.header.email," "),nt(4),rt("",i.header.phoneNumber," "),nt(4),rt("",i.header.location," "),nt(4),rt("",i.header.socialNetwork," "))},styles:["header[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{grid-column:span 2}"]})}}return n})();var SA=(()=>{class n{constructor(t){this.db=t,this.accesoWorkExperience="work-experience service running...",this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}static{this.\u0275fac=function(r){return new(r||n)(O(Rs))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ZV(n,e){if(n&1&&(le(0,"div")(1,"p"),Ie(2),ae(),le(3,"p"),Ie(4),ae(),le(5,"p"),Ie(6),ae(),le(7,"p"),Ie(8),ae(),le(9,"p"),Ie(10),ae(),le(11,"p"),Ie(12),ae()()),n&2){let t=e.$implicit;nt(2),rt("Company: ",t.company,""),nt(2),rt("Position: ",t.position,""),nt(2),rt("Location: ",t.location,""),nt(2),rt("Start Date: ",t.startDate,""),nt(2),rt("End Date: ",t.endDate,""),nt(2),rt("Accomplishments: ",t.accomplishments,"")}}var AA=(()=>{class n{constructor(t){this.workExperienceService=t,this.workExperienceList=[]}ngOnInit(){this.workExperienceService.getWorkExperience().snapshotChanges().pipe(K(t=>t.map(r=>$({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.workExperienceList=t,console.log(this.workExperienceList)})}static{this.\u0275fac=function(r){return new(r||n)(Vt(SA))}}static{this.\u0275cmp=tt({type:n,selectors:[["app-work-experience"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&wa(0,ZV,13,6,"div",0),r&2&&Ia("ngForOf",i.workExperienceList)},dependencies:[Ml]})}}return n})();var xA=(()=>{class n{constructor(t){this.db=t,this.dbPath="/Education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef.snapshotChanges().pipe(K(t=>t.map(r=>$({id:r.payload.doc.id},r.payload.doc.data()))))}static{this.\u0275fac=function(r){return new(r||n)(O(Rs))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function e2(n,e){if(n&1&&(le(0,"div")(1,"p"),Ie(2),ae(),le(3,"p"),Ie(4),ae(),le(5,"p"),Ie(6),ae()()),n&2){let t=e.$implicit;nt(2),rt("School: ",t.school,""),nt(2),rt("Training: ",t.training,""),nt(2),rt("Licenses: ",t.licenses,"")}}var RA=(()=>{class n{constructor(t){this.educationService=t,this.educationList=[]}ngOnInit(){this.educationService.getEducation().subscribe(t=>{this.educationList=t,console.log(this.educationList)})}static{this.\u0275fac=function(r){return new(r||n)(Vt(xA))}}static{this.\u0275cmp=tt({type:n,selectors:[["app-education"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&wa(0,e2,7,3,"div",0),r&2&&Ia("ngForOf",i.educationList)},dependencies:[Ml]})}}return n})();var MA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=tt({type:n,selectors:[["app-skills"]],decls:2,vars:0,template:function(r,i){r&1&&(le(0,"p"),Ie(1,"skills works!"),ae())}})}}return n})();var NA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=tt({type:n,selectors:[["app-certificates"]],decls:2,vars:0,template:function(r,i){r&1&&(le(0,"p"),Ie(1,"certificates works!"),ae())}})}}return n})();var PA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=tt({type:n,selectors:[["app-languages"]],decls:2,vars:0,template:function(r,i){r&1&&(le(0,"p"),Ie(1,"languages works!"),ae())}})}}return n})();var kA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=tt({type:n,selectors:[["app-interests"]],decls:2,vars:0,template:function(r,i){r&1&&(le(0,"p"),Ie(1,"interests works!"),ae())}})}}return n})();var OA=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=tt({type:n,selectors:[["app-root"]],decls:19,vars:0,consts:[["border","1"],["colspan","2"]],template:function(r,i){r&1&&(le(0,"table",0)(1,"tr")(2,"td",1),jt(3,"app-header"),ae()(),le(4,"tr")(5,"td"),jt(6,"app-work-experience"),ae(),le(7,"td"),jt(8,"app-skills"),ae()(),le(9,"tr")(10,"td"),jt(11,"app-education"),ae(),le(12,"td"),jt(13,"app-certificates"),ae()(),le(14,"tr")(15,"td"),jt(16,"app-languages"),ae(),le(17,"td"),jt(18,"app-interests"),ae()()())},dependencies:[bA,AA,RA,MA,NA,PA,kA]})}}return n})();var FA={production:!1,firebaseConfig:{apiKey:"AIzaSyCt8-P24TAy1OOKK1a3BbADfG146AnNDLQ",authDomain:"sinoe-ruiz.firebaseapp.com",projectId:"sinoe-ruiz",storageBucket:"sinoe-ruiz.firebasestorage.app",messagingSenderId:"922018337163",appId:"1:922018337163:web:69cba63cd34a975bd29f8e"}};var LA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ct({type:n,bootstrap:[OA]})}static{this.\u0275inj=Dt({imports:[kC,ST,HT.initializeApp(FA.firebaseConfig)]})}}return n})();PC().bootstrapModule(LA,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
